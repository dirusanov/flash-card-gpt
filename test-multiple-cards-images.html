<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Multiple Cards Images</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-card {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .problem {
            color: #d32f2f;
            font-weight: bold;
        }
        .solution {
            color: #2e7d32;
            font-weight: bold;
        }
        .code {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            border-left: 4px solid #2196f3;
        }
    </style>
</head>
<body>
    <h1>üêõ –ü—Ä–æ–±–ª–µ–º–∞: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ –∫–∞—Ä—Ç–∏–Ω–æ–∫</h1>
    
    <div class="test-card">
        <h2 class="problem">‚ùå –ü—Ä–æ–±–ª–µ–º–∞</h2>
        <p>–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –∏–∑ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –¥–∞–∂–µ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.</p>
        
        <h3>–°–∏–º–ø—Ç–æ–º—ã:</h3>
        <ul>
            <li>–ü–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</li>
            <li>–û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</li>
            <li>–ü—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫</li>
            <li>–û–¥–∏–Ω–æ—á–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ</li>
        </ul>
    </div>

    <div class="test-card">
        <h2 class="solution">‚úÖ –ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞</h2>
        
        <h3>1. –û—á–∏—Å—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Ü–∏–∫–ª–µ:</h3>
        <div class="code">
// –í —Ñ—É–Ω–∫—Ü–∏–∏ createCardsFromSelectedOptions:
for (const option of selectedOptions) {
    // ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –û—á–∏—â–∞–ª–∏—Å—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
    dispatch(setImage(null));     // ‚Üê –£–¥–∞–ª—è–ª–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è!
    dispatch(setImageUrl(null));  // ‚Üê –ò —ç—Ç–æ —Ç–æ–∂–µ!
}
        </div>
        
        <h3>2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:</h3>
        <div class="code">
// ‚ùå –°–¢–ê–†–ê–Ø –õ–û–ì–ò–ö–ê:
if (shouldGenerateImage && modelProvider === ModelProvider.OpenAI) {
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è...
}

// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê:
if (imageGenerationMode !== 'off' && isImageGenerationAvailable()) {
    // –£—á–∏—Ç—ã–≤–∞–µ—Ç smart/always —Ä–µ–∂–∏–º—ã
}
        </div>
        
        <h3>3. –ö–æ–Ω—Ñ–ª–∏–∫—Ç Redux —Å–æ—Å—Ç–æ—è–Ω–∏—è:</h3>
        <div class="code">
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ü–∏–∫–ª–µ
dispatch(setImageUrl(imageUrl));  // –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª–æ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
dispatch(setImage(imageBase64));  // –í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—É—á–∞–ª–∏ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        </div>
    </div>

    <div class="test-card">
        <h2 class="solution">üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
        
        <h3>1. –£–±—Ä–∞–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Ü–∏–∫–ª–µ</h3>
        <div class="code">
// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û:
for (const option of selectedOptions) {
    // –û—á–∏—â–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    dispatch(setText(''));
    dispatch(setTranslation(''));
    dispatch(setExamples([]));
    // –ù–ï –æ—á–∏—â–∞–µ–º: dispatch(setImage(null));
    // –ù–ï –æ—á–∏—â–∞–µ–º: dispatch(setImageUrl(null));
}
        </div>
        
        <h3>2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö</h3>
        <div class="code">
// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û:
let currentImageUrl = null;
let currentImage = null;

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
if (imageUrl) {
    currentImageUrl = imageUrl;
    // –ù–ï –æ–±–Ω–æ–≤–ª—è–µ–º Redux: dispatch(setImageUrl(imageUrl));
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–∞—Ä—Ç–æ—á–∫—É –∏–∑ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
const cardData = {
    image: currentImage,     // ‚Üê –õ–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
    imageUrl: currentImageUrl, // ‚Üê –õ–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
    // ...
};
        </div>
        
        <h3>3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–∂–∏–º–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h3>
        <div class="code">
// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û:
if (imageGenerationMode !== 'off' && isImageGenerationAvailable()) {
    let shouldGenerate = imageGenerationMode === 'always';
    
    if (imageGenerationMode === 'smart') {
        const analysis = await shouldGenerateImageForText(option);
        shouldGenerate = analysis.shouldGenerate;
    }
    
    if (shouldGenerate) {
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    }
}
        </div>
    </div>

    <div class="test-card">
        <h2>üìã –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
        
        <h3>–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</h3>
        <ol>
            <li>–í—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ª–æ–≤–∞–º–∏</li>
            <li>–ù–∞–∂–º–∏—Ç–µ "Analyze Selection"</li>
            <li>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ü–∏–π</li>
            <li>–ù–∞–∂–º–∏—Ç–µ "Create X Cards"</li>
            <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–º–µ—é—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)</li>
        </ol>
        
        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h3>
        <ul>
            <li>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Image Generation Mode: "Always" –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</li>
            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ OpenAI provider (Groq –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)</li>
            <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ OpenAI API key –Ω–∞—Å—Ç—Ä–æ–µ–Ω</li>
        </ul>
    </div>

    <div class="test-card">
        <h2>üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        <p>–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:</p>
        <div class="code">
*** MULTIPLE CARDS CREATION STARTED ***
Image generation settings: {
    imageGenerationMode: "always",
    modelProvider: "openai", 
    isImageGenerationAvailable: true,
    selectedOptionsCount: 3
}

Generating image for "apple"
Image URL generated for "apple": https://oaidalleapiprodscus...
Image base64 generated for "apple": data:image/png;base64,iVBOR...

Created card 1234567890_0 but NOT saving to storage yet. Image info: {
    hasImage: true,
    hasImageUrl: true,
    imageLength: 12345,
    imageUrlLength: 87
}
        </div>
    </div>
</body>
</html> 