# üéØ –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—á–µ–∑–∞—é—Ç –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–æ **3 –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Å—Ç–∞**, –≥–¥–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–ª–∏—Å—å:

### 1. ‚ùå –í Redux Reducer (–ò–°–ü–†–ê–í–õ–ï–ù–û)

**–ú–µ—Å—Ç–æ**: `src/store/reducers/cards.ts` —Å—Ç—Ä–æ–∫–∏ 202-207
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ (`SET_TEXT`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–ª–∏—Å—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```typescript
// –ë–´–õ–û (–ü–õ–û–•–û):
case SET_TEXT:
    newState.text = action.payload;
    if (!state.currentCardId) {
        newState.image = null;        // ‚Üê –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—á–µ–∑–∞–ª–∏ –∑–¥–µ—Å—å!
        newState.imageUrl = null;     // ‚Üê –ò –∑–¥–µ—Å—å!
    }
```

**–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞.

### 2. ‚ùå –í —Ñ—É–Ω–∫—Ü–∏–∏ handleSubmit (–ò–°–ü–†–ê–í–õ–ï–ù–û)

**–ú–µ—Å—Ç–æ**: `src/components/CreateCard.tsx` —Å—Ç—Ä–æ–∫–∏ 930-931
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–ª–∏—Å—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```typescript
// –ë–´–õ–û (–ü–õ–û–•–û):
dispatch(setImage(null)); // ‚Üê –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—á–µ–∑–∞–ª–∏ –ø—Ä–∏ Create Card!
dispatch(setImageUrl(null)); // ‚Üê –ò –∑–¥–µ—Å—å!
```

**–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫.

### 3. ‚úÖ –í —Ñ—É–Ω–∫—Ü–∏–∏ handleCreateNew (–£–õ–£–ß–®–ï–ù–û)

**–ú–µ—Å—Ç–æ**: `src/components/CreateCard.tsx` —Ñ—É–Ω–∫—Ü–∏—è `handleCreateNew`
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "Create New" –≤—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–ª–∏—Å—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏–ª–∏ –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º —Ä–µ—à–∞–µ—Ç, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –Ω–µ—Ç.

## üõ†Ô∏è –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω Redux Reducer

```typescript
// src/store/reducers/cards.ts
case SET_TEXT:
    newState.text = action.payload;
    // REMOVED: Automatic image clearing when text changes
    // This was causing images to disappear when creating new cards
    // Now images are preserved until explicitly cleared or replaced
    break;
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫

```typescript
// src/components/CreateCard.tsx
// CHANGED: Don't automatically clear image data when creating new cards
// This was causing images to disappear when users wanted to keep them
// Only clear linguistic info and transcription as they are text-specific
dispatch(setLinguisticInfo(''));
dispatch(setTranscription(''));

// Images will be preserved unless user explicitly changes them
// This allows users to create multiple cards with the same image
```

### 3. –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è "Create New"

```typescript
// src/components/CreateCard.tsx
const handleCreateNew = () => {
  // If user has an image, ask if they want to keep it for the new card
  const hasImage = image || imageUrl;
  const shouldKeepImage = hasImage
    ? window.confirm(
        'You have an image in the current card. Do you want to keep it for the new card?'
      )
    : false;

  // Clear images only if user doesn't want to keep them
  if (!shouldKeepImage) {
    dispatch(setImage(null));
    dispatch(setImageUrl(null));
  }
  // ... rest of function
};
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–æ —É–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤–∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redux reducer –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

```typescript
case SET_IMAGE:
    console.log('*** REDUCER: SET_IMAGE called with:', {
        hasPayload: !!action.payload,
        payloadType: typeof action.payload,
        payloadLength: action.payload?.length,
        payloadPreview: action.payload?.substring(0, 50)
    });
    newState.image = action.payload;
    break;
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è **–ù–ï –ò–°–ß–ï–ó–ê–Æ–¢** –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

1. ‚úÖ –ü—Ä–∏ –≤–≤–æ–¥–µ –Ω–æ–≤–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏
2. ‚úÖ –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "Create Card"
3. ‚úÖ –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
4. ‚úÖ –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
5. ‚úÖ –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ–¥—Ä—è–¥ —Å –æ–¥–Ω–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º

## üéØ –ö–æ–≥–¥–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ë–£–î–£–¢ –æ—á–∏—â–∞—Ç—å—Å—è (—ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ):

1. üîÑ –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "Create New" –∏ –≤—ã–±–æ—Ä–µ "No" –≤ –¥–∏–∞–ª–æ–≥–µ
2. üîÑ –ü—Ä–∏ —è–≤–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∫–Ω–æ–ø–∫–∞ "New Image")
3. üîÑ –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥—Ä—É–≥–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º**
2. **–ù–∞–∂–º–∏—Ç–µ "Create Card"** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ "Saved Cards"** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–Ω–∞—á–æ–∫ `üì∏ IMG`
4. **–°–æ–∑–¥–∞–π—Ç–µ –µ—â–µ –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞—Ç—å—Å—è
5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –æ–±–µ–∏—Ö –∫–∞—Ä—Ç–æ—á–∫–∞—Ö

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
2. **–£–ª—É—á—à–µ–Ω middleware** –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∫–≤–æ—Ç—ã
3. **–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** –≤ UI (–∫–Ω–æ–ø–∫–∏ Debug, Optimize)

---

## üéâ –ò–¢–û–ì

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–æ–ª—å—à–µ –Ω–µ –∏—Å—á–µ–∑–∞—é—Ç –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫. –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å:

- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –î–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –æ—á–∏—Å—Ç–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –æ–¥–Ω–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞ –∏—Ö –ø–æ—Ç–µ—Ä—è—Ç—å! üñºÔ∏è‚ú®
