(()=>{"use strict";var e={146:(e,t,n)=>{var r=n(363),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?i:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=i;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var o=p(n);o&&o!==h&&e(t,o,r)}var i=u(n);d&&(i=i.concat(d(n)));for(var s=l(t),g=l(n),m=0;m<i.length;++m){var y=i[m];if(!(a[y]||r&&r[y]||g&&g[y]||s&&s[y])){var b=f(n,y);try{c(t,y,b)}catch(e){}}}}return t}},551:(e,t,n)=>{
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540),o=n(982);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function g(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),j=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function B(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var z,N=Object.assign;function L(e){if(void 0===z)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var M=!1;function D(e,t){if(!e||M)return"";M=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(1!==i||1!==s)do{if(i--,0>--s||o[i]!==a[s]){var l="\n"+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{M=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function $(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=D(e.type,!1);case 11:return e=D(e.type.render,!1);case 1:return e=D(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case O:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return U(e(t))}catch(e){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Y(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ee=null;function Ce(e){if(e=xo(e)){if("function"!=typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=So(t),Se(e.stateNode,e.type,t))}}function _e(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function je(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ae(e,t){return e(t)}function Ie(){}var Oe=!1;function Pe(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Ae(e,t,n)}finally{Oe=!1,(null!==ke||null!==Ee)&&(Ie(),je())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var r=So(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Fe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Fe=!1}function Be(e,t,n,r,o,a,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var ze=!1,Ne=null,Le=!1,Me=null,De={onError:function(e){ze=!0,Ne=e}};function $e(e,t,n,r,o,a,i,s,l){ze=!1,Ne=null,Be.apply(De,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return He(o),e;if(i===r)return He(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,Ge=o.unstable_cancelCallback,Qe=o.unstable_shouldYield,Je=o.unstable_requestPaint,Xe=o.unstable_now,Ye=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~o;0!==s?r=dt(s):0!==(a&=i)&&(r=dt(a))}else 0!==(i=n&~o)?r=dt(i):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&!(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-it(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var vt=0;function xt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wt,St,kt,Et,Ct,_t=!1,jt=[],At=null,It=null,Ot=null,Pt=new Map,Tt=new Map,Ft=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function zt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=xo(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Nt(e){var t=vo(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Ct(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xo(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Mt(e,t,n){Lt(e)&&n.delete(t)}function Dt(){_t=!1,null!==At&&Lt(At)&&(At=null),null!==It&&Lt(It)&&(It=null),null!==Ot&&Lt(Ot)&&(Ot=null),Pt.forEach(Mt),Tt.forEach(Mt)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Dt)))}function Ut(e){function t(t){return $t(t,e)}if(0<jt.length){$t(jt[0],e);for(var n=1;n<jt.length;n++){var r=jt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&$t(At,e),null!==It&&$t(It,e),null!==Ot&&$t(Ot,e),Pt.forEach(t),Tt.forEach(t),n=0;n<Ft.length;n++)(r=Ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ft.length&&null===(n=Ft[0]).blockedOn;)Nt(n),null===n.blockedOn&&Ft.shift()}var Wt=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var o=vt,a=Wt.transition;Wt.transition=null;try{vt=1,Kt(e,t,n,r)}finally{vt=o,Wt.transition=a}}function Vt(e,t,n,r){var o=vt,a=Wt.transition;Wt.transition=null;try{vt=4,Kt(e,t,n,r)}finally{vt=o,Wt.transition=a}}function Kt(e,t,n,r){if(Ht){var o=Qt(e,t,n,r);if(null===o)Hr(e,t,r,Gt,n),Bt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return At=zt(At,e,t,n,r,o),!0;case"dragenter":return It=zt(It,e,t,n,r,o),!0;case"mouseover":return Ot=zt(Ot,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Pt.set(a,zt(Pt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Tt.set(a,zt(Tt.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Bt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==o;){var a=xo(o);if(null!==a&&wt(a),null===(a=Qt(e,t,n,r))&&Hr(e,t,r,Gt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vo(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,o="value"in Xt?Xt.value:Xt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=N({},cn,{view:0,detail:0}),fn=on(dn),pn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=on(pn),gn=on(N({},pn,{dataTransfer:0})),mn=on(N({},dn,{relatedTarget:0})),yn=on(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=N({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=on(bn),xn=on(N({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return En}var _n=N({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jn=on(_n),An=on(N({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=on(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=N({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=on(Pn),Fn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Bn=null;u&&"documentMode"in document&&(Bn=document.documentMode);var zn=u&&"TextEvent"in window&&!Bn,Nn=u&&(!Rn||Bn&&8<Bn&&11>=Bn),Ln=String.fromCharCode(32),Mn=!1;function Dn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){_e(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Kn=null;function Gn(e){Lr(e,0)}function Qn(e){if(K(wo(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Yn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Yn=Zn}else Yn=!1;Xn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Kn=Vn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];qn(t,Kn,e,we(e)),Pe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function ar(e,t){if("click"===e)return Qn(t)}function ir(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=ur(n,a);var i=ur(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,br=null,vr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Vr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Er={};function Cr(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return kr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var _r=Cr("animationend"),jr=Cr("animationiteration"),Ar=Cr("animationstart"),Ir=Cr("transitionend"),Or=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Or.set(e,t),l(t,[e])}for(var Fr=0;Fr<Pr.length;Fr++){var Rr=Pr[Fr];Tr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Tr(_r,"onAnimationEnd"),Tr(jr,"onAnimationIteration"),Tr(Ar,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function Nr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,l,c){if($e.apply(this,arguments),ze){if(!ze)throw Error(a(198));var u=Ne;ze=!1,Ne=null,Le||(Le=!0,Me=u)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&o.isPropagationStopped())break e;Nr(o,s,c),a=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==a&&o.isPropagationStopped())break e;Nr(o,s,c),a=l}}}if(Le)throw e=Me,Le=!1,Me=null,e}function Mr(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Dr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[$r]){e[$r]=!0,i.forEach((function(t){"selectionchange"!==t&&(zr.has(t)||Dr(t,!1,e),Dr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Dr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Jt(t)){case 1:var o=qt;break;case 4:o=Vt;break;default:o=Kt}n=o.bind(null,t,n,e),o=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;i=i.return}for(;null!==s;){if(null===(i=vo(s)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,o=we(n),i=[];e:{var s=Or.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=jn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case _r:case jr:case Ar:l=yn;break;case Ir:l=On;break;case"scroll":l=fn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=!!(4&t),d=!u&&"scroll"===e,f=u?null!==s?s+"Capture":null:s;u=[];for(var p,h=r;null!==h;){var g=(p=h).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==f&&(null!=(g=Te(h,f))&&u.push(qr(h,g,p)))),d)break;h=h.return}0<u.length&&(s=new l(s,c,null,n,o),i.push({event:s,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vo(c)&&!c[go])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vo(c):null)&&(c!==(d=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=hn,g="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,g="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==l?s:wo(l),p=null==c?s:wo(c),(s=new u(g,h+"leave",l,n,o)).target=d,s.relatedTarget=p,g=null,vo(o)===r&&((u=new u(f,h+"enter",c,n,o)).target=p,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(f=c,h=0,p=u=l;p;p=Kr(p))h++;for(p=0,g=f;g;g=Kr(g))p++;for(;0<h-p;)u=Kr(u),h--;for(;0<p-h;)f=Kr(f),p--;for(;h--;){if(u===f||null!==f&&u===f.alternate)break e;u=Kr(u),f=Kr(f)}u=null}else u=null;null!==l&&Gr(i,s,l,u,!1),null!==c&&null!==d&&Gr(i,d,c,u,!0)}if("select"===(l=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Jn;else if(Hn(s))if(Xn)m=ir;else{m=or;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?qn(i,m,n,o):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?wo(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,br=null);break;case"focusout":br=yr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,xr(i,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(i,n,o)}var b;if(Rn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Un?Dn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Nn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==v?"onCompositionEnd"===v&&Un&&(b=en()):(Yt="value"in(Xt=o)?Xt.value:Xt.textContent,Un=!0)),0<(y=Vr(r,v)).length&&(v=new xn(v,e,null,n,o),i.push({event:v,listeners:y}),b?v.data=b:null!==(b=$n(n))&&(v.data=b))),(b=zn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Mn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Mn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Rn&&Dn(e,t)?(e=en(),Zt=Yt=Xt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(o=new xn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=b))}Lr(i,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Te(e,n))&&r.unshift(qr(e,a,o)),null!=(a=Te(e,t))&&r.push(qr(e,a,o))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Te(n,a))&&i.unshift(qr(n,l,s)):o||null!=(l=Te(n,a))&&i.push(qr(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function Yr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"==typeof setTimeout?setTimeout:void 0,oo="function"==typeof clearTimeout?clearTimeout:void 0,ao="function"==typeof Promise?Promise:void 0,io="function"==typeof queueMicrotask?queueMicrotask:void 0!==ao?function(e){return ao.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Ut(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),po="__reactFiber$"+fo,ho="__reactProps$"+fo,go="__reactContainer$"+fo,mo="__reactEvents$"+fo,yo="__reactListeners$"+fo,bo="__reactHandles$"+fo;function vo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[po])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function xo(e){return!(e=e[po]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function So(e){return e[ho]||null}var ko=[],Eo=-1;function Co(e){return{current:e}}function _o(e){0>Eo||(e.current=ko[Eo],ko[Eo]=null,Eo--)}function jo(e,t){Eo++,ko[Eo]=e.current,e.current=t}var Ao={},Io=Co(Ao),Oo=Co(!1),Po=Ao;function To(e,t){var n=e.type.contextTypes;if(!n)return Ao;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Fo(e){return null!=(e=e.childContextTypes)}function Ro(){_o(Oo),_o(Io)}function Bo(e,t,n){if(Io.current!==Ao)throw Error(a(168));jo(Io,t),jo(Oo,n)}function zo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,W(e)||"Unknown",o));return N({},n,r)}function No(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ao,Po=Io.current,jo(Io,e),jo(Oo,Oo.current),!0}function Lo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=zo(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,_o(Oo),_o(Io),jo(Io,e)):_o(Oo),jo(Oo,n)}var Mo=null,Do=!1,$o=!1;function Uo(e){null===Mo?Mo=[e]:Mo.push(e)}function Wo(){if(!$o&&null!==Mo){$o=!0;var e=0,t=vt;try{var n=Mo;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mo=null,Do=!1}catch(t){throw null!==Mo&&(Mo=Mo.slice(e+1)),Ke(Ze,Wo),t}finally{vt=t,$o=!1}}return null}var Ho=[],qo=0,Vo=null,Ko=0,Go=[],Qo=0,Jo=null,Xo=1,Yo="";function Zo(e,t){Ho[qo++]=Ko,Ho[qo++]=Vo,Vo=e,Ko=t}function ea(e,t,n){Go[Qo++]=Xo,Go[Qo++]=Yo,Go[Qo++]=Jo,Jo=e;var r=Xo;e=Yo;var o=32-it(r)-1;r&=~(1<<o),n+=1;var a=32-it(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Xo=1<<32-it(t)+o|n<<o|r,Yo=a+e}else Xo=1<<a|n<<o|r,Yo=e}function ta(e){null!==e.return&&(Zo(e,1),ea(e,1,0))}function na(e){for(;e===Vo;)Vo=Ho[--qo],Ho[qo]=null,Ko=Ho[--qo],Ho[qo]=null;for(;e===Jo;)Jo=Go[--Qo],Go[Qo]=null,Yo=Go[--Qo],Go[Qo]=null,Xo=Go[--Qo],Go[Qo]=null}var ra=null,oa=null,aa=!1,ia=null;function sa(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Jo?{id:Xo,overflow:Yo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function ca(e){return!(!(1&e.mode)||128&e.flags)}function ua(e){if(aa){var t=oa;if(t){var n=t;if(!la(e,t)){if(ca(e))throw Error(a(418));t=co(n.nextSibling);var r=ra;t&&la(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function fa(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(ca(e))throw pa(),Error(a(418));for(;t;)sa(e,t),t=co(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?co(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=oa;e;)e=co(e.nextSibling)}function ha(){oa=ra=null,aa=!1}function ga(e){null===ia?ia=[e]:ia.push(e)}var ma=x.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ba=Co(null),va=null,xa=null,wa=null;function Sa(){wa=xa=va=null}function ka(e){var t=ba.current;_o(ba),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ca(e,t){va=e,wa=xa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(xs=!0),e.firstContext=null)}function _a(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===xa){if(null===va)throw Error(a(308));xa=e,va.dependencies={lanes:0,firstContext:e}}else xa=xa.next=e;return t}var ja=null;function Aa(e){null===ja?ja=[e]:ja.push(e)}function Ia(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Aa(t)):(n.next=o.next,o.next=n),t.interleaved=n,Oa(e,r)}function Oa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Ta(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Il){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Oa(e,n)}return null===(o=r.interleaved)?(t.next=t,Aa(r)):(t.next=o.next,o.next=t),r.interleaved=t,Oa(e,n)}function za(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Na(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function La(e,t,n,r){var o=e.updateQueue;Pa=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=o.baseState;for(i=0,u=c=l=null,s=a;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,g=s;switch(f=t,p=n,g.tag){case 1:if("function"==typeof(h=g.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(f="function"==typeof(h=g.payload)?h.call(p,d,f):h))break e;d=N({},d,f);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,i|=f;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(f=s).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);Nl|=i,e.lanes=i,e.memoizedState=d}}function Ma(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(a(191,o));o.call(r)}}}var Da=(new r.Component).refs;function $a(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),a=Ra(r,o);a.payload=t,null!=n&&(a.callback=n),null!==(t=Ba(e,a,o))&&(rc(t,e,o,r),za(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),a=Ra(r,o);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=Ba(e,a,o))&&(rc(t,e,o,r),za(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),o=Ra(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=Ba(e,o,r))&&(rc(t,e,r,n),za(t,e,r))}};function Wa(e,t,n,r,o,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,a))}function Ha(e,t,n){var r=!1,o=Ao,a=t.contextType;return"object"==typeof a&&null!==a?a=_a(a):(o=Fo(t)?Po:Io.current,a=(r=null!=(r=t.contextTypes))?To(e,o):Ao),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function qa(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Va(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Da,Ta(e);var a=t.contextType;"object"==typeof a&&null!==a?o.context=_a(a):(a=Fo(t)?Po:Io.current,o.context=To(e,a)),o.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&($a(e,t,a,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Ua.enqueueReplaceState(o,o.state,null),La(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;t===Da&&(t=o.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ja(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===T&&Qa(a)===t.type)?((r=o(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Bc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=zc(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Bc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case S:return(t=Mc(t,e.mode,n)).return=e,t;case T:return f(e,(0,t._init)(t._payload),n)}if(te(t)||B(t))return(t=zc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case S:return n.key===o?u(e,t,n,r):null;case T:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||B(n))return null!==o?null:d(e,t,n,r,null);Ga(e,n)}return null}function h(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case T:return h(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||B(r))return d(t,e=e.get(n)||null,r,o,null);Ga(t,r)}return null}function g(o,a,s,l){for(var c=null,u=null,d=a,g=a=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=p(o,d,s[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(o,d),a=i(y,a,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===s.length)return n(o,d),aa&&Zo(o,g),c;if(null===d){for(;g<s.length;g++)null!==(d=f(o,s[g],l))&&(a=i(d,a,g),null===u?c=d:u.sibling=d,u=d);return aa&&Zo(o,g),c}for(d=r(o,d);g<s.length;g++)null!==(m=h(d,o,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=i(m,a,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(o,e)})),aa&&Zo(o,g),c}function m(o,s,l,c){var u=B(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,g=s,m=s=0,y=null,b=l.next();null!==g&&!b.done;m++,b=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var v=p(o,g,b.value,c);if(null===v){null===g&&(g=y);break}e&&g&&null===v.alternate&&t(o,g),s=i(v,s,m),null===d?u=v:d.sibling=v,d=v,g=y}if(b.done)return n(o,g),aa&&Zo(o,m),u;if(null===g){for(;!b.done;m++,b=l.next())null!==(b=f(o,b.value,c))&&(s=i(b,s,m),null===d?u=b:d.sibling=b,d=b);return aa&&Zo(o,m),u}for(g=r(o,g);!b.done;m++,b=l.next())null!==(b=h(g,o,m,b.value,c))&&(e&&null!==b.alternate&&g.delete(null===b.key?m:b.key),s=i(b,s,m),null===d?u=b:d.sibling=b,d=b);return e&&g.forEach((function(e){return t(o,e)})),aa&&Zo(o,m),u}return function e(r,a,i,l){if("object"==typeof i&&null!==i&&i.type===k&&null===i.key&&(i=i.props.children),"object"==typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=a;null!==u;){if(u.key===c){if((c=i.type)===k){if(7===u.tag){n(r,u.sibling),(a=o(u,i.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===T&&Qa(c)===u.type){n(r,u.sibling),(a=o(u,i.props)).ref=Ka(r,u,i),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===k?((a=zc(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Bc(i.type,i.key,i.props,null,r.mode,l)).ref=Ka(r,a,i),l.return=r,r=l)}return s(r);case S:e:{for(u=i.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Mc(i,r.mode,l)).return=r,r=a}return s(r);case T:return e(r,a,(u=i._init)(i._payload),l)}if(te(i))return g(r,a,i,l);if(B(i))return m(r,a,i,l);Ga(r,i)}return"string"==typeof i&&""!==i||"number"==typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Lc(i,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var Xa=Ja(!0),Ya=Ja(!1),Za={},ei=Co(Za),ti=Co(Za),ni=Co(Za);function ri(e){if(e===Za)throw Error(a(174));return e}function oi(e,t){switch(jo(ni,t),jo(ti,e),jo(ei,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_o(ei),jo(ei,t)}function ai(){_o(ei),_o(ti),_o(ni)}function ii(e){ri(ni.current);var t=ri(ei.current),n=le(t,e.type);t!==n&&(jo(ti,e),jo(ei,n))}function si(e){ti.current===e&&(_o(ei),_o(ti))}var li=Co(0);function ci(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ui=[];function di(){for(var e=0;e<ui.length;e++)ui[e]._workInProgressVersionPrimary=null;ui.length=0}var fi=x.ReactCurrentDispatcher,pi=x.ReactCurrentBatchConfig,hi=0,gi=null,mi=null,yi=null,bi=!1,vi=!1,xi=0,wi=0;function Si(){throw Error(a(321))}function ki(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Ei(e,t,n,r,o,i){if(hi=i,gi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fi.current=null===e||null===e.memoizedState?ss:ls,e=n(r,o),vi){i=0;do{if(vi=!1,xi=0,25<=i)throw Error(a(301));i+=1,yi=mi=null,t.updateQueue=null,fi.current=cs,e=n(r,o)}while(vi)}if(fi.current=is,t=null!==mi&&null!==mi.next,hi=0,yi=mi=gi=null,bi=!1,t)throw Error(a(300));return e}function Ci(){var e=0!==xi;return xi=0,e}function _i(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yi?gi.memoizedState=yi=e:yi=yi.next=e,yi}function ji(){if(null===mi){var e=gi.alternate;e=null!==e?e.memoizedState:null}else e=mi.next;var t=null===yi?gi.memoizedState:yi.next;if(null!==t)yi=t,mi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mi=e).memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},null===yi?gi.memoizedState=yi=e:yi=yi.next=e}return yi}function Ai(e,t){return"function"==typeof t?t(e):t}function Ii(e){var t=ji(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mi,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((hi&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,s=r):c=c.next=f,gi.lanes|=d,Nl|=d}u=u.next}while(null!==u&&u!==i);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,gi.lanes|=i,Nl|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oi(e){var t=ji(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);sr(i,t.memoizedState)||(xs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Pi(){}function Ti(e,t){var n=gi,r=ji(),o=t(),i=!sr(r.memoizedState,o);if(i&&(r.memoizedState=o,xs=!0),r=r.queue,Hi(Bi.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==yi&&1&yi.memoizedState.tag){if(n.flags|=2048,Mi(9,Ri.bind(null,n,r,o,t),void 0,null),null===Ol)throw Error(a(349));30&hi||Fi(n,t,o)}return o}function Fi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=gi.updateQueue)?(t={lastEffect:null,stores:null},gi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ri(e,t,n,r){t.value=n,t.getSnapshot=r,zi(t)&&Ni(e)}function Bi(e,t,n){return n((function(){zi(t)&&Ni(e)}))}function zi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Ni(e){var t=Oa(e,1);null!==t&&rc(t,e,1,-1)}function Li(e){var t=_i();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,gi,e),[t.memoizedState,e]}function Mi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=gi.updateQueue)?(t={lastEffect:null,stores:null},gi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Di(){return ji().memoizedState}function $i(e,t,n,r){var o=_i();gi.flags|=e,o.memoizedState=Mi(1|t,n,void 0,void 0===r?null:r)}function Ui(e,t,n,r){var o=ji();r=void 0===r?null:r;var a=void 0;if(null!==mi){var i=mi.memoizedState;if(a=i.destroy,null!==r&&ki(r,i.deps))return void(o.memoizedState=Mi(t,n,a,r))}gi.flags|=e,o.memoizedState=Mi(1|t,n,a,r)}function Wi(e,t){return $i(8390656,8,e,t)}function Hi(e,t){return Ui(2048,8,e,t)}function qi(e,t){return Ui(4,2,e,t)}function Vi(e,t){return Ui(4,4,e,t)}function Ki(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Gi(e,t,n){return n=null!=n?n.concat([e]):null,Ui(4,4,Ki.bind(null,t,e),n)}function Qi(){}function Ji(e,t){var n=ji();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ki(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xi(e,t){var n=ji();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ki(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yi(e,t,n){return 21&hi?(sr(n,t)||(n=gt(),gi.lanes|=n,Nl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n)}function Zi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=pi.transition;pi.transition={};try{e(!1),t()}finally{vt=n,pi.transition=r}}function es(){return ji().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))os(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))os(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,i)){var l=t.interleaved;return null===l?(o.next=o,Aa(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(e){}null!==(n=Ia(e,t,o,r))&&(rc(n,e,r,o=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===gi||null!==t&&t===gi}function os(e,t){vi=bi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var is={readContext:_a,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},ss={readContext:_a,useCallback:function(e,t){return _i().memoizedState=[e,void 0===t?null:t],e},useContext:_a,useEffect:Wi,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,$i(4194308,4,Ki.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $i(4194308,4,e,t)},useInsertionEffect:function(e,t){return $i(4,2,e,t)},useMemo:function(e,t){var n=_i();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_i();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,gi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_i().memoizedState=e},useState:Li,useDebugValue:Qi,useDeferredValue:function(e){return _i().memoizedState=e},useTransition:function(){var e=Li(!1),t=e[0];return e=Zi.bind(null,e[1]),_i().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gi,o=_i();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ol)throw Error(a(349));30&hi||Fi(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Wi(Bi.bind(null,r,i,e),[e]),r.flags|=2048,Mi(9,Ri.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=_i(),t=Ol.identifierPrefix;if(aa){var n=Yo;t=":"+t+"R"+(n=(Xo&~(1<<32-it(Xo)-1)).toString(32)+n),0<(n=xi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:_a,useCallback:Ji,useContext:_a,useEffect:Hi,useImperativeHandle:Gi,useInsertionEffect:qi,useLayoutEffect:Vi,useMemo:Xi,useReducer:Ii,useRef:Di,useState:function(){return Ii(Ai)},useDebugValue:Qi,useDeferredValue:function(e){return Yi(ji(),mi.memoizedState,e)},useTransition:function(){return[Ii(Ai)[0],ji().memoizedState]},useMutableSource:Pi,useSyncExternalStore:Ti,useId:es,unstable_isNewReconciler:!1},cs={readContext:_a,useCallback:Ji,useContext:_a,useEffect:Hi,useImperativeHandle:Gi,useInsertionEffect:qi,useLayoutEffect:Vi,useMemo:Xi,useReducer:Oi,useRef:Di,useState:function(){return Oi(Ai)},useDebugValue:Qi,useDeferredValue:function(e){var t=ji();return null===mi?t.memoizedState=e:Yi(t,mi.memoizedState,e)},useTransition:function(){return[Oi(Ai)[0],ji().memoizedState]},useMutableSource:Pi,useSyncExternalStore:Ti,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ps="function"==typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Vl=r),fs(0,t)},n}function gs(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!=typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,n,r,o){return 1&e.mode?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Ba(n,t,1))),n.lanes|=1),e)}var vs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Xa(t,e.child,n,r)}function Ss(e,t,n,r,o){n=n.render;var a=t.ref;return Ca(t,o),r=Ei(e,t,n,r,a,o),n=Ci(),null===e||xs?(aa&&n&&ta(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qs(e,t,o))}function ks(e,t,n,r,o){if(null===e){var a=n.type;return"function"!=typeof a||Fc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,o))}if(a=e.child,!(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return qs(e,t,o)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=a,!(e.lanes&o))return t.lanes=e.lanes,qs(e,t,o);131072&e.flags&&(xs=!0)}}return js(e,t,n,r,o)}function Cs(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jo(Rl,Fl),Fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,jo(Rl,Fl),Fl|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jo(Rl,Fl),Fl|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,jo(Rl,Fl),Fl|=r;return ws(e,t,o,n),t.child}function _s(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function js(e,t,n,r,o){var a=Fo(n)?Po:Io.current;return a=To(t,a),Ca(t,o),n=Ei(e,t,n,r,a,o),r=Ci(),null===e||xs?(aa&&r&&ta(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qs(e,t,o))}function As(e,t,n,r,o){if(Fo(n)){var a=!0;No(t)}else a=!1;if(Ca(t,o),null===t.stateNode)Hs(e,t),Ha(t,n,r),Va(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=_a(c):c=To(t,c=Fo(n)?Po:Io.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||l!==c)&&qa(t,i,r,c),Pa=!1;var f=t.memoizedState;i.state=f,La(t,r,i,o),l=t.memoizedState,s!==r||f!==l||Oo.current||Pa?("function"==typeof u&&($a(t,n,u,r),l=t.memoizedState),(s=Pa||Wa(t,n,s,r,f,l,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=s):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Fa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ya(t.type,s),i.props=c,d=t.pendingProps,f=i.context,"object"==typeof(l=n.contextType)&&null!==l?l=_a(l):l=To(t,l=Fo(n)?Po:Io.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==d||f!==l)&&qa(t,i,r,l),Pa=!1,f=t.memoizedState,i.state=f,La(t,r,i,o);var h=t.memoizedState;s!==d||f!==h||Oo.current||Pa?("function"==typeof p&&($a(t,n,p,r),h=t.memoizedState),(c=Pa||Wa(t,n,c,r,f,h,l)||!1)?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=l,r=c):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,a,o)}function Is(e,t,n,r,o,a){_s(e,t);var i=!!(128&t.flags);if(!r&&!i)return o&&Lo(t,n,!1),qs(e,t,a);r=t.stateNode,vs.current=t;var s=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,o&&Lo(t,n,!0),t.child}function Os(e){var t=e.stateNode;t.pendingContext?Bo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Bo(0,t.context,!1),oi(e,t.containerInfo)}function Ps(e,t,n,r,o){return ha(),ga(o),t.flags|=256,ws(e,t,n,r),t.child}var Ts,Fs,Rs,Bs,zs={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,o=t.pendingProps,i=li.current,s=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),jo(li,1&i),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},1&o||null===s?s=Nc(l,o,0,null):(s.childLanes=0,s.pendingProps=l),e=zc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ns(n),t.memoizedState=zs,e):Ms(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,s){if(n)return 256&t.flags?(t.flags&=-257,Ds(e,t,s,r=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Nc({mode:"visible",children:r.children},o,0,null),(i=zc(i,o,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,1&t.mode&&Xa(t,e.child,null,s),t.child.memoizedState=Ns(s),t.memoizedState=zs,i);if(!(1&t.mode))return Ds(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Ds(e,t,s,r=ds(i=Error(a(419)),r,void 0))}if(l=!!(s&e.childLanes),xs||l){if(null!==(r=Ol)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=o&(r.suspendedLanes|s)?0:o)&&o!==i.retryLane&&(i.retryLane=o,Oa(e,o),rc(r,e,o,-1))}return mc(),Ds(e,t,s,r=ds(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oa=co(o.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(Go[Qo++]=Xo,Go[Qo++]=Yo,Go[Qo++]=Jo,Xo=e.id,Yo=e.overflow,Jo=t),t=Ms(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,i,n);if(s){s=o.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:o.children};return 1&l||t.child===i?(o=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags:((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null),null!==r?s=Rc(r,s):(s=zc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Ns(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=zs,o}return e=(s=e.child).sibling,o=Rc(s,{mode:"visible",children:o.children}),!(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Ms(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ds(e,t,n,r){return null!==r&&ga(r),Xa(t,e.child,null,n),(e=Ms(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $s(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Us(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Ws(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),2&(r=li.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$s(e,n,t);else if(19===e.tag)$s(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(jo(li,r),1&t.mode)switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ci(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Us(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ci(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Us(t,!0,n,null,a);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Hs(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,!(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Fo(t.type)&&Ro(),Ks(t),null;case 3:return r=t.stateNode,ai(),_o(Oo),_o(Io),di(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ia&&(sc(ia),ia=null))),Fs(e,t),Ks(t),null;case 5:si(t);var o=ri(ni.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=ri(ei.current),fa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[po]=t,r[ho]=i,e=!!(1&t.mode),n){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(o=0;o<Br.length;o++)Mr(Br[o],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":J(r,i),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Mr("invalid",r);break;case"textarea":oe(r,i),Mr("invalid",r)}for(var l in be(n,i),o=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Yr(r.textContent,c,e),o=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Yr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Mr("scroll",r)}switch(n){case"input":V(r),Z(r,i,!0);break;case"textarea":V(r),ie(r);break;case"select":case"option":break;default:"function"==typeof i.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[po]=t,e[ho]=r,Ts(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Mr("cancel",e),Mr("close",e),o=r;break;case"iframe":case"object":case"embed":Mr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Br.length;o++)Mr(Br[o],e);o=r;break;case"source":Mr("error",e),o=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),o=r;break;case"details":Mr("toggle",e),o=r;break;case"input":J(e,r),o=Q(e,r),Mr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=N({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Mr("invalid",e)}for(i in be(n,o),c=o)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?me(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"==typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Mr("scroll",e):null!=u&&v(e,i,u,l))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Bs(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=ri(ni.current),ri(ei.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(i=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Yr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,!!(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Ks(t),null;case 13:if(_o(li),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&1&t.mode&&!(128&t.flags))pa(),ha(),t.flags|=98560,i=!1;else if(i=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[po]=t}else ha(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),i=!1}else null!==ia&&(sc(ia),ia=null),i=!0;if(!i)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&li.current?0===Bl&&(Bl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return ai(),Fs(e,t),null===e&&Ur(t.stateNode.containerInfo),Ks(t),null;case 10:return ka(t.type._context),Ks(t),null;case 19:if(_o(li),null===(i=t.memoizedState))return Ks(t),null;if(r=!!(128&t.flags),null===(l=i.rendering))if(r)Vs(i,!1);else{if(0!==Bl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ci(e))){for(t.flags|=128,Vs(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return jo(li,1&li.current|2),t.child}e=e.sibling}null!==i.tail&&Xe()>Wl&&(t.flags|=128,r=!0,Vs(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ci(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!aa)return Ks(t),null}else 2*Xe()-i.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Vs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=li.current,jo(li,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Fl)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(na(t),t.tag){case 1:return Fo(t.type)&&Ro(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ai(),_o(Oo),_o(Io),di(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return si(t),null;case 13:if(_o(li),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _o(li),null;case 4:return ai(),null;case 10:return ka(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fs=function(){},Rs=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ri(ei.current);var a,i=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),i=[];break;case"select":o=N({},o,{value:void 0}),r=N({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in be(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Mr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Bs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,Xs=!1,Ys="function"==typeof WeakSet?WeakSet:Set,Zs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Cc(e,t,n)}else n.current=null}function tl(e,t,n){try{n()}catch(n){Cc(e,t,n)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&tl(t,n,a)}o=o.next}while(o!==r)}}function ol(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[ho],delete t[mo],delete t[yo],delete t[bo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,fl=!1;function pl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(e){}switch(n.tag){case 5:Xs||el(n,t);case 6:var r=dl,o=fl;dl=null,pl(e,t,n),fl=o,null!==(dl=r)&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Ut(e)):lo(dl,n.stateNode));break;case 4:r=dl,o=fl,dl=n.stateNode.containerInfo,fl=!0,pl(e,t,n),dl=r,fl=o;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(2&a||4&a)&&tl(n,t,i),o=o.next}while(o!==r)}pl(e,t,n);break;case 1:if(!Xs&&(el(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Cc(n,t,e)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,pl(e,t,n),Xs=r):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,fl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===dl)throw Error(a(160));hl(i,s,o),dl=null,fl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(e){Cc(o,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),bl(e),4&r){try{rl(3,e,e.return),ol(3,e)}catch(t){Cc(e,e.return,t)}try{rl(5,e,e.return)}catch(t){Cc(e,e.return,t)}}break;case 1:ml(t,e),bl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),bl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(t){Cc(e,e.return,t)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&X(o,i),ve(l,s);var u=ve(l,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?me(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):v(o,d,f,u)}switch(l){case"input":Y(o,i);break;case"textarea":ae(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?ne(o,!!i.multiple,h,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[ho]=i}catch(t){Cc(e,e.return,t)}}break;case 6:if(ml(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(t){Cc(e,e.return,t)}}break;case 3:if(ml(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(t){Cc(e,e.return,t)}break;case 4:default:ml(t,e),bl(e);break;case 13:ml(t,e),bl(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(Ul=Xe())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(u=Xs)||d,ml(t,e),Xs=u):ml(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Zs=e,d=e.child;null!==d;){for(f=Zs=d;null!==Zs;){switch(h=(p=Zs).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var g=p.stateNode;if("function"==typeof g.componentWillUnmount){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(e){Cc(r,n,e)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Sl(f);continue}}null!==h?(h.return=p,Zs=h):Sl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,u?"function"==typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=f.stateNode,s=null!=(c=f.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(t){Cc(e,e.return,t)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(t){Cc(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ml(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(fe(o,""),r.flags&=-33),ul(e,ll(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;cl(e,ll(e),i);break;default:throw Error(a(161))}}catch(t){Cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Zs=e,xl(e,t,n)}function xl(e,t,n){for(var r=!!(1&e.mode);null!==Zs;){var o=Zs,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||Js;if(!i){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Xs;s=Js;var c=Xs;if(Js=i,(Xs=l)&&!c)for(Zs=o;null!==Zs;)l=(i=Zs).child,22===i.tag&&null!==i.memoizedState?kl(o):null!==l?(l.return=i,Zs=l):kl(o);for(;null!==a;)Zs=a,xl(a,t,n),a=a.sibling;Zs=o,Js=s,Xs=c}wl(e)}else 8772&o.subtreeFlags&&null!==a?(a.return=o,Zs=a):wl(e)}}function wl(e){for(;null!==Zs;){var t=Zs;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Xs||ol(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ma(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ma(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Ut(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&al(t)}catch(e){Cc(t,t.return,e)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function Sl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function kl(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ol(4,t)}catch(e){Cc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(e){Cc(t,o,e)}}var a=t.return;try{al(t)}catch(e){Cc(t,a,e)}break;case 5:var i=t.return;try{al(t)}catch(e){Cc(t,i,e)}}}catch(e){Cc(t,t.return,e)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var El,Cl=Math.ceil,_l=x.ReactCurrentDispatcher,jl=x.ReactCurrentOwner,Al=x.ReactCurrentBatchConfig,Il=0,Ol=null,Pl=null,Tl=0,Fl=0,Rl=Co(0),Bl=0,zl=null,Nl=0,Ll=0,Ml=0,Dl=null,$l=null,Ul=0,Wl=1/0,Hl=null,ql=!1,Vl=null,Kl=null,Gl=!1,Ql=null,Jl=0,Xl=0,Yl=null,Zl=-1,ec=0;function tc(){return 6&Il?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 1&e.mode?2&Il&&0!==Tl?Tl&-Tl:null!==ma.transition?(0===ec&&(ec=gt()),ec):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Jt(e.type):1}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Yl=null,Error(a(185));yt(e,n,r),2&Il&&e===Ol||(e===Ol&&(!(2&Il)&&(Ll|=n),4===Bl&&lc(e,Tl)),oc(e,r),1===n&&0===Il&&!(1&t.mode)&&(Wl=Xe()+500,Do&&Wo()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),s=1<<i,l=o[i];-1===l?s&n&&!(s&r)||(o[i]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Ol?Tl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Do=!0,Uo(e)}(cc.bind(null,e)):Uo(cc.bind(null,e)),io((function(){!(6&Il)&&Wo()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Oc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zl=-1,ec=0,6&Il)throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ft(e,e===Ol?Tl:0);if(0===r)return null;if(30&r||r&e.expiredLanes||t)t=yc(e,r);else{t=r;var o=Il;Il|=2;var i=gc();for(Ol===e&&Tl===t||(Hl=null,Wl=Xe()+500,pc(e,t));;)try{vc();break}catch(t){hc(e,t)}Sa(),_l.current=i,Il=o,null!==Pl?t=0:(Ol=null,Tl=0,t=Bl)}if(0!==t){if(2===t&&(0!==(o=ht(e))&&(r=o,t=ic(e,o))),1===t)throw n=zl,pc(e,0),lc(e,r),oc(e,Xe()),n;if(6===t)lc(e,r);else{if(o=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!sr(a(),o))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)||(t=yc(e,r),2===t&&(i=ht(e),0!==i&&(r=i,t=ic(e,i))),1!==t)))throw n=zl,pc(e,0),lc(e,r),oc(e,Xe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Sc(e,$l,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Ul+500-Xe())){if(0!==ft(e,0))break;if(((o=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Sc.bind(null,e,$l,Hl),t);break}Sc(e,$l,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>o&&(o=s),r&=~i}if(r=o,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ro(Sc.bind(null,e,$l,Hl),r);break}Sc(e,$l,Hl);break;default:throw Error(a(329))}}}return oc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function ic(e,t){var n=Dl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=$l,$l=n,null!==t&&sc(t)),e}function sc(e){null===$l?$l=e:$l.push.apply($l,e)}function lc(e,t){for(t&=~Ml,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(6&Il)throw Error(a(327));kc();var t=ft(e,0);if(!(1&t))return oc(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=zl,pc(e,0),lc(e,t),oc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,$l,Hl),oc(e,Xe()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Wl=Xe()+500,Do&&Wo())}}function dc(e){null!==Ql&&0===Ql.tag&&!(6&Il)&&kc();var t=Il;Il|=1;var n=Al.transition,r=vt;try{if(Al.transition=null,vt=1,e)return e()}finally{vt=r,Al.transition=n,!(6&(Il=t))&&Wo()}}function fc(){Fl=Rl.current,_o(Rl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ro();break;case 3:ai(),_o(Oo),_o(Io),di();break;case 5:si(r);break;case 4:ai();break;case 13:case 19:_o(li);break;case 10:ka(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ol=e,Pl=e=Rc(e.current,null),Tl=Fl=t,Bl=0,zl=null,Ml=Ll=Nl=0,$l=Dl=null,null!==ja){for(t=0;t<ja.length;t++)if(null!==(r=(n=ja[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}ja=null}return e}function hc(e,t){for(;;){var n=Pl;try{if(Sa(),fi.current=is,bi){for(var r=gi.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}bi=!1}if(hi=0,yi=mi=gi=null,vi=!1,xi=0,jl.current=null,null===n||null===n.return){Bl=1,zl=t,Pl=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,f=d.tag;if(!(1&d.mode||0!==f&&11!==f&&15!==f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=ys(s);if(null!==h){h.flags&=-257,bs(h,s,l,0,t),1&h.mode&&ms(i,u,t),c=u;var g=(t=h).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(!(1&t)){ms(i,u,t),mc();break e}c=Error(a(426))}else if(aa&&1&l.mode){var y=ys(s);if(null!==y){!(65536&y.flags)&&(y.flags|=256),bs(y,s,l,0,t),ga(us(c,l));break e}}i=c=us(c,l),4!==Bl&&(Bl=2),null===Dl?Dl=[i]:Dl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Na(i,hs(0,c,t));break e;case 1:l=c;var b=i.type,v=i.stateNode;if(!(128&i.flags||"function"!=typeof b.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Kl&&Kl.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Na(i,gs(i,l,t));break e}}i=i.return}while(null!==i)}wc(n)}catch(e){t=e,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function gc(){var e=_l.current;return _l.current=is,null===e?is:e}function mc(){0!==Bl&&3!==Bl&&2!==Bl||(Bl=4),null===Ol||!(268435455&Nl)&&!(268435455&Ll)||lc(Ol,Tl)}function yc(e,t){var n=Il;Il|=2;var r=gc();for(Ol===e&&Tl===t||(Hl=null,pc(e,t));;)try{bc();break}catch(t){hc(e,t)}if(Sa(),Il=n,_l.current=r,null!==Pl)throw Error(a(261));return Ol=null,Tl=0,Bl}function bc(){for(;null!==Pl;)xc(Pl)}function vc(){for(;null!==Pl&&!Qe();)xc(Pl)}function xc(e){var t=El(e.alternate,e,Fl);e.memoizedProps=e.pendingProps,null===t?wc(e):Pl=t,jl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Bl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Gs(n,t,Fl)))return void(Pl=n);if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Bl&&(Bl=5)}function Sc(e,t,n){var r=vt,o=Al.transition;try{Al.transition=null,vt=1,function(e,t,n,r){do{kc()}while(null!==Ql);if(6&Il)throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-it(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Ol&&(Pl=Ol=null,Tl=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Gl||(Gl=!0,Oc(tt,(function(){return kc(),null}))),i=!!(15990&n.flags),!!(15990&n.subtreeFlags)||i){i=Al.transition,Al.transition=null;var s=vt;vt=1;var l=Il;Il|=4,jl.current=null,function(e,t){if(eo=Ht,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(e){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==o&&3!==f.nodeType||(l=s+o),f!==i||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++u===o&&(l=s),p===i&&++d===r&&(c=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,1028&t.subtreeFlags&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var g=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:ya(t.type,m),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(e){Cc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}g=nl,nl=!1}(e,n),yl(n,e),hr(to),Ht=!!eo,to=eo=null,e.current=n,vl(n,e,o),Je(),Il=l,vt=s,Al.transition=i}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Jl=o),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),oc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ql)throw ql=!1,e=Vl,Vl=null,e;!!(1&Jl)&&0!==e.tag&&kc(),i=e.pendingLanes,1&i?e===Yl?Xl++:(Xl=0,Yl=e):Xl=0,Wo()}(e,t,n,r)}finally{Al.transition=o,vt=r}return null}function kc(){if(null!==Ql){var e=xt(Jl),t=Al.transition,n=vt;try{if(Al.transition=null,vt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Jl=0,6&Il)throw Error(a(331));var o=Il;for(Il|=4,Zs=e.current;null!==Zs;){var i=Zs,s=i.child;if(16&Zs.flags){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:rl(8,d,i)}var f=d.child;if(null!==f)f.return=d,Zs=f;else for(;null!==Zs;){var p=(d=Zs).sibling,h=d.return;if(il(d),d===u){Zs=null;break}if(null!==p){p.return=h,Zs=p;break}Zs=h}}}var g=i.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zs=i}}if(2064&i.subtreeFlags&&null!==s)s.return=i,Zs=s;else e:for(;null!==Zs;){if(2048&(i=Zs).flags)switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Zs=b;break e}Zs=i.return}}var v=e.current;for(Zs=v;null!==Zs;){var x=(s=Zs).child;if(2064&s.subtreeFlags&&null!==x)x.return=s,Zs=x;else e:for(s=v;null!==Zs;){if(2048&(l=Zs).flags)try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(e){Cc(l,l.return,e)}if(l===s){Zs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zs=w;break e}Zs=l.return}}if(Il=o,Wo(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(e){}r=!0}return r}finally{vt=n,Al.transition=t}}return!1}function Ec(e,t,n){e=Ba(e,t=hs(0,t=us(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),oc(e,t))}function Cc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Ba(t,e=gs(t,e=us(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),oc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Tl&n)===n&&(4===Bl||3===Bl&&(130023424&Tl)===Tl&&500>Xe()-Ul?pc(e,0):Ml|=n),oc(e,t)}function jc(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=tc();null!==(e=Oa(e,t))&&(yt(e,t,n),oc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),jc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),jc(e,n)}function Oc(e,t){return Ke(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Pc(e,t,n,r)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bc(e,t,n,r,o,i){var s=2;if(r=e,"function"==typeof e)Fc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case k:return zc(n.children,o,i,t);case E:s=8,o|=8;break;case C:return(e=Tc(12,n,t,2|o)).elementType=C,e.lanes=i,e;case I:return(e=Tc(13,n,t,o)).elementType=I,e.lanes=i,e;case O:return(e=Tc(19,n,t,o)).elementType=O,e.lanes=i,e;case F:return Nc(n,o,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case j:s=9;break e;case A:s=11;break e;case P:s=14;break e;case T:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tc(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function zc(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Nc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=F,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function $c(e,t,n,r,o,a,i,s,l){return e=new Dc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ta(a),e}function Uc(e){if(!e)return Ao;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Fo(n))return zo(e,n,t)}return t}function Wc(e,t,n,r,o,a,i,s,l){return(e=$c(n,r,!0,e,0,a,0,s,l)).context=Uc(null),n=e.current,(a=Ra(r=tc(),o=nc(n))).callback=null!=t?t:null,Ba(n,a,o),e.current.lanes=o,yt(e,o,r),oc(e,r),e}function Hc(e,t,n,r){var o=t.current,a=tc(),i=nc(o);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ba(o,t,i))&&(rc(e,o,i,a),za(e,o,i)),i}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oo.current)xs=!0;else{if(!(e.lanes&n||128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Os(t),ha();break;case 5:ii(t);break;case 1:Fo(t.type)&&No(t);break;case 4:oi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;jo(ba,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(jo(li,1&li.current),t.flags|=128,null):n&t.child.childLanes?Ls(e,t,n):(jo(li,1&li.current),null!==(e=qs(e,t,n))?e.sibling:null);jo(li,1&li.current);break;case 19:if(r=!!(n&t.childLanes),128&e.flags){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),jo(li,li.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return qs(e,t,n)}(e,t,n);xs=!!(131072&e.flags)}else xs=!1,aa&&1048576&t.flags&&ea(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var o=To(t,Io.current);Ca(t,n),o=Ei(null,t,r,e,o,n);var i=Ci();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fo(r)?(i=!0,No(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ta(t),o.updater=Ua,t.stateNode=o,o._reactInternals=t,Va(t,r,e,n),t=Is(null,t,r,!0,i,n)):(t.tag=0,aa&&i&&ta(t),ws(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return Fc(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(r),e=ya(r,e),o){case 0:t=js(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,js(e,t,r,o=t.elementType===r?o:ya(r,o),n);case 1:return r=t.type,o=t.pendingProps,As(e,t,r,o=t.elementType===r?o:ya(r,o),n);case 3:e:{if(Os(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,Fa(e,t),La(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ps(e,t,r,n,o=us(Error(a(423)),t));break e}if(r!==o){t=Ps(e,t,r,n,o=us(Error(a(424)),t));break e}for(oa=co(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===o){t=qs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ii(t),null===e&&ua(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==i&&no(r,i)&&(t.flags|=32),_s(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Ls(e,t,n);case 4:return oi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Ss(e,t,r,o=t.elementType===r?o:ya(r,o),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,jo(ba,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===o.children&&!Oo.current){t=qs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Ra(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ea(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ea(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}ws(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ca(t,n),r=r(o=_a(o)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return o=ya(r=t.type,t.pendingProps),ks(e,t,r,o=ya(r.type,o),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ya(r,o),Hs(e,t),t.tag=1,Fo(r)?(e=!0,No(t)):e=!1,Ca(t,n),Ha(t,r,o),Va(t,r,o,n),Is(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Cs(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"==typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"==typeof o){var s=o;o=function(){var e=qc(i);s.call(e)}}Hc(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"==typeof r){var a=r;r=function(){var e=qc(i);a.call(e)}}var i=Wc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[go]=i.current,Ur(8===e.nodeType?e.parentNode:e),dc(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var s=r;r=function(){var e=qc(l);s.call(e)}}var l=$c(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[go]=l.current,Ur(8===e.nodeType?e.parentNode:e),dc((function(){Hc(t,l,n,r)})),l}(n,t,e,o,r);return qc(i)}Jc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Jc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Hc(null,e,null,null)})),t[go]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ft.length&&0!==t&&t<Ft[n].priority;n++);Ft.splice(n,0,e),0===n&&Nt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),oc(t,Xe()),!(6&Il)&&(Wl=Xe()+500,Wo()))}break;case 13:dc((function(){var t=Oa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},St=function(e){if(13===e.tag){var t=Oa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Oa(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},Et=function(){return vt},Ct=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Se=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=So(r);if(!o)throw Error(a(90));K(r),Y(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uc,Ie=dc;var tu={usingClientEntryPoint:!1,Events:[xo,wo,So,_e,je,uc]},nu={findFiberByHostInstance:vo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ot=ou.inject(ru),at=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",o=Gc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=$c(e,1,!1,null,0,n,0,r,o),e[go]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(a(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",s=Gc;if(null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,o,0,i,s),e[go]=t.current,Ur(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Jc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(a(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[go]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},338:(e,t,n)=>{var r=n(961);t.H=r.createRoot,r.hydrateRoot},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(551)},799:(e,t)=>{
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case a:case s:case i:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case g:case l:return e;default:return t}}case o:return t}}}function S(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=s,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||w(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===i},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===s||e===i||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===f||e.$$typeof===b||e.$$typeof===v||e.$$typeof===x||e.$$typeof===y)},t.typeOf=w},363:(e,t,n)=>{e.exports=n(799)},989:(e,t)=>{var n,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");
/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function y(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case i:case f:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case g:case h:case l:return e;default:return t}}case o:return t}}}n=Symbol.for("react.module.reference")},737:(e,t,n)=>{n(989)},20:(e,t,n)=>{
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},287:(e,t)=>{
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=v.prototype=new b;x.constructor=v,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)S.call(t,o)&&!E.hasOwnProperty(o)&&(a[o]=t[o]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:n,type:e,key:i,ref:s,props:a,_owner:k.current}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+A(l,0):a,w(i)?(o="",null!=e&&(o=e.replace(j,"$&/")+"/"),I(i,t,o,"",(function(e){return e}))):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(j,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var u=a+A(s=e[c],c);l+=I(s,t,o,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,o,u=a+A(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],o=0;return I(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},F={transition:null},R={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:F,ReactCurrentOwner:k};function B(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=i,t.PureComponent=v,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=B,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},t.unstable_act=B,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},540:(e,t,n)=>{e.exports=n(287)},848:(e,t,n)=>{e.exports=n(20)},463:(e,t)=>{
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<o&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,p=3,h=!1,g=!1,m=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(m=!1,x(e),!g)if(null!==r(c))g=!0,F(S);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,b(_),_=-1),h=!0;var a=p;try{for(x(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!I());){var i=f.callback;if("function"==typeof i){f.callback=null,p=f.priorityLevel;var s=i(f.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?f.callback=s:f===r(c)&&o(c),x(n)}else o(c);f=r(c)}if(null!==f)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{f=null,p=a,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,C=null,_=-1,j=5,A=-1;function I(){return!(t.unstable_now()-A<j)}function O(){if(null!==C){var e=t.unstable_now();A=e;var n=!0;try{n=C(!0,e)}finally{n?k():(E=!1,C=null)}}else E=!1}if("function"==typeof v)k=function(){v(O)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,T=P.port2;P.port1.onmessage=O,k=function(){T.postMessage(null)}}else k=function(){y(O,0)};function F(e){C=e,E||(E=!0,k())}function R(e,n){_=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,F(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>i?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(m?(b(_),_=-1):m=!0,R(w,a-i))):(e.sortIndex=s,n(c,e),g||h||(g=!0,F(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},982:(e,t,n)=>{e.exports=n(463)},63:(e,t,n)=>{
/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return s((function(){o.value=n,o.getSnapshot=t,c(o)&&u({inst:o})}),[e,n,t]),i((function(){return c(o)&&u({inst:o}),e((function(){c(o)&&u({inst:o})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},940:(e,t,n)=>{
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540),o=n(888);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=c((function(){function e(e){if(!l){if(l=!0,i=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return s=t}return s=e}if(t=s,a(i,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(i=e,s=n)}var i,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,o]);var p=i(e,d[0],d[1]);return l((function(){f.hasValue=!0,f.value=p}),[p]),u(p),p}},888:(e,t,n)=>{e.exports=n(63)},242:(e,t,n)=>{e.exports=n(940)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.p="/";var r=n(540),o=n(338),a=n(848),i=n(888),s=n(242),l=n(961);let c=function(e){e()};const u=()=>c,d=(0,r.createContext)(null);function f(){return(0,r.useContext)(d)}let p=()=>{throw new Error("uSES not initialized!")};const h=(e,t)=>e===t;function g(e=d){const t=e===d?f:()=>(0,r.useContext)(e);return function(e,n=h){const{store:o,subscription:a,getServerState:i}=t(),s=p(a.addNestedSub,o.getState,i||o.getState,e,n);return(0,r.useDebugValue)(s),s}}const m=g();n(146),n(737);const y={notify(){},get:()=>[]};function b(e,t){let n,r=y;function o(){i.onStateChange&&i.onStateChange()}function a(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){const e=u();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}const i={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=y)},getListeners:()=>r};return i}const v=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?r.useLayoutEffect:r.useEffect;let x=null;const w=function({store:e,context:t,children:n,serverState:o}){const a=(0,r.useMemo)((()=>{const t=b(e);return{store:e,subscription:t,getServerState:o?()=>o:void 0}}),[e,o]),i=(0,r.useMemo)((()=>e.getState()),[e]);v((()=>{const{subscription:t}=a;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),i!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[a,i]);const s=t||d;return r.createElement(s.Provider,{value:a},n)};function S(e=d){const t=e===d?f:()=>(0,r.useContext)(e);return function(){const{store:e}=t();return e}}const k=S();function E(e=d){const t=e===d?k:S(e);return function(){return t().dispatch}}const C=E();var _,j;_=s.useSyncExternalStoreWithSelector,p=_,(e=>{x=e})(i.useSyncExternalStore),j=l.unstable_batchedUpdates,c=j;var A,I=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}};!function(e){e.LanguageLearning="language-learning",e.GeneralTopic="general-topic"}(A||(A={}));var O=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function T(e){var t=e.examples.map((function(t){return function(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r="0.8em");var o=e.replace(t,"<b>".concat(t,"</b>"));if(n){var a=n.split(" ").slice(1).join(" ");return"".concat(o,"<br><span style='font-size: ").concat(r,";'><i>").concat(a,"</i></span>")}return o}(t[0],e.text,t[1])})).join("<br><br>"),n="";if(e.image_base64){var r=e.image_base64;if(r.startsWith("data:")){var o="base64,",a=r.indexOf(o);if(-1!==a){var i=r.substring(a+7);n='<div><img src="data:image/jpeg;base64,'.concat(i,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>')}else n='<div><img src="'.concat(r,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>')}else n='<div><img src="data:image/jpeg;base64,'.concat(r,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>')}return"\n        <b>".concat(e.translation,"</b>\n        <br><br>").concat(t,"<br><br>\n        ").concat(n,"\n    ")}var F=function(e,t,n,r,o,a){return O(void 0,void 0,void 0,(function(){var i,s,l,c,u;return P(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),i=JSON.stringify({action:"createDeck",version:6,key:n,params:{deck:r}}),[4,fetch(t,{method:"POST",body:i,headers:{"Content-Type":"application/json"}})];case 1:if(!d.sent().ok)throw new Error("Failed to create deck.");return s=a.map((function(t){var n,a,i;return e===A.LanguageLearning&&"translation"in t&&"examples"in t&&"image_base64"in t?n={Front:t.text,Back:T(t)}:e===A.GeneralTopic&&"back"in t&&(n={Front:t.front,Back:(a=t.back,i=a.replace("Key points:","").trim().split("-").map((function(e){return"<li>".concat(e.trim(),"</li>")})).join(""),"\n        <b>Key points:</b>\n        <ul>\n            ".concat(i,"\n        </ul>\n    "))}),{deckName:r,modelName:o,fields:n,options:{allowDuplicate:!1},tags:[]}})),l=JSON.stringify({action:"addNotes",version:6,key:n,params:{notes:s}}),[4,fetch(t,{method:"POST",body:l,headers:{"Content-Type":"application/json"}})];case 2:if(!(c=d.sent()).ok)throw new Error("Failed to add notes.");return[4,c.json()];case 3:if((u=d.sent()).error)throw new Error("Anki error: ".concat(u.error));return[2,u.result];case 4:throw d.sent();case 5:return[2]}}))}))};function R(e){return O(this,void 0,void 0,(function(){return P(this,(function(t){return[2,new Promise((function(t,n){chrome.runtime.sendMessage(e,(function(e){e.status&&void 0!==e.data?t(e.data):(console.error("Error fetching image:",e.error),n(null))}))}))]}))}))}var B=function(e){return O(void 0,void 0,void 0,(function(){var t,n,r;return P(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fetch("http://localhost:8765",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"deckNames",version:6,key:e})})];case 1:if(!(t=o.sent()).ok)throw new Error("HTTP error! Status: ".concat(t.status));return[4,t.json()];case 2:return(n=o.sent()).result?[2,{result:n.result.map((function(e){return{deckId:e,name:e}})),error:n.error}]:[2,n];case 3:throw r=o.sent(),console.error("Error fetching decks:",r),r;case 4:return[2]}}))}))},z=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},N=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},L="SAVE_ANKI_CARDS",M="SET_TEXT",D="SET_TRANSLATION",$="SET_EXAMPLES",U="SET_IMAGE",W="SET_IMAGE_URL",H="SET_BACK",q="SET_FRONT",V="SAVE_CARD_TO_STORAGE",K="LOAD_STORED_CARDS",G="DELETE_STORED_CARD",Q="SET_STORED_CARDS",J="UPDATE_CARD_EXPORT_STATUS",X="UPDATE_STORED_CARD",Y="SET_CURRENT_CARD_ID",Z=function(e,t,n,r,o,a){return void 0===n&&(n=null),function(i){return z(void 0,void 0,void 0,(function(){var s,l;return N(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,F(e,t,n,r,o,a)];case 1:return s=c.sent(),i({type:L,payload:s}),[3,3];case 2:throw l=c.sent(),console.error("Error saving Anki cards:",l),l;case 3:return[2]}}))}))}},ee=function(e){return{type:V,payload:e}},te=function(){return{type:K}},ne=function(e){return{type:M,payload:e}},re=function(e){return{type:$,payload:e}},oe=function(e){return{type:D,payload:e}},ae=function(e){return{type:U,payload:e}},ie=function(e){return{type:W,payload:e}},se=function(e){return{type:H,payload:e}},le=function(e){return{type:q,payload:e}},ce=function(e,t){return{type:J,payload:{cardId:e,status:t}}},ue=function(e){return{type:X,payload:e}},de=function(e){return{type:Y,payload:e}},fe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},pe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},he=function(e){if(!e||!e.error)return"Unknown OpenAI API error";var t=e.error,n=t.message,r=t.type,o=t.code,a="";return a="insufficient_quota"===o?"Your OpenAI account has exceeded its quota.\n\nPlease check your billing details or use a different API key.":"invalid_request_error"===r?"Invalid request to OpenAI.\n\nPlease check your API key and settings.":"rate_limit_exceeded"===r?"OpenAI rate limit exceeded.\n\nPlease try again in a few minutes.":"OpenAI API Error: ".concat(n||"Unknown error"),a+="\n\nDetails:\n- Type: ".concat(r||"unknown","\n- Code: ").concat(o||"none")},ge=function(e,t,n,r){return void 0===n&&(n="ru"),void 0===r&&(r=""),fe(void 0,void 0,void 0,(function(){var o,a,i,s,l,c,u,d,f,p,h;return pe(this,(function(g){switch(g.label){case 0:if(g.trys.push([0,5,,6]),!e)throw new Error("OpenAI API key is missing. Please check your settings.");return o="Translate the following text to ".concat(n),a=r?"".concat(o,". ").concat(r):o,i={model:"gpt-4o-mini",messages:[{role:"system",content:a},{role:"user",content:"".concat(t)}],max_tokens:900},[4,fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(i)})];case 1:return(s=g.sent()).ok?[3,3]:[4,s.json()];case 2:if((l=g.sent())&&l.error)throw new Error(he(l));throw new Error("OpenAI API error: ".concat(s.status," ").concat(s.statusText));case 3:return[4,s.json()];case 4:return c=g.sent(),[2,null!==(h=null===(p=null===(f=null===(d=c.choices[0])||void 0===d?void 0:d.message)||void 0===f?void 0:f.content)||void 0===p?void 0:p.trim())&&void 0!==h?h:null];case 5:throw u=g.sent(),console.error("Error during translation:",u),u;case 6:return[2]}}))}))},me=function(e,t,n,r,o){return void 0===r&&(r=!1),void 0===o&&(o=""),fe(void 0,void 0,void 0,(function(){var a,i,s,l,c,u,d,f,p,h,g,m,y,b,v,x,w,S,k,E;return pe(this,(function(C){switch(C.label){case 0:if(!e)throw new Error("OpenAI API key is missing. Please check your settings.");a=o.replace(/\{word\}/g,t),i="Give me three example sentences using the word '".concat(t,"' in the original language (the language of this word). \nEach example should show natural usage of '").concat(t,"' in its native language context.\nReturn ONLY the examples, one per line, without any numbering, explanations, or translations."),s=o?"".concat(i," ").concat(a):i,l=[{role:"system",content:s}],C.label=1;case 1:return C.trys.push([1,13,,14]),c={model:"gpt-4o-mini",messages:l,max_tokens:3500},[4,fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(c)})];case 2:return(u=C.sent()).ok?[3,4]:[4,u.json()];case 3:if((d=C.sent())&&d.error)throw new Error(he(d));throw new Error("Could not generate examples. OpenAI API error: ".concat(u.status," ").concat(u.statusText));case 4:return[4,u.json()];case 5:f=C.sent(),p=null===(k=null===(S=f.choices[0])||void 0===S?void 0:S.message)||void 0===k?void 0:k.content,h=null!==(E=null==p?void 0:p.trim().split("\n"))&&void 0!==E?E:[],g=[],m=0,y=h,C.label=6;case 6:if(!(m<y.length))return[3,12];if(!(b=y[m]).trim())return[3,11];if(v=null,!r)return[3,10];C.label=7;case 7:return C.trys.push([7,9,,10]),[4,ge(e,b,n)];case 8:return v=C.sent(),[3,10];case 9:return x=C.sent(),console.error("Error translating example:",x),[3,10];case 10:g.push([b,v]),C.label=11;case 11:return m++,[3,6];case 12:if(0===g.length)throw new Error("Could not generate examples. Please try again with a different word or check your API key.");return[2,g];case 13:throw w=C.sent(),console.error("Error during getting examples:",w),w;case 14:return[2]}}))}))},ye=function(e,t){return fe(void 0,void 0,void 0,(function(){var n,r,o,a,i,s,l,c,u,d;return pe(this,(function(f){switch(f.label){case 0:if(!e)throw new Error("OpenAI API key is missing. Please check your settings.");n=[{role:"system",content:"Is the word '".concat(t,"' an abstract concept or a concrete object? Answer 'abstract' or 'concrete':")}],f.label=1;case 1:return f.trys.push([1,6,,7]),r={model:"gpt-4o-mini",messages:n,max_tokens:900},[4,fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(r)})];case 2:return(o=f.sent()).ok?[3,4]:[4,o.json()];case 3:if((a=f.sent())&&a.error)throw new Error(he(a));throw new Error("OpenAI API error: ".concat(o.status," ").concat(o.statusText));case 4:return[4,o.json()];case 5:return i=f.sent(),[2,"abstract"===(null!==(d=null===(u=null===(c=null===(l=i.choices[0])||void 0===l?void 0:l.message)||void 0===c?void 0:c.content)||void 0===u?void 0:u.trim().toLowerCase())&&void 0!==d?d:"")];case 6:return s=f.sent(),console.error("Error during determining abstractness:",s),[2,!1];case 7:return[2]}}))}))},be=function(e,t,n){return void 0===n&&(n=""),fe(void 0,void 0,void 0,(function(){var r,o,a,i,s,l,c,u,d,f,p,h,g;return pe(this,(function(m){switch(m.label){case 0:if(!e)throw new Error("OpenAI API key is missing. Please check your settings.");r="Provide a detailed description for an image that represents the concept of '".concat(t,"'"),o=n?"".concat(r,". ").concat(n):r,a=[{role:"system",content:o}],m.label=1;case 1:return m.trys.push([1,6,,7]),i={model:"gpt-4o-mini",messages:a,max_tokens:100},[4,fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(i)})];case 2:return(s=m.sent()).ok?[3,4]:[4,s.json()];case 3:if((l=m.sent())&&l.error)throw new Error(he(l));throw new Error("Could not generate image description. OpenAI API error: ".concat(s.status," ").concat(s.statusText));case 4:return[4,s.json()];case 5:if(c=m.sent(),!(u=null!==(g=null===(h=null===(p=null===(f=c.choices[0])||void 0===f?void 0:f.message)||void 0===p?void 0:p.content)||void 0===h?void 0:h.trim())&&void 0!==g?g:""))throw new Error("Could not generate a valid image description. Please try again.");return[2,u];case 6:throw d=m.sent(),console.error("Error during getting description image:",d),d;case 7:return[2]}}))}))},ve=function(e,t,n){return void 0===n&&(n=""),fe(void 0,void 0,void 0,(function(){var r,o,a,i,s,l,c;return pe(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),r=n?"".concat(t,". ").concat(n):t,[4,e.images.generate({prompt:r,n:1,size:"512x512",response_format:"url"})];case 1:if(!(o=u.sent()).data||!(null===(c=o.data[0])||void 0===c?void 0:c.url))throw new Error("OpenAI did not return an image URL. Please try again.");return[2,o.data[0].url];case 2:if(a=u.sent(),console.error("Error during image generation:",a),a instanceof Error){if((i=a.message||"").includes("quota")||i.includes("billing"))throw new Error("Your OpenAI account has exceeded its quota.\n\nPlease check your billing details or use a different API key.");if(i.includes("rate limit"))throw new Error("OpenAI rate limit exceeded.\n\nPlease try again in a few minutes.");if(i.includes("invalid API key"))throw new Error("Invalid OpenAI API key.\n\nPlease check your API key in settings.");if(i.includes("moderation")||i.includes("policy"))throw new Error("OpenAI content policy violation.\n\nThe image request was flagged for content policy violation. Please modify your request.");if(i.includes("{")&&i.includes("}"))try{if(s=i.substring(i.indexOf("{"),i.lastIndexOf("}")+1),(l=JSON.parse(s))&&l.error)return[2,he(l)]}catch(e){}throw a}throw new Error("Failed to generate image.\n\nPlease check your OpenAI API key and try again.");case 3:return[2]}}))}))},xe=function(e,t,n,r){return void 0===r&&(r=""),fe(void 0,void 0,void 0,(function(){var o,a,i;return pe(this,(function(s){switch(s.label){case 0:if(!t)throw new Error("OpenAI API key is missing. Please check your settings.");s.label=1;case 1:return s.trys.push([1,8,,9]),[4,ye(t,n)];case 2:return s.sent()?[4,be(t,n,r)]:[3,5];case 3:return o=s.sent(),[4,ve(e,"Create a vivid, high-quality illustration representing the concept of '".concat(o,"'"),r)];case 4:return[2,s.sent()];case 5:return a="Create a high-quality, photorealistic image of a ".concat(n," with a neutral expression and clear features"),[4,ve(e,a,r)];case 6:return[2,s.sent()];case 7:return[3,9];case 8:if(i=s.sent(),console.error("Error during getting image for word:",i),i instanceof Error){if(i.message.includes("OpenAI API Error")||i.message.includes("exceeded its quota")||i.message.includes("rate limit")||i.message.includes("API key"))throw i;throw new Error('Failed to generate image for "'.concat(n,'". ').concat(i.message))}throw new Error('Failed to generate image for "'.concat(n,'". Please check your OpenAI API key and try again.'));case 9:return[2]}}))}))},we="SET_OPEN_AI_KEY",Se="SET_SELECTED_MODE",ke="SET_SELECTED_LANGUAGE",Ee="SET_ANKI_CONNECT_URL",Ce="SET_ANKI_CONNECT_API_KEY",_e="SET_USE_ANKI_CONNECT",je="SET_VISIBLE_SIDEBAR",Ae="SET_HUGGINGFACE_API_KEY",Ie="SET_GROQ_API_KEY",Oe="SET_GROQ_MODEL_NAME",Pe="SET_SHOULD_GENERATE_IMAGE",Te="SET_TRANSLATION_PROMPT",Fe="SET_EXAMPLES_PROMPT",Re="SET_AI_INSTRUCTIONS",Be="SET_IMAGE_INSTRUCTIONS",ze="SET_MODEL_PROVIDER",Ne={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Le=r.createContext&&r.createContext(Ne),Me=function(){return Me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Me.apply(this,arguments)},De=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function $e(e){return e&&e.map((function(e,t){return r.createElement(e.tag,Me({key:t},e.attr),$e(e.child))}))}function Ue(e){return function(t){return r.createElement(We,Me({attr:Me({},e.attr)},t),$e(e.child))}}function We(e){var t=function(t){var n,o=e.attr,a=e.size,i=e.title,s=De(e,["attr","size","title"]),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",Me({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,s,{className:n,style:Me(Me({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==Le?r.createElement(Le.Consumer,null,(function(e){return t(e)})):t(Ne)}function He(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(e)}function qe(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function Ve(e){return Ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(e)}function Ke(e){return Ue({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(e)}function Ge(e){return Ue({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}function Qe(e){return Ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}}]})(e)}function Je(e){return Ue({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"}}]})(e)}function Xe(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function Ye(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function Ze(e){return Ue({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function et(e){return Ue({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function tt(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"}}]})(e)}function nt(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(e)}function rt(e){return Ue({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"}}]})(e)}function ot(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"}}]})(e)}function at(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"}}]})(e)}function it(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"}}]})(e)}function st(e){return Ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function lt(e){return Ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function ct(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"}}]})(e)}function ut(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(e)}function dt(e){return Ue({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function ft(e){return Ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}var pt=function(){return pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pt.apply(this,arguments)};const ht=function(e){var t=e.size,n=void 0===t?"medium":t,r=e.type,o=void 0===r?"spinner":r,i=e.color,s=void 0===i?"#3B82F6":i,l=e.text,c=e.fullScreen,u=void 0!==c&&c,d=e.overlay,f=void 0!==d&&d,p=e.inline,h=void 0!==p&&p,g={small:{container:"16px",fontSize:"12px",spacing:"8px"},medium:{container:"24px",fontSize:"14px",spacing:"12px"},large:{container:"32px",fontSize:"16px",spacing:"16px"}}[n],m={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:g.spacing,zIndex:1e3};return u&&(m.position="fixed",m.top=0,m.left=0,m.right=0,m.bottom=0),f&&(m.position="absolute",m.top=0,m.left=0,m.right=0,m.bottom=0,m.backgroundColor="rgba(255, 255, 255, 0.8)"),h&&(m.display="inline-flex",m.flexDirection="row",m.marginLeft="8px",m.marginRight="8px"),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("style",{children:["\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  ","\n    @keyframes pulse {\n      0%, 100% { opacity: 1; transform: scale(1); }\n      50% { opacity: 0.5; transform: scale(0.8); }\n    }\n  ","\n    @keyframes dots1 {\n      0%, 80%, 100% { transform: scale(0); }\n      40% { transform: scale(1); }\n    }\n    @keyframes dots2 {\n      0%, 80%, 100% { transform: scale(0); }\n      40% { transform: scale(1); }\n      animation-delay: 0.2s;\n    }\n    @keyframes dots3 {\n      0%, 80%, 100% { transform: scale(0); }\n      40% { transform: scale(1); }\n      animation-delay: 0.4s;\n    }\n  "]}),(0,a.jsxs)("div",pt({style:m},{children:[function(){switch(o){case"spinner":return(0,a.jsx)("div",{style:{width:g.container,height:g.container,border:"2px solid ".concat(s),borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.8s linear infinite"}});case"pulse":return(0,a.jsx)("div",{style:{width:g.container,height:g.container,backgroundColor:s,borderRadius:"50%",animation:"pulse 1.2s ease-in-out infinite"}});case"dots":return(0,a.jsx)("div",pt({style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"}},{children:[1,2,3].map((function(e){return(0,a.jsx)("div",{style:{width:"calc(".concat(g.container," / 3)"),height:"calc(".concat(g.container," / 3)"),backgroundColor:s,borderRadius:"50%",animation:"dots".concat(e," 1.4s infinite ease-in-out both"),animationDelay:"".concat(.2*(e-1),"s")}},e)}))}));default:return null}}(),l&&(0,a.jsx)("div",pt({style:{color:s,fontSize:g.fontSize,fontWeight:500,textAlign:"center"}},{children:l}))]}))]})};var gt=function(){return gt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gt.apply(this,arguments)},mt=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const yt=function(e){var t=e.front,n=e.translation,o=e.examples,i=e.imageUrl,s=(e.image,e.onNewImage),l=e.onNewExamples,c=e.onAccept,u=e.onViewSavedCards,d=e.onCancel,f=e.mode,p=(void 0===f&&A.LanguageLearning,e.loadingNewImage),h=e.loadingNewExamples,g=e.loadingAccept,m=(e.shouldGenerateImage,e.isSaved),y=void 0!==m&&m,b=(e.isEdited,e.setTranslation),v=e.setExamples,x=(0,r.useState)(!1),w=x[0],S=x[1],k=(0,r.useState)(n||""),E=k[0],C=k[1],_=(0,r.useState)(!1),j=_[0],I=_[1],O=function(){I(!0)},P=function(){c(),I(!1),w&&b&&(b(E),S(!1))},T=function(){j&&(S(!0),C(n||""))},F=function(){b&&E&&b(E),S(!1)},R=function(e,t,n){if(j&&v&&o){var r=mt([],o,!0);t?r[e][0]=n:r[e][1]=n||null,v(r)}};return(0,a.jsxs)("div",gt({style:{padding:"16px",borderRadius:"8px",width:"100%",maxWidth:"100%",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",overflowX:"hidden",backgroundColor:j?"#FAFAFA":"#ffffff",borderLeft:j?"3px solid #3B82F6":"3px solid transparent"}},{children:[(0,a.jsxs)("div",gt({style:{fontSize:"10px",color:"#9CA3AF",marginBottom:"12px",textAlign:"right",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:j?"#EFF6FF":y?"#ECFDF5":"#F9FAFB",borderRadius:"4px",border:j?"1px solid #DBEAFE":y?"1px solid #D1FAE5":"1px solid #F3F4F6"}},{children:[(0,a.jsx)("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:j?"#3B82F6":y?"#10B981":"#6B7280"}}),(0,a.jsx)("strong",gt({style:{color:j?"#1E40AF":y?"#059669":"#4B5563"}},{children:j?"Editing":y?"Saved to Collection":"New - Not Saved Yet"}))]})),j?(0,a.jsxs)("button",gt({onClick:P,disabled:g,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"6px",padding:"10px 12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",marginBottom:"12px",width:"100%",opacity:g?.7:1},onMouseOver:function(e){return!g&&(e.currentTarget.style.backgroundColor="#2563EB")},onMouseOut:function(e){return!g&&(e.currentTarget.style.backgroundColor="#3B82F6")}},{children:[(0,a.jsx)(lt,{size:14}),g?(0,a.jsx)("div",gt({style:{display:"flex",alignItems:"center",justifyContent:"center"}},{children:(0,a.jsx)(ht,{type:"spinner",size:"small",inline:!0,color:"#ffffff",text:"Saving"})})):"Save & Finish Editing"]})):y&&!j?(0,a.jsxs)("button",gt({onClick:O,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",backgroundColor:"#F3F4F6",color:"#4B5563",border:"1px solid #E5E7EB",borderRadius:"6px",padding:"10px 12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",marginBottom:"12px",width:"100%"},onMouseOver:function(e){e.currentTarget.style.backgroundColor="#E5E7EB",e.currentTarget.style.color="#1F2937"},onMouseOut:function(e){e.currentTarget.style.backgroundColor="#F3F4F6",e.currentTarget.style.color="#4B5563"}},{children:[(0,a.jsx)(Ze,{size:14}),"Edit Card"]})):null,j?(0,a.jsxs)("div",gt({style:{marginBottom:"16px",backgroundColor:"#EFF6FF",borderRadius:"6px",padding:"10px",border:"1px solid #DBEAFE",fontSize:"13px",color:"#1E40AF"}},{children:[(0,a.jsxs)("div",gt({style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",fontWeight:"600"}},{children:[(0,a.jsx)(Ze,{size:12}),"Editing Mode"]})),(0,a.jsx)("p",gt({style:{margin:0,fontSize:"12px"}},{children:'Click on text elements to edit them. When finished, click "Save & Finish Editing" at the top of the card.'}))]})):null,t&&(0,a.jsx)("div",gt({style:{marginBottom:"12px"}},{children:t.includes("/")?function(){var e,n=t.split(/\s*\//),r=(null===(e=n[0])||void 0===e?void 0:e.trim())||"",o=n.length>1?"/".concat(n.slice(1).join("/").replace(/\/$/,"")):"";return(0,a.jsxs)("div",gt({style:{textAlign:"center",padding:"12px",backgroundColor:"#F3F4F6",borderRadius:"8px"}},{children:[(0,a.jsx)("h3",gt({style:{fontSize:"20px",fontWeight:"700",margin:"0 0 6px 0",color:"#111827"}},{children:r})),o&&(0,a.jsx)("div",gt({style:{fontSize:"14px",color:"#6B7280",fontStyle:"italic"}},{children:o}))]}))}():(0,a.jsx)("h3",gt({style:{fontSize:"18px",fontWeight:"600",textAlign:"center",margin:"2px 0",color:"#111827",padding:"10px",backgroundColor:"#F3F4F6",borderRadius:"8px"}},{children:t}))})),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{style:{margin:"10px 0",border:"none",borderTop:"1px solid #E5E7EB"}}),w&&j?(0,a.jsxs)("div",gt({style:{marginBottom:"12px",position:"relative"}},{children:[(0,a.jsx)("input",{type:"text",value:E,onChange:function(e){return C(e.target.value)},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #3B82F6",backgroundColor:"#ffffff",color:"#111827",fontSize:"14px",outline:"none",fontWeight:"600",textAlign:"center"},autoFocus:!0,onBlur:F,onKeyDown:function(e){"Enter"===e.key&&F()}}),(0,a.jsx)("div",gt({style:{fontSize:"11px",color:"#6B7280",textAlign:"center",marginTop:"4px"}},{children:"Press Enter or click outside to save"}))]})):(0,a.jsxs)("div",gt({style:gt({marginBottom:"12px",textAlign:"center",position:"relative",paddingRight:j?"24px":"0"},j?{padding:"8px",border:"1px dashed #E5E7EB",borderRadius:"4px",transition:"all 0.2s ease",cursor:"pointer",backgroundColor:"#FAFAFA"}:{}),onClick:j?T:void 0,onMouseOver:function(e){j&&(e.currentTarget.style.borderColor="#3B82F6",e.currentTarget.style.backgroundColor="#F9FAFB")},onMouseOut:function(e){j&&(e.currentTarget.style.borderColor="#E5E7EB",e.currentTarget.style.backgroundColor="#FAFAFA")}},{children:[(0,a.jsx)("p",gt({style:{fontWeight:"600",color:"#111827",fontSize:"14px",margin:0}},{children:n})),j&&(0,a.jsx)("button",gt({onClick:function(e){e.stopPropagation(),T()},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"#F3F4F6",border:"none",borderRadius:"4px",cursor:"pointer",color:"#6B7280",display:"flex",padding:"4px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},title:"Edit translation",onMouseOver:function(e){e.currentTarget.style.backgroundColor="#E5E7EB",e.currentTarget.style.color="#3B82F6"},onMouseOut:function(e){e.currentTarget.style.backgroundColor="#F3F4F6",e.currentTarget.style.color="#6B7280"}},{children:(0,a.jsx)(it,{size:12})}))]}))]}),o.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{style:{margin:"10px 0",border:"none",borderTop:"1px solid #E5E7EB"}}),(0,a.jsxs)("div",gt({style:{marginBottom:"12px"}},{children:[(0,a.jsx)("div",gt({style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}},{children:(0,a.jsx)("h4",gt({style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:0}},{children:"Examples"}))})),(0,a.jsx)("ul",gt({style:{listStyle:"none",padding:0,margin:0}},{children:o.map((function(e,t){var n=e[0],r=e[1];return(0,a.jsxs)("li",gt({style:gt({marginBottom:"8px",padding:"10px",backgroundColor:"#F9FAFB",borderRadius:"6px",position:"relative"},j?{border:"1px dashed #CBD5E1",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"}:{})},{children:[j&&(0,a.jsx)("div",gt({style:{position:"absolute",top:"8px",right:"8px",display:"flex",gap:"8px",zIndex:5}},{children:(0,a.jsxs)("button",gt({onClick:function(){return function(e){if(j&&v&&o){var t=mt([],o,!0);t.splice(e,1),v(t)}}(t)},style:{background:"#FEE2E2",border:"none",borderRadius:"4px",cursor:"pointer",color:"#EF4444",padding:"4px 6px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"500"},title:"Delete example",onMouseOver:function(e){e.currentTarget.style.backgroundColor="#FECACA"},onMouseOut:function(e){e.currentTarget.style.backgroundColor="#FEE2E2"}},{children:[(0,a.jsx)(ft,{size:10,style:{marginRight:"4px"}}),"Delete"]}))})),j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",gt({style:{marginBottom:"8px"}},{children:(0,a.jsx)("input",{type:"text",value:n,onChange:function(e){return R(t,!0,e.target.value)},style:{width:"100%",padding:"6px 8px",borderRadius:"4px",border:"1px solid #E5E7EB",fontSize:"13px",color:"#111827",fontWeight:"500",backgroundColor:"#ffffff"},placeholder:"Example sentence"})})),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:r||"",onChange:function(e){return R(t,!1,e.target.value)},style:{width:"100%",padding:"6px 8px",borderRadius:"4px",border:"1px solid #E5E7EB",fontSize:"13px",color:"#6B7280",fontStyle:"italic",backgroundColor:"#ffffff"},placeholder:"Translation (optional)"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",gt({style:{fontWeight:"500",color:"#111827",fontSize:"13px",marginBottom:r?"6px":0}},{children:n})),r&&(0,a.jsx)("div",gt({style:{color:"#6B7280",fontSize:"13px",fontStyle:"italic"}},{children:r}))]})]}),t)}))})),j&&(0,a.jsxs)("button",gt({onClick:function(){if(j&&v&&o){var e=mt([],o,!0);e.push(["",null]),v(e)}},style:{width:"100%",padding:"10px",borderRadius:"6px",backgroundColor:"#EFF6FF",color:"#3B82F6",fontSize:"14px",fontWeight:"500",border:"1px dashed #BFDBFE",cursor:"pointer",marginTop:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.backgroundColor="#DBEAFE",e.currentTarget.style.borderColor="#93C5FD"},onMouseOut:function(e){e.currentTarget.style.backgroundColor="#EFF6FF",e.currentTarget.style.borderColor="#BFDBFE"}},{children:[(0,a.jsx)(st,{size:12}),"Add Example"]}))]}))]}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{style:{margin:"16px 0",border:"none",borderTop:"1px solid #E5E7EB"}}),(0,a.jsx)("div",gt({style:{marginBottom:"16px"}},{children:(0,a.jsx)("img",{src:i,alt:"",style:{width:"100%",borderRadius:"6px",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"}})}))]}),j&&(0,a.jsxs)("div",gt({style:{display:"flex",gap:"6px",marginBottom:"8px"}},{children:[i&&(0,a.jsx)("button",gt({onClick:s,disabled:p,style:{flex:1,padding:"8px 12px",borderRadius:"6px",backgroundColor:"#F59E0B",color:"#ffffff",fontWeight:"600",fontSize:"13px",border:"none",cursor:"pointer",transition:"all 0.2s ease",opacity:p?.7:1},onMouseOver:function(e){return!p&&(e.currentTarget.style.backgroundColor="#D97706")},onMouseOut:function(e){return!p&&(e.currentTarget.style.backgroundColor="#F59E0B")}},{children:p?(0,a.jsx)("div",gt({style:{display:"flex",alignItems:"center",justifyContent:"center"}},{children:(0,a.jsx)(ht,{type:"pulse",size:"small",inline:!0,color:"#ffffff",text:"Generating"})})):"New Image"})),o.length>0&&(0,a.jsx)("button",gt({onClick:l,disabled:h,style:{flex:1,padding:"8px 12px",borderRadius:"6px",backgroundColor:"#F59E0B",color:"#ffffff",fontWeight:"600",fontSize:"13px",border:"none",cursor:"pointer",transition:"all 0.2s ease",opacity:h?.7:1},onMouseOver:function(e){return!h&&(e.currentTarget.style.backgroundColor="#D97706")},onMouseOut:function(e){return!h&&(e.currentTarget.style.backgroundColor="#F59E0B")}},{children:h?(0,a.jsx)("div",gt({style:{display:"flex",alignItems:"center",justifyContent:"center"}},{children:(0,a.jsx)(ht,{type:"dots",size:"small",inline:!0,color:"#ffffff",text:"Loading"})})):"New Examples"}))]})),(0,a.jsxs)("div",gt({style:{marginBottom:"10px"}},{children:[!j&&!y&&(0,a.jsxs)("div",gt({style:{display:"flex",gap:"8px",width:"100%"}},{children:[(0,a.jsxs)("button",gt({onClick:d,style:{flex:"1",padding:"10px",borderRadius:"6px",backgroundColor:"#F3F4F6",color:"#4B5563",fontWeight:"600",fontSize:"14px",border:"1px solid #E5E7EB",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseOver:function(e){e.currentTarget.style.backgroundColor="#E5E7EB",e.currentTarget.style.color="#374151"},onMouseOut:function(e){e.currentTarget.style.backgroundColor="#F3F4F6",e.currentTarget.style.color="#4B5563"}},{children:[(0,a.jsx)(dt,{}),"Cancel"]})),(0,a.jsxs)("button",gt({onClick:c,disabled:g,style:{flex:"2",padding:"10px",borderRadius:"6px",backgroundColor:"#22C55E",color:"#ffffff",fontWeight:"600",fontSize:"14px",border:"none",cursor:"pointer",transition:"all 0.2s ease",opacity:g?.7:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseOver:function(e){return!g&&(e.currentTarget.style.backgroundColor="#15803D")},onMouseOut:function(e){return!g&&(e.currentTarget.style.backgroundColor="#22C55E")}},{children:[(0,a.jsx)(qe,{}),g?(0,a.jsx)("div",gt({style:{display:"flex",alignItems:"center",justifyContent:"center"}},{children:(0,a.jsx)(ht,{type:"spinner",size:"small",inline:!0,color:"#ffffff",text:"Saving"})})):"Save Card"]}))]})),!j&&y&&(0,a.jsxs)("div",gt({style:{width:"100%",padding:"10px",borderRadius:"6px",backgroundColor:"#ECFDF5",border:"1px solid #D1FAE5",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},{children:[(0,a.jsx)("div",gt({style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#10B981",color:"white"}},{children:(0,a.jsx)(qe,{size:12})})),(0,a.jsx)("span",gt({style:{fontWeight:"600",fontSize:"14px",color:"#059669"}},{children:"Saved to Collection"}))]})),!j&&!y&&(0,a.jsx)("p",gt({style:{fontSize:"11px",color:"#6B7280",textAlign:"center",margin:"4px 0 0 0"}},{children:"The card will be saved to your collection"}))]})),(0,a.jsxs)("button",gt({onClick:u,style:{width:"100%",padding:"10px",borderRadius:"6px",backgroundColor:"#4B5563",color:"#ffffff",fontWeight:"600",fontSize:"13px",border:"none",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseOver:function(e){return e.currentTarget.style.backgroundColor="#374151"},onMouseOut:function(e){return e.currentTarget.style.backgroundColor="#4B5563"}},{children:[(0,a.jsx)(ot,{size:14}),"View Saved Cards"]}))]}))},bt="RFC3986",vt={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},xt=(Object.prototype.hasOwnProperty,Array.isArray),wt=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();const St=1024;function kt(e,t){if(xt(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const Et=Object.prototype.hasOwnProperty,Ct={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},_t=Array.isArray,jt=Array.prototype.push,At=function(e,t){jt.apply(e,_t(t)?t:[t])},It=Date.prototype.toISOString,Ot={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,r,o)=>{if(0===e.length)return e;let a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));let i="";for(let e=0;e<a.length;e+=St){const t=a.length>=St?a.slice(e,e+St):a,n=[];for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||"RFC1738"===o&&(40===r||41===r)?n[n.length]=t.charAt(e):r<128?n[n.length]=wt[r]:r<2048?n[n.length]=wt[192|r>>6]+wt[128|63&r]:r<55296||r>=57344?n[n.length]=wt[224|r>>12]+wt[128|r>>6&63]+wt[128|63&r]:(e+=1,r=65536+((1023&r)<<10|1023&t.charCodeAt(e)),n[n.length]=wt[240|r>>18]+wt[128|r>>12&63]+wt[128|r>>6&63]+wt[128|63&r])}i+=n.join("")}return i},encodeValuesOnly:!1,format:bt,formatter:vt[bt],indices:!1,serializeDate:e=>It.call(e),skipNulls:!1,strictNullHandling:!1};const Pt={};function Tt(e,t,n,r,o,a,i,s,l,c,u,d,f,p,h,g,m,y){let b=e,v=y,x=0,w=!1;for(;void 0!==(v=v.get(Pt))&&!w;){const t=v.get(e);if(x+=1,void 0!==t){if(t===x)throw new RangeError("Cyclic object value");w=!0}void 0===v.get(Pt)&&(x=0)}if("function"==typeof c?b=c(t,b):b instanceof Date?b=f?.(b):"comma"===n&&_t(b)&&(b=kt(b,(function(e){return e instanceof Date?f?.(e):e}))),null===b){if(a)return l&&!g?l(t,Ot.encoder,m,"key",p):t;b=""}if("string"==typeof(S=b)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))}(b)){if(l){const e=g?t:l(t,Ot.encoder,m,"key",p);return[h?.(e)+"="+h?.(l(b,Ot.encoder,m,"value",p))]}return[h?.(t)+"="+h?.(String(b))]}var S;const k=[];if(void 0===b)return k;let E;if("comma"===n&&_t(b))g&&l&&(b=kt(b,l)),E=[{value:b.length>0?b.join(",")||null:void 0}];else if(_t(c))E=c;else{const e=Object.keys(b);E=u?e.sort(u):e}const C=s?String(t).replace(/\./g,"%2E"):String(t),_=r&&_t(b)&&1===b.length?C+"[]":C;if(o&&_t(b)&&0===b.length)return _+"[]";for(let t=0;t<E.length;++t){const v=E[t],w="object"==typeof v&&void 0!==v.value?v.value:b[v];if(i&&null===w)continue;const S=d&&s?v.replace(/\./g,"%2E"):v,C=_t(b)?"function"==typeof n?n(_,S):_:_+(d?"."+S:"["+S+"]");y.set(e,x);const j=new WeakMap;j.set(Pt,y),At(k,Tt(w,C,n,r,o,a,i,s,"comma"===n&&g&&_t(b)?null:l,c,u,d,f,p,h,g,m,j))}return k}function Ft(e,t={}){let n=e;const r=function(e=Ot){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||Ot.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=bt;if(void 0!==e.format){if(!Et.call(vt,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=vt[n];let o,a=Ot.filter;if(("function"==typeof e.filter||_t(e.filter))&&(a=e.filter),o=e.arrayFormat&&e.arrayFormat in Ct?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":Ot.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=void 0===e.allowDots?1==!!e.encodeDotInKeys||Ot.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:Ot.addQueryPrefix,allowDots:i,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:Ot.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:Ot.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?Ot.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:Ot.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:Ot.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:Ot.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:Ot.encodeValuesOnly,filter:a,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:Ot.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:Ot.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:Ot.strictNullHandling}}(t);let o,a;"function"==typeof r.filter?(a=r.filter,n=a("",n)):_t(r.filter)&&(a=r.filter,o=a);const i=[];if("object"!=typeof n||null===n)return"";const s=Ct[r.arrayFormat],l="comma"===s&&r.commaRoundTrip;o||(o=Object.keys(n)),r.sort&&o.sort(r.sort);const c=new WeakMap;for(let e=0;e<o.length;++e){const t=o[e];r.skipNulls&&null===n[t]||At(i,Tt(n[t],t,s,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const u=i.join(r.delimiter);let d=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}const Rt="4.72.0";let Bt,zt,Nt,Lt,Mt,Dt,$t,Ut,Wt,Ht=!1,qt=null,Vt=null,Kt=null,Gt=null;class Qt{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}Bt||function(e,t={auto:!1}){if(Ht)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(Bt)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${Bt}'\``);Ht=t.auto,Bt=e.kind,zt=e.fetch,qt=e.Request,Vt=e.Response,Kt=e.Headers,Nt=e.FormData,Gt=e.Blob,Lt=e.File,Mt=e.ReadableStream,Dt=e.getMultipartRequestOptions,$t=e.getDefaultAgent,Ut=e.fileFromPath,Wt=e.isFsReadStream}(function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,o,a;try{n=fetch,r=Request,o=Response,a=Headers}catch(e){throw new Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:o,Headers:a,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new Qt(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class Jt extends Error{}class Xt extends Jt{constructor(e,t,n,r){super(`${Xt.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r?.["x-request-id"];const o=t;this.error=o,this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,t,n){const r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e)return new Zt({message:n,cause:Jn(t)});const o=t?.error;return 400===e?new tn(e,o,n,r):401===e?new nn(e,o,n,r):403===e?new rn(e,o,n,r):404===e?new on(e,o,n,r):409===e?new an(e,o,n,r):422===e?new sn(e,o,n,r):429===e?new ln(e,o,n,r):e>=500?new cn(e,o,n,r):new Xt(e,o,n,r)}}class Yt extends Xt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class Zt extends Xt{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class en extends Zt{constructor({message:e}={}){super({message:e??"Request timed out."})}}class tn extends Xt{constructor(){super(...arguments),this.status=400}}class nn extends Xt{constructor(){super(...arguments),this.status=401}}class rn extends Xt{constructor(){super(...arguments),this.status=403}}class on extends Xt{constructor(){super(...arguments),this.status=404}}class an extends Xt{constructor(){super(...arguments),this.status=409}}class sn extends Xt{constructor(){super(...arguments),this.status=422}}class ln extends Xt{constructor(){super(...arguments),this.status=429}}class cn extends Xt{}class un extends Jt{constructor(){super("Could not parse response content as the length limit was reached")}}class dn extends Jt{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class fn{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=fn.NEWLINE_CHARS.has(t[t.length-1]||"");let r=t.split(fn.NEWLINE_REGEXP);return n&&r.pop(),1!==r.length||n?(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),n||(this.buffer=[r.pop()||""]),r):(this.buffer.push(r[0]),[])}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Jt(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Jt(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Jt("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}fn.NEWLINE_CHARS=new Set(["\n","\r"]),fn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class pn{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new pn((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of async function*(e,t){if(!e.body)throw t.abort(),new Jt("Attempted to iterate over a response with no body");const n=new gn,r=new fn,o=mn(e.body);for await(const e of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?(new TextEncoder).encode(n):n;let r,o=new Uint8Array(t.length+e.length);for(o.set(t),o.set(e,t.length),t=o;-1!==(r=hn(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(o))for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}for(const e of r.flush()){const t=n.decode(e);t&&(yield t)}}(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event){let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if(e&&e.error)throw new Xt(void 0,e.error,void 0,void 0);yield e}else{let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if("error"==n.event)throw new Xt(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}r=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{r||t.abort()}}),t)}static fromReadableStream(e,t){let n=!1;return new pn((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new fn,n=mn(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{r||t.abort()}}),t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new pn((()=>r(e)),this.controller),new pn((()=>r(t)),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new Mt({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:o}=await t.next();if(o)return e.close();const a=n.encode(JSON.stringify(r)+"\n");e.enqueue(a)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}function hn(e){for(let t=0;t<e.length-2;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}class gn{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}function mn(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const yn=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,bn=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&vn(e),vn=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,xn=e=>bn(e)||yn(e)||Wt(e);async function wn(e,t,n){if(e=await e,bn(e))return e;if(yn(e)){const r=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=vn(r)?[await r.arrayBuffer()]:[r];return new Lt(o,t,n)}const r=await async function(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(vn(e))t.push(await e.arrayBuffer());else{if(!kn(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){const t=Object.getOwnPropertyNames(e);return`[${t.map((e=>`"${e}"`)).join(", ")}]`}(e)}`);for await(const n of e)t.push(n)}return t}(e);if(t||(t=function(e){return Sn(e.name)||Sn(e.filename)||Sn(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!n?.type){const e=r[0]?.type;"string"==typeof e&&(n={...n,type:e})}return new Lt(r,t,n)}const Sn=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,kn=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],En=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],Cn=async e=>{const t=await _n(e.body);return Dt(t,e)},_n=async e=>{const t=new Nt;return await Promise.all(Object.entries(e||{}).map((([e,n])=>jn(t,e,n)))),t},jn=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if(xn(n)){const r=await wn(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map((n=>jn(e,t+"[]",n))));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map((([n,r])=>jn(e,`${t}[${n}]`,r))))}}};var An,In=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},On=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};async function Pn(e){const{response:t}=e;if(e.options.stream)return tr("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):pn.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if(n?.includes("application/json")||n?.includes("application/vnd.api+json")){const e=await t.json();return tr("response",t.status,t.url,t.headers,e),Tn(e,t)}const r=await t.text();return tr("response",t.status,t.url,t.headers,r),r}function Tn(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class Fn extends Promise{constructor(e,t=Pn){super((e=>{e(null)})),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Fn(this.responsePromise,(async t=>Tn(e(await this.parseResponse(t),t),t.response)))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Rn{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:o}){this.baseURL=e,this.maxRetries=Qn("maxRetries",t),this.timeout=Qn("timeout",n),this.httpAgent=r,this.fetch=o??zt}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Hn(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${nr()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then((async n=>{const r=n&&vn(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}})))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder){return(new TextEncoder).encode(e).length.toString()}}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const{method:n,path:r,query:o,headers:a={}}=e,i=ArrayBuffer.isView(e.body)||e.__binaryRequest&&"string"==typeof e.body?e.body:En(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,s=this.calculateContentLength(i),l=this.buildURL(r,o);"timeout"in e&&Qn("timeout",e.timeout);const c=e.timeout??this.timeout,u=e.httpAgent??this.httpAgent??$t(l),d=c+1e3;"number"==typeof u?.options?.timeout&&d>(u.options.timeout??0)&&(u.options.timeout=d),this.idempotencyHeader&&"get"!==n&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);return{req:{method:n,...i&&{body:i},headers:this.buildHeaders({options:e,headers:a,contentLength:s,retryCount:t}),...u&&{agent:u},signal:e.signal??null},url:l,timeout:c}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){const o={};n&&(o["content-length"]=n);const a=this.defaultHeaders(e);return er(o,a),er(o,t),En(e.body)&&"node"!==Bt&&delete o["content-type"],void 0===rr(a,"x-stainless-retry-count")&&void 0===rr(t,"x-stainless-retry-count")&&(o["x-stainless-retry-count"]=String(r)),this.validateHeaders(o,t),o}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}:{}}makeStatusError(e,t,n,r){return Xt.generate(e,t,n,r)}request(e,t=null){return new Fn(this.makeRequest(e,t))}async makeRequest(e,t){const n=await e,r=n.maxRetries??this.maxRetries;null==t&&(t=r),await this.prepareOptions(n);const{req:o,url:a,timeout:i}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(o,{url:a,options:n}),tr("request",a,n,o.headers),n.signal?.aborted)throw new Yt;const s=new AbortController,l=await this.fetchWithTimeout(a,o,i,s).catch(Jn);if(l instanceof Error){if(n.signal?.aborted)throw new Yt;if(t)return this.retryRequest(n,t);if("AbortError"===l.name)throw new en;throw new Zt({cause:l})}const c=Nn(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){return tr(`response (error; ${`retrying, ${t} attempts remaining`})`,l.status,a,c),this.retryRequest(n,t,c)}const e=await l.text().catch((e=>Jn(e).message)),r=qn(e),o=r?void 0:e;tr(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,a,c,o);throw this.makeStatusError(l.status,r,o,c)}return{response:l,options:n,controller:s}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new zn(this,n,e)}buildURL(e,t){const n=Kn(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return Yn(r)||(t={...r,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new Jt(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:o,...a}=t||{};o&&o.addEventListener("abort",(()=>r.abort()));const i=setTimeout((()=>r.abort()),n);return this.getRequestClient().fetch.call(void 0,e,{signal:r.signal,...a}).finally((()=>{clearTimeout(i)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n){let r;const o=n?.["retry-after-ms"];if(o){const e=parseFloat(o);Number.isNaN(e)||(r=e)}const a=n?.["retry-after"];if(a&&!r){const e=parseFloat(a);r=Number.isNaN(e)?Date.parse(a)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){const n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await Gn(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Rt}`}}class Bn{constructor(e,t,n,r){An.set(this,void 0),In(this,An,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Jt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await On(this,An,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(An=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class zn extends Fn{constructor(e,t,n){super(t,(async t=>new n(e,t.response,await Pn(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const Nn=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),Ln={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Mn=e=>"object"==typeof e&&null!==e&&!Yn(e)&&Object.keys(e).every((e=>Zn(Ln,e))),Dn=()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rt,"X-Stainless-OS":Un(Deno.build.os),"X-Stainless-Arch":$n(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rt,"X-Stainless-OS":Un(process.platform),"X-Stainless-Arch":$n(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const $n=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",Un=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let Wn;const Hn=()=>Wn??(Wn=Dn()),qn=e=>{try{return JSON.parse(e)}catch(e){return}},Vn=new RegExp("^(?:[a-z]+:)?//","i"),Kn=e=>Vn.test(e),Gn=e=>new Promise((t=>setTimeout(t,e))),Qn=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new Jt(`${e} must be an integer`);if(t<0)throw new Jt(`${e} must be a positive integer`);return t},Jn=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},Xn=e=>"undefined"!=typeof process?process.env?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function Yn(e){if(!e)return!0;for(const t in e)return!1;return!0}function Zn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function er(e,t){for(const n in t){if(!Zn(t,n))continue;const r=n.toLowerCase();if(!r)continue;const o=t[n];null===o?delete e[r]:void 0!==o&&(e[r]=o)}}function tr(e,...t){"undefined"!=typeof process&&"true"===process?.env?.DEBUG&&console.log(`OpenAI:DEBUG:${e}`,...t)}const nr=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),rr=(e,t)=>{const n=t.toLowerCase();if((e=>"function"==typeof e?.get)(e)){const r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,((e,t,n)=>t+n.toUpperCase()));for(const o of[t,n,t.toUpperCase(),r]){const t=e.get(o);if(t)return t}}for(const[r,o]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${t} header, using the first entry.`),o[0]):o};function or(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}class ar{constructor(e){this._client=e}}class ir extends ar{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class sr extends ar{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}}class lr extends ar{constructor(){super(...arguments),this.completions=new sr(this._client)}}lr.Completions=sr;class cr extends ar{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}class ur extends Bn{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class dr extends Bn{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class fr extends ar{create(e,t){return this._client.post("/files",Cn({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return Mn(e)?this.list({},e):this._client.getAPIList("/files",pr,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=18e5}={}){const r=new Set(["processed","error","deleted"]),o=Date.now();let a=await this.retrieve(e);for(;!a.status||!r.has(a.status);)if(await Gn(t),a=await this.retrieve(e),Date.now()-o>n)throw new en({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}}class pr extends dr{}fr.FileObjectsPage=pr;class hr extends ar{createVariation(e,t){return this._client.post("/images/variations",Cn({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Cn({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class gr extends ar{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}class mr extends ar{create(e,t){return this._client.post("/audio/transcriptions",Cn({body:e,...t}))}}class yr extends ar{create(e,t){return this._client.post("/audio/translations",Cn({body:e,...t}))}}class br extends ar{constructor(){super(...arguments),this.transcriptions=new mr(this._client),this.translations=new yr(this._client),this.speech=new gr(this._client)}}br.Transcriptions=mr,br.Translations=yr,br.Speech=gr;class vr extends ar{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class xr extends ar{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",wr,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class wr extends ur{}xr.ModelsPage=wr;class Sr extends ar{list(e,t={},n){return Mn(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,kr,{query:t,...n})}}class kr extends dr{}Sr.FineTuningJobCheckpointsPage=kr;class Er extends ar{constructor(){super(...arguments),this.checkpoints=new Sr(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return Mn(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Cr,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return Mn(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,_r,{query:t,...n})}}class Cr extends dr{}class _r extends dr{}Er.FineTuningJobsPage=Cr,Er.FineTuningJobEventsPage=_r,Er.Checkpoints=Sr,Er.FineTuningJobCheckpointsPage=kr;class jr extends ar{constructor(){super(...arguments),this.jobs=new Er(this._client)}}jr.Jobs=Er,jr.FineTuningJobsPage=Cr,jr.FineTuningJobEventsPage=_r;class Ar extends ar{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return Mn(e)?this.list({},e):this._client.getAPIList("/assistants",Ir,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Ir extends dr{}function Or(e){return"function"==typeof e.parse}Ar.AssistantsPage=Ir;const Pr=e=>"assistant"===e?.role,Tr=e=>"function"===e?.role,Fr=e=>"tool"===e?.role;var Rr,Br,zr,Nr,Lr,Mr,Dr,$r,Ur,Wr,Hr,qr,Vr,Kr=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Gr=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Qr{constructor(){Rr.add(this),this.controller=new AbortController,Br.set(this,void 0),zr.set(this,(()=>{})),Nr.set(this,(()=>{})),Lr.set(this,void 0),Mr.set(this,(()=>{})),Dr.set(this,(()=>{})),$r.set(this,{}),Ur.set(this,!1),Wr.set(this,!1),Hr.set(this,!1),qr.set(this,!1),Kr(this,Br,new Promise(((e,t)=>{Kr(this,zr,e,"f"),Kr(this,Nr,t,"f")})),"f"),Kr(this,Lr,new Promise(((e,t)=>{Kr(this,Mr,e,"f"),Kr(this,Dr,t,"f")})),"f"),Gr(this,Br,"f").catch((()=>{})),Gr(this,Lr,"f").catch((()=>{}))}_run(e){setTimeout((()=>{e().then((()=>{this._emitFinal(),this._emit("end")}),Gr(this,Rr,"m",Vr).bind(this))}),0)}_connected(){this.ended||(Gr(this,zr,"f").call(this),this._emit("connect"))}get ended(){return Gr(this,Ur,"f")}get errored(){return Gr(this,Wr,"f")}get aborted(){return Gr(this,Hr,"f")}abort(){this.controller.abort()}on(e,t){return(Gr(this,$r,"f")[e]||(Gr(this,$r,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=Gr(this,$r,"f")[e];if(!n)return this;const r=n.findIndex((e=>e.listener===t));return r>=0&&n.splice(r,1),this}once(e,t){return(Gr(this,$r,"f")[e]||(Gr(this,$r,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise(((t,n)=>{Kr(this,qr,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)}))}async done(){Kr(this,qr,!0,"f"),await Gr(this,Lr,"f")}_emit(e,...t){if(Gr(this,Ur,"f"))return;"end"===e&&(Kr(this,Ur,!0,"f"),Gr(this,Mr,"f").call(this));const n=Gr(this,$r,"f")[e];if(n&&(Gr(this,$r,"f")[e]=n.filter((e=>!e.once)),n.forEach((({listener:e})=>e(...t)))),"abort"===e){const e=t[0];return Gr(this,qr,"f")||n?.length||Promise.reject(e),Gr(this,Nr,"f").call(this,e),Gr(this,Dr,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];Gr(this,qr,"f")||n?.length||Promise.reject(e),Gr(this,Nr,"f").call(this,e),Gr(this,Dr,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function Jr(e){return"auto-parseable-response-format"===e?.$brand}function Xr(e){return"auto-parseable-tool"===e?.$brand}function Yr(e,t){const n=e.choices.map((e=>{if("length"===e.finish_reason)throw new un;if("content_filter"===e.finish_reason)throw new dn;return{...e,message:{...e.message,tool_calls:e.message.tool_calls?.map((e=>function(e,t){const n=e.tools?.find((e=>e.function?.name===t.function.name));return{...t,function:{...t.function,parsed_arguments:Xr(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e)))??[],parsed:e.message.content&&!e.message.refusal?Zr(t,e.message.content):null}}}));return{...e,choices:n}}function Zr(e,t){if("json_schema"!==e.response_format?.type)return null;if("json_schema"===e.response_format?.type){if("$parseRaw"in e.response_format){return e.response_format.$parseRaw(t)}return JSON.parse(t)}return null}function eo(e,t){if(!e)return!1;const n=e.tools?.find((e=>e.function?.name===t.function.name));return Xr(n)||n?.function.strict||!1}function to(e){return!!Jr(e.response_format)||(e.tools?.some((e=>Xr(e)||"function"===e.type&&!0===e.function.strict))??!1)}Br=new WeakMap,zr=new WeakMap,Nr=new WeakMap,Lr=new WeakMap,Mr=new WeakMap,Dr=new WeakMap,$r=new WeakMap,Ur=new WeakMap,Wr=new WeakMap,Hr=new WeakMap,qr=new WeakMap,Rr=new WeakSet,Vr=function(e){if(Kr(this,Wr,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new Yt),e instanceof Yt)return Kr(this,Hr,!0,"f"),this._emit("abort",e);if(e instanceof Jt)return this._emit("error",e);if(e instanceof Error){const t=new Jt(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Jt(String(e)))};var no,ro,oo,ao,io,so,lo,co,uo=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const fo=10;class po extends Qr{constructor(){super(...arguments),no.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(Tr(e)||Fr(e))&&e.content)this._emit("functionCallResult",e.content);else if(Pr(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Pr(e)&&e.tool_calls)for(const t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Jt("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),uo(this,no,"m",ro).call(this)}async finalMessage(){return await this.done(),uo(this,no,"m",oo).call(this)}async finalFunctionCall(){return await this.done(),uo(this,no,"m",ao).call(this)}async finalFunctionCallResult(){return await this.done(),uo(this,no,"m",io).call(this)}async totalUsage(){return await this.done(),uo(this,no,"m",so).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=uo(this,no,"m",oo).call(this);t&&this._emit("finalMessage",t);const n=uo(this,no,"m",ro).call(this);n&&this._emit("finalContent",n);const r=uo(this,no,"m",ao).call(this);r&&this._emit("finalFunctionCall",r);const o=uo(this,no,"m",io).call(this);null!=o&&this._emit("finalFunctionCallResult",o),this._chatCompletions.some((e=>e.usage))&&this._emit("totalUsage",uo(this,no,"m",so).call(this))}async _createChatCompletion(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),uo(this,no,"m",lo).call(this,t);const o=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Yr(o,t))}async _runChatCompletion(e,t,n){for(const e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const r="function",{function_call:o="auto",stream:a,...i}=t,s="string"!=typeof o&&o?.name,{maxChatCompletions:l=fo}=n||{},c={};for(const e of t.functions)c[e.name||e.function.name]=e;const u=t.functions.map((e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description})));for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){const t=await this._createChatCompletion(e,{...i,function_call:o,functions:u,messages:[...this.messages]},n),a=t.choices[0]?.message;if(!a)throw new Jt("missing message in ChatCompletion response");if(!a.function_call)return;const{name:l,arguments:d}=a.function_call,f=c[l];if(!f){const e=`Invalid function_call: ${JSON.stringify(l)}. Available options are: ${u.map((e=>JSON.stringify(e.name))).join(", ")}. Please try again`;this._addMessage({role:r,name:l,content:e});continue}if(s&&s!==l){const e=`Invalid function_call: ${JSON.stringify(l)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:r,name:l,content:e});continue}let p;try{p=Or(f)?await f.parse(d):d}catch(e){this._addMessage({role:r,name:l,content:e instanceof Error?e.message:String(e)});continue}const h=await f.function(p,this),g=uo(this,no,"m",co).call(this,h);if(this._addMessage({role:r,name:l,content:g}),s)return}}async _runTools(e,t,n){const r="tool",{tool_choice:o="auto",stream:a,...i}=t,s="string"!=typeof o&&o?.function?.name,{maxChatCompletions:l=fo}=n||{},c=t.tools.map((e=>{if(Xr(e)){if(!e.$callback)throw new Jt("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e})),u={};for(const e of c)"function"===e.type&&(u[e.function.name||e.function.function.name]=e.function);const d="tools"in t?c.map((e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e)):void 0;for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){const t=await this._createChatCompletion(e,{...i,tool_choice:o,tools:d,messages:[...this.messages]},n),a=t.choices[0]?.message;if(!a)throw new Jt("missing message in ChatCompletion response");if(!a.tool_calls?.length)return;for(const e of a.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:o}=e.function,a=u[n];if(!a){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map((e=>JSON.stringify(e))).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}if(s&&s!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let i;try{i=Or(a)?await a.parse(o):o}catch(e){const n=e instanceof Error?e.message:String(e);this._addMessage({role:r,tool_call_id:t,content:n});continue}const l=await a.function(i,this),c=uo(this,no,"m",co).call(this,l);if(this._addMessage({role:r,tool_call_id:t,content:c}),s)return}}}}no=new WeakSet,ro=function(){return uo(this,no,"m",oo).call(this).content??null},oo=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Pr(t)){const{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new Jt("stream ended without producing a ChatCompletionMessage with role=assistant")},ao=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Pr(t)&&t?.function_call)return t.function_call;if(Pr(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},io=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Tr(t)&&null!=t.content)return t.content;if(Fr(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some((e=>"assistant"===e.role&&e.tool_calls?.some((e=>"function"===e.type&&e.id===t.tool_call_id)))))return t.content}},so=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},lo=function(e){if(null!=e.n&&e.n>1)throw new Jt("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},co=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class ho extends po{static runFunctions(e,t,n){const r=new ho,o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run((()=>r._runFunctions(e,t,o))),r}static runTools(e,t,n){const r=new ho,o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run((()=>r._runTools(e,t,o))),r}_addMessage(e,t=!0){super._addMessage(e,t),Pr(e)&&e.content&&this._emit("content",e.content)}}const go=1,mo=2,yo=4,bo=8,vo=16,xo=32,wo=64,So=128,ko=256,Eo=511;class Co extends Error{}class _o extends Error{}const jo=(e,t)=>{const n=e.length;let r=0;const o=e=>{throw new Co(`${e} at position ${r}`)},a=e=>{throw new _o(`${e} at position ${r}`)},i=()=>(d(),r>=n&&o("Unexpected end of input"),'"'===e[r]?s():"{"===e[r]?l():"["===e[r]?c():"null"===e.substring(r,r+4)||vo&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):"true"===e.substring(r,r+4)||xo&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):"false"===e.substring(r,r+5)||xo&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):"Infinity"===e.substring(r,r+8)||So&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):"-Infinity"===e.substring(r,r+9)||ko&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):"NaN"===e.substring(r,r+3)||wo&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):u()),s=()=>{const i=r;let s=!1;for(r++;r<n&&('"'!==e[r]||s&&"\\"===e[r-1]);)s="\\"===e[r]&&!s,r++;if('"'==e.charAt(r))try{return JSON.parse(e.substring(i,++r-Number(s)))}catch(e){a(String(e))}else if(go&t)try{return JSON.parse(e.substring(i,r-Number(s))+'"')}catch(t){return JSON.parse(e.substring(i,e.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},l=()=>{r++,d();const a={};try{for(;"}"!==e[r];){if(d(),r>=n&&bo&t)return a;const o=s();d(),r++;try{const e=i();Object.defineProperty(a,o,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(bo&t)return a;throw e}d(),","===e[r]&&r++}}catch(e){if(bo&t)return a;o("Expected '}' at end of object")}return r++,a},c=()=>{r++;const n=[];try{for(;"]"!==e[r];)n.push(i()),d(),","===e[r]&&r++}catch(e){if(yo&t)return n;o("Expected ']' at end of array")}return r++,n},u=()=>{if(0===r){"-"===e&&mo&t&&o("Not sure what '-' is");try{return JSON.parse(e)}catch(n){if(mo&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}a(String(n))}}const i=r;for("-"===e[r]&&r++;e[r]&&!",]}".includes(e[r]);)r++;r!=n||mo&t||o("Unterminated number literal");try{return JSON.parse(e.substring(i,r))}catch(n){"-"===e.substring(i,r)&&mo&t&&o("Not sure what '-' is");try{return JSON.parse(e.substring(i,e.lastIndexOf("e")))}catch(e){a(String(e))}}},d=()=>{for(;r<n&&" \n\r\t".includes(e[r]);)r++};return i()},Ao=e=>function(e,t=Eo){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return jo(e.trim(),t)}(e,Eo^mo);var Io,Oo,Po,To,Fo,Ro,Bo,zo,No,Lo,Mo,Do,$o=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Uo=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Wo extends po{constructor(e){super(),Io.add(this),Oo.set(this,void 0),Po.set(this,void 0),To.set(this,void 0),$o(this,Oo,e,"f"),$o(this,Po,[],"f")}get currentChatCompletionSnapshot(){return Uo(this,To,"f")}static fromReadableStream(e){const t=new Wo(null);return t._run((()=>t._fromReadableStream(e))),t}static createChatCompletion(e,t,n){const r=new Wo(t);return r._run((()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}}))),r}async _createChatCompletion(e,t,n){super._createChatCompletion;const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),Uo(this,Io,"m",Fo).call(this);const o=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const e of o)Uo(this,Io,"m",Bo).call(this,e);if(o.controller.signal?.aborted)throw new Yt;return this._addChatCompletion(Uo(this,Io,"m",Lo).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),Uo(this,Io,"m",Fo).call(this),this._connected();const r=pn.fromReadableStream(e,this.controller);let o;for await(const e of r)o&&o!==e.id&&this._addChatCompletion(Uo(this,Io,"m",Lo).call(this)),Uo(this,Io,"m",Bo).call(this,e),o=e.id;if(r.controller.signal?.aborted)throw new Yt;return this._addChatCompletion(Uo(this,Io,"m",Lo).call(this))}[(Oo=new WeakMap,Po=new WeakMap,To=new WeakMap,Io=new WeakSet,Fo=function(){this.ended||$o(this,To,void 0,"f")},Ro=function(e){let t=Uo(this,Po,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Uo(this,Po,"f")[e.index]=t,t)},Bo=function(e){if(this.ended)return;const t=Uo(this,Io,"m",Do).call(this,e);this._emit("chunk",e,t);for(const n of e.choices){const e=t.choices[n.index];null!=n.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),null!=n.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=n.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const r=Uo(this,Io,"m",Ro).call(this,e);e.finish_reason&&(Uo(this,Io,"m",No).call(this,e),null!=r.current_tool_call_index&&Uo(this,Io,"m",zo).call(this,e,r.current_tool_call_index));for(const t of n.delta.tool_calls??[])r.current_tool_call_index!==t.index&&(Uo(this,Io,"m",No).call(this,e),null!=r.current_tool_call_index&&Uo(this,Io,"m",zo).call(this,e,r.current_tool_call_index)),r.current_tool_call_index=t.index;for(const t of n.delta.tool_calls??[]){const n=e.message.tool_calls?.[t.index];n?.type&&("function"===n?.type&&this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""}))}}},zo=function(e,t){if(Uo(this,Io,"m",Ro).call(this,e).done_tool_calls.has(t))return;const n=e.message.tool_calls?.[t];if(!n)throw new Error("no tool call snapshot");if(!n.type)throw new Error("tool call snapshot missing `type`");if("function"===n.type){const e=Uo(this,Oo,"f")?.tools?.find((e=>"function"===e.type&&e.function.name===n.function.name));this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:Xr(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},No=function(e){const t=Uo(this,Io,"m",Ro).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const n=Uo(this,Io,"m",Mo).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},Lo=function(){if(this.ended)throw new Jt("stream has ended, this shouldn't happen");const e=Uo(this,To,"f");if(!e)throw new Jt("request ended without sending any chunks");return $o(this,To,void 0,"f"),$o(this,Po,[],"f"),function(e,t){const{id:n,choices:r,created:o,model:a,system_fingerprint:i,...s}=e,l={...s,id:n,choices:r.map((({message:t,finish_reason:n,index:r,logprobs:o,...a})=>{if(!n)throw new Jt(`missing finish_reason for choice ${r}`);const{content:i=null,function_call:s,tool_calls:l,...c}=t,u=t.role;if(!u)throw new Jt(`missing role for choice ${r}`);if(s){const{arguments:e,name:l}=s;if(null==e)throw new Jt(`missing function_call.arguments for choice ${r}`);if(!l)throw new Jt(`missing function_call.name for choice ${r}`);return{...a,message:{content:i,function_call:{arguments:e,name:l},role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:o}}return l?{...a,index:r,finish_reason:n,logprobs:o,message:{...c,role:u,content:i,refusal:t.refusal??null,tool_calls:l.map(((t,n)=>{const{function:o,type:a,id:i,...s}=t,{arguments:l,name:c,...u}=o||{};if(null==i)throw new Jt(`missing choices[${r}].tool_calls[${n}].id\n${Ho(e)}`);if(null==a)throw new Jt(`missing choices[${r}].tool_calls[${n}].type\n${Ho(e)}`);if(null==c)throw new Jt(`missing choices[${r}].tool_calls[${n}].function.name\n${Ho(e)}`);if(null==l)throw new Jt(`missing choices[${r}].tool_calls[${n}].function.arguments\n${Ho(e)}`);return{...s,id:i,type:a,function:{...u,name:c,arguments:l}}}))}}:{...a,message:{...c,content:i,role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:o}})),created:o,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return function(e,t){return t&&to(t)?Yr(e,t):{...e,choices:e.choices.map((e=>({...e,message:{...e.message,parsed:null,tool_calls:e.message.tool_calls??[]}})))}}(l,t)}(e,Uo(this,Oo,"f"))},Mo=function(){const e=Uo(this,Oo,"f")?.response_format;return Jr(e)?e:null},Do=function(e){var t,n,r,o;let a=Uo(this,To,"f");const{choices:i,...s}=e;a?Object.assign(a,s):a=$o(this,To,{...s,choices:[]},"f");for(const{delta:i,finish_reason:s,index:l,logprobs:c=null,...u}of e.choices){let e=a.choices[l];if(e||(e=a.choices[l]={finish_reason:s,index:l,message:{},logprobs:c,...u}),c)if(e.logprobs){const{content:r,refusal:o,...a}=c;Object.assign(e.logprobs,a),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),o&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...o))}else e.logprobs=Object.assign({},c);if(s&&(e.finish_reason=s,Uo(this,Oo,"f")&&to(Uo(this,Oo,"f")))){if("length"===s)throw new un;if("content_filter"===s)throw new dn}if(Object.assign(e,u),!i)continue;const{content:d,refusal:f,function_call:p,role:h,tool_calls:g,...m}=i;if(Object.assign(e.message,m),f&&(e.message.refusal=(e.message.refusal||"")+f),h&&(e.message.role=h),p&&(e.message.function_call?(p.name&&(e.message.function_call.name=p.name),p.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=p.arguments)):e.message.function_call=p),d&&(e.message.content=(e.message.content||"")+d,!e.message.refusal&&Uo(this,Io,"m",Mo).call(this)&&(e.message.parsed=Ao(e.message.content))),g){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:a,...i}of g){const s=(o=e.message.tool_calls)[t]??(o[t]={});Object.assign(s,i),n&&(s.id=n),r&&(s.type=r),a&&(s.function??(s.function={name:a.name??"",arguments:""})),a?.name&&(s.function.name=a.name),a?.arguments&&(s.function.arguments+=a.arguments,eo(Uo(this,Oo,"f"),s)&&(s.function.parsed_arguments=Ao(s.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",(n=>{const r=t.shift();r?r.resolve(n):e.push(n)})),this.on("end",(()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0})),this.on("abort",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),this.on("error",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise(((e,n)=>t.push({resolve:e,reject:n}))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0}));return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new pn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Ho(e){return JSON.stringify(e)}class qo extends Wo{static fromReadableStream(e){const t=new qo(null);return t._run((()=>t._fromReadableStream(e))),t}static runFunctions(e,t,n){const r=new qo(null),o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run((()=>r._runFunctions(e,t,o))),r}static runTools(e,t,n){const r=new qo(t),o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run((()=>r._runTools(e,t,o))),r}}class Vo extends ar{parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new Jt(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new Jt(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap((t=>Yr(t,e)))}runFunctions(e,t){return e.stream?qo.runFunctions(this._client,e,t):ho.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?qo.runTools(this._client,e,t):ho.runTools(this._client,e,t)}stream(e,t){return Wo.createChatCompletion(this._client,e,t)}}class Ko extends ar{constructor(){super(...arguments),this.completions=new Vo(this._client)}}!function(e){e.Completions=Vo}(Ko||(Ko={}));var Go,Qo,Jo,Xo,Yo,Zo,ea,ta,na,ra,oa,aa,ia,sa,la,ca,ua,da,fa,pa,ha,ga,ma=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ya=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n};class ba extends Qr{constructor(){super(...arguments),Go.add(this),Qo.set(this,[]),Jo.set(this,{}),Xo.set(this,{}),Yo.set(this,void 0),Zo.set(this,void 0),ea.set(this,void 0),ta.set(this,void 0),na.set(this,void 0),ra.set(this,void 0),oa.set(this,void 0),aa.set(this,void 0),ia.set(this,void 0)}[(Qo=new WeakMap,Jo=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Zo=new WeakMap,ea=new WeakMap,ta=new WeakMap,na=new WeakMap,ra=new WeakMap,oa=new WeakMap,aa=new WeakMap,ia=new WeakMap,Go=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",(n=>{const r=t.shift();r?r.resolve(n):e.push(n)})),this.on("end",(()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0})),this.on("abort",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),this.on("error",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise(((e,n)=>t.push({resolve:e,reject:n}))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0}));return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new ba;return t._run((()=>t._fromReadableStream(e))),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),this._connected();const r=pn.fromReadableStream(e,this.controller);for await(const e of r)ma(this,Go,"m",sa).call(this,e);if(r.controller.signal?.aborted)throw new Yt;return this._addRun(ma(this,Go,"m",la).call(this))}toReadableStream(){return new pn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,o){const a=new ba;return a._run((()=>a._runToolAssistantStream(e,t,n,r,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}}))),a}async _createToolAssistantStream(e,t,n,r,o){const a=o?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",(()=>this.controller.abort())));const i={...r,stream:!0},s=await e.submitToolOutputs(t,n,i,{...o,signal:this.controller.signal});this._connected();for await(const e of s)ma(this,Go,"m",sa).call(this,e);if(s.controller.signal?.aborted)throw new Yt;return this._addRun(ma(this,Go,"m",la).call(this))}static createThreadAssistantStream(e,t,n){const r=new ba;return r._run((()=>r._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}}))),r}static createAssistantStream(e,t,n,r){const o=new ba;return o._run((()=>o._runAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}}))),o}currentEvent(){return ma(this,oa,"f")}currentRun(){return ma(this,aa,"f")}currentMessageSnapshot(){return ma(this,Yo,"f")}currentRunStepSnapshot(){return ma(this,ia,"f")}async finalRunSteps(){return await this.done(),Object.values(ma(this,Jo,"f"))}async finalMessages(){return await this.done(),Object.values(ma(this,Xo,"f"))}async finalRun(){if(await this.done(),!ma(this,Zo,"f"))throw Error("Final run was not received.");return ma(this,Zo,"f")}async _createThreadAssistantStream(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort())));const o={...t,stream:!0},a=await e.createAndRun(o,{...n,signal:this.controller.signal});this._connected();for await(const e of a)ma(this,Go,"m",sa).call(this,e);if(a.controller.signal?.aborted)throw new Yt;return this._addRun(ma(this,Go,"m",la).call(this))}async _createAssistantStream(e,t,n,r){const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",(()=>this.controller.abort())));const a={...n,stream:!0},i=await e.create(t,a,{...r,signal:this.controller.signal});this._connected();for await(const e of i)ma(this,Go,"m",sa).call(this,e);if(i.controller.signal?.aborted)throw new Yt;return this._addRun(ma(this,Go,"m",la).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!=t)if("index"!==n&&"type"!==n){if("string"==typeof t&&"string"==typeof r)t+=r;else if("number"==typeof t&&"number"==typeof r)t+=r;else{if(!or(t)||!or(r)){if(Array.isArray(t)&&Array.isArray(r)){if(t.every((e=>"string"==typeof e||"number"==typeof e))){t.push(...r);continue}for(const e of r){if(!or(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`)}t=this.accumulateDelta(t,r)}e[n]=t}else e[n]=r;else e[n]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,o){return await this._createToolAssistantStream(n,e,t,r,o)}}sa=function(e){if(!this.ended)switch(ya(this,oa,e,"f"),ma(this,Go,"m",da).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ma(this,Go,"m",ga).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ma(this,Go,"m",ua).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ma(this,Go,"m",ca).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},la=function(){if(this.ended)throw new Jt("stream has ended, this shouldn't happen");if(!ma(this,Zo,"f"))throw Error("Final run has not been received");return ma(this,Zo,"f")},ca=function(e){const[t,n]=ma(this,Go,"m",pa).call(this,e,ma(this,Yo,"f"));ya(this,Yo,t,"f"),ma(this,Xo,"f")[t.id]=t;for(const e of n){const n=t.content[e.index];"text"==n?.type&&this._emit("textCreated",n.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=ma(this,ea,"f")){if(ma(this,ta,"f"))switch(ma(this,ta,"f").type){case"text":this._emit("textDone",ma(this,ta,"f").text,ma(this,Yo,"f"));break;case"image_file":this._emit("imageFileDone",ma(this,ta,"f").image_file,ma(this,Yo,"f"))}ya(this,ea,n.index,"f")}ya(this,ta,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==ma(this,ea,"f")){const t=e.data.content[ma(this,ea,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,ma(this,Yo,"f"));break;case"text":this._emit("textDone",t.text,ma(this,Yo,"f"))}}ma(this,Yo,"f")&&this._emit("messageDone",e.data),ya(this,Yo,void 0,"f")}},ua=function(e){const t=ma(this,Go,"m",fa).call(this,e);switch(ya(this,ia,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==ma(this,na,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(ma(this,ra,"f")&&this._emit("toolCallDone",ma(this,ra,"f")),ya(this,na,e.index,"f"),ya(this,ra,t.step_details.tool_calls[e.index],"f"),ma(this,ra,"f")&&this._emit("toolCallCreated",ma(this,ra,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ya(this,ia,void 0,"f");"tool_calls"==e.data.step_details.type&&ma(this,ra,"f")&&(this._emit("toolCallDone",ma(this,ra,"f")),ya(this,ra,void 0,"f")),this._emit("runStepDone",e.data,t)}},da=function(e){ma(this,Qo,"f").push(e),this._emit("event",e)},fa=function(e){switch(e.event){case"thread.run.step.created":return ma(this,Jo,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=ma(this,Jo,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=ba.accumulateDelta(t,n.delta);ma(this,Jo,"f")[e.data.id]=r}return ma(this,Jo,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ma(this,Jo,"f")[e.data.id]=e.data}if(ma(this,Jo,"f")[e.data.id])return ma(this,Jo,"f")[e.data.id];throw new Error("No snapshot available")},pa=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=ma(this,Go,"m",ha).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ha=function(e,t){return ba.accumulateDelta(t,e)},ga=function(e){switch(ya(this,aa,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":ya(this,Zo,e.data,"f"),ma(this,ra,"f")&&(this._emit("toolCallDone",ma(this,ra,"f")),ya(this,ra,void 0,"f"))}};class va extends ar{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return Mn(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,xa,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class xa extends dr{}va.MessagesPage=xa;class wa extends ar{retrieve(e,t,n,r={},o){return Mn(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}list(e,t,n={},r){return Mn(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Sa,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Sa extends dr{}wa.RunStepsPage=Sa;class ka extends ar{constructor(){super(...arguments),this.steps=new wa(this._client)}create(e,t,n){const{include:r,...o}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:o,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return Mn(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Ea,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return ba.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:o,response:a}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=a.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Gn(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,t,n){return ba.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const o=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,o.id,r)}submitToolOutputsStream(e,t,n,r){return ba.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class Ea extends dr{}ka.RunsPage=Ea,ka.Steps=wa,ka.RunStepsPage=Sa;class Ca extends ar{constructor(){super(...arguments),this.runs=new ka(this._client),this.messages=new va(this._client)}create(e={},t){return Mn(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return ba.createThreadAssistantStream(e,this._client.beta.threads,t)}}Ca.Runs=ka,Ca.RunsPage=Ea,Ca.Messages=va,Ca.MessagesPage=xa;class _a extends ar{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},n){return Mn(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,ja,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const o=await this.retrieve(e,t,{...n,headers:r}).withResponse(),a=o.data;switch(a.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Gn(e);break;case"failed":case"completed":return a}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}}class ja extends dr{}_a.VectorStoreFilesPage=ja;class Aa extends ar{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return Mn(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,ja,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:o,response:a}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(o.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=a.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Gn(e);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=r?.maxConcurrency??5,a=Math.min(o,t.length),i=this._client,s=t.values(),l=[...n];const c=Array(a).fill(s).map((async function(e){for(let t of e){const e=await i.files.create({file:t,purpose:"assistants"},r);l.push(e.id)}}));return await(async e=>{const t=await Promise.allSettled(e),n=t.filter((e=>"rejected"===e.status));if(n.length){for(const e of n)console.error(e.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const e of t)"fulfilled"===e.status&&r.push(e.value);return r})(c),await this.createAndPoll(e,{file_ids:l})}}class Ia extends ar{constructor(){super(...arguments),this.files=new _a(this._client),this.fileBatches=new Aa(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return Mn(e)?this.list({},e):this._client.getAPIList("/vector_stores",Oa,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Oa extends dr{}Ia.VectorStoresPage=Oa,Ia.Files=_a,Ia.VectorStoreFilesPage=ja,Ia.FileBatches=Aa;class Pa extends ar{constructor(){super(...arguments),this.vectorStores=new Ia(this._client),this.chat=new Ko(this._client),this.assistants=new Ar(this._client),this.threads=new Ca(this._client)}}Pa.VectorStores=Ia,Pa.VectorStoresPage=Oa,Pa.Assistants=Ar,Pa.AssistantsPage=Ir,Pa.Threads=Ca;class Ta extends ar{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return Mn(e)?this.list({},e):this._client.getAPIList("/batches",Fa,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Fa extends dr{}Ta.BatchesPage=Fa;class Ra extends ar{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,Cn({body:t,...n}))}}class Ba extends ar{constructor(){super(...arguments),this.parts=new Ra(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}var za;Ba.Parts=Ra;class Na extends Rn{constructor({baseURL:e=Xn("OPENAI_BASE_URL"),apiKey:t=Xn("OPENAI_API_KEY"),organization:n=Xn("OPENAI_ORG_ID")??null,project:r=Xn("OPENAI_PROJECT_ID")??null,...o}={}){if(void 0===t)throw new Jt("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:t,organization:n,project:r,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new Jt("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new ir(this),this.chat=new lr(this),this.embeddings=new cr(this),this.files=new fr(this),this.images=new hr(this),this.audio=new br(this),this.moderations=new vr(this),this.models=new xr(this),this.fineTuning=new jr(this),this.beta=new Pa(this),this.batches=new Ta(this),this.uploads=new Ba(this),this._options=a,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Ft(e,{arrayFormat:"brackets"})}}za=Na,Na.OpenAI=za,Na.DEFAULT_TIMEOUT=6e5,Na.OpenAIError=Jt,Na.APIError=Xt,Na.APIConnectionError=Zt,Na.APIConnectionTimeoutError=en,Na.APIUserAbortError=Yt,Na.NotFoundError=on,Na.ConflictError=an,Na.RateLimitError=ln,Na.BadRequestError=tn,Na.AuthenticationError=nn,Na.InternalServerError=cn,Na.PermissionDeniedError=rn,Na.UnprocessableEntityError=sn,Na.toFile=wn,Na.fileFromPath=Ut;Na.Completions=ir,Na.Chat=lr,Na.Embeddings=cr,Na.Files=fr,Na.FileObjectsPage=pr,Na.Images=hr,Na.Audio=br,Na.Moderations=vr,Na.Models=xr,Na.ModelsPage=wr,Na.FineTuning=jr,Na.Beta=Pa,Na.Batches=Ta,Na.BatchesPage=Fa,Na.Uploads=Ba;new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations"]);var La,Ma=function(e){if(!e)return"Unknown error";if(e.error){if("string"==typeof e.error)return e.error;if(e.error.message)return e.error.message;if(e.error.type)return"Error type: ".concat(e.error.type)}if(e.message)return e.message;try{return JSON.stringify(e)}catch(e){return"Unable to parse error details"}},Da=function(){return Da=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Da.apply(this,arguments)};!function(e){e.OpenAI="openai",e.HuggingFace="huggingface",e.Groq="groq",e.Local="local"}(La||(La={}));var $a,Ua={openAiKey:"",mode:A.LanguageLearning,translateToLanguage:"ru",ankiConnectUrl:"http://127.0.0.1:8765",ankiConnectApiKey:null,useAnkiConnect:!1,visibleSideBar:!0,huggingFaceApiKey:"",groqApiKey:"",groqModelName:"llama3-8b-8192",shouldGenerateImage:!0,translationPrompt:"",examplesPrompt:"",aiInstructions:"",imageInstructions:"",modelProvider:La.OpenAI},Wa=($a=function(e,t){return $a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},$a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}$a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ha=function(){return Ha=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ha.apply(this,arguments)},qa=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Va=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Ka=function(){function e(e,t){void 0===t&&(t=""),this.apiKey=e,this.modelName=t}return e.prototype.extractPlainText=function(e){if(!e)return null;var t=e.replace(/<\/?[^>]+(>|$)/g,"");return t=t.replace(/^#+\s+/gm,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/\[(.*?)\]\((.*?)\)/g,"$1").trim()},e.prototype.getPrompts=function(){return{translate:function(e,t){return"Translate the following text to ".concat(t,': "').concat(e,'". \nOutput ONLY the direct translation, without any additional text, explanations, quotes, examples, or formatting.\nDo not include any examples or sentences. Just return the translation of the word in a single line.\nDo not include definitions, examples, notes, or part of speech information. Only provide the translated word or phrase.')},examples:function(e){return"Give me exactly three example sentences using the word '".concat(e,"' in English.\nEach sentence should show natural usage of '").concat(e,"'.\nFormat your response as follows:\n1. [First example sentence here]\n2. [Second example sentence here]\n3. [Third example sentence here]\nDo not include definitions, explanations, or translations, ONLY the numbered example sentences as shown above.")},imageDescription:function(e){return'Create a short visual description of the word/concept "'.concat(e,'" for image generation.\nThe description should be concrete, visual, and focus on representational elements.\nKeep the description under 50 words and make sure it is purely descriptive without any formatting.')}}},e.prototype.translateText=function(e,t,n){return void 0===t&&(t="ru"),void 0===n&&(n=""),qa(this,void 0,void 0,(function(){var r,o,a,i,s,l,c;return Va(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),r=this.getPrompts().translate(e,t),o=n?"".concat(r,". ").concat(n):r,[4,this.sendRequest(o)];case 1:return(a=u.sent())?(i=this.extractPlainText(a))&&(i=i.replace(/^translation[:\s-]*/i,"").replace(/^["']|["']$/g,"").replace(/^.*?:\s*/i,"").replace(/^\s*-\s*/,"").replace(/^translated\s*as\s*:?\s*/i,"").replace(/^\s*:?\s*/i,"").replace(/\s*definition:[\s\S]*$/i,"").replace(/\s*examples:[\s\S]*$/i,"").replace(/\s*example:[\s\S]*$/i,"").replace(/\s*example sentences:[\s\S]*$/i,"").replace(/\s*:[\s\S]*$/i,"").replace(/\s*:[\s\S]*$/i,"").replace(/\s*notes:[\s\S]*$/i,"").replace(/\s*:[\s\S]*$/i,"").replace(/\s*here is the response[\s\S]*$/i,"").replace(/\s*\(adjective\)[\s\S]*$/i,"").replace(/\s*\(noun\)[\s\S]*$/i,"").replace(/\s*\(verb\)[\s\S]*$/i,"").replace(/^the word[\s\S]*translated as[\s:]*/i,"").replace(/^[\s\S]* [\s:]*/i,"").replace(/^[\s\S]* [\s:]*/i,"").replace(/^.*?[\s:]*/i,"").replace(/^.*?[\s:]*/i,"").replace(/^.*?means[\s:]*/i,"").replace(/^the translation is[\s:]*/i,"").split("\n")[0].trim(),(s=i.split(/\s+/)).length>5&&((l=e.split(/\s+/).length)<=3||s.length<=l+2||(console.log("Translation too long, trimming:",i),i=s.slice(0,5).join(" "))),!i&&a)?[2,a.split("\n")[0].trim()]:(console.log("Original translation:",a),console.log("Cleaned translation:",i),[2,i]):[2,null];case 2:throw c=u.sent(),console.error("Error during translation:",c),c;case 3:return[2]}}))}))},e.prototype.getExamples=function(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=""),qa(this,void 0,void 0,(function(){var o,a,i,s,l,c,u,d,f,p,h,g,m,y,b;return Va(this,(function(v){switch(v.label){case 0:return v.trys.push([0,9,,10]),o=this.getPrompts().examples(e),a=r?"".concat(o," ").concat(r.replace(/\{word\}/g,e)):o,[4,this.sendRequest(a)];case 1:if(!(i=v.sent()))throw new Error("Failed to generate examples. Please try again with a different word.");for(console.log("Raw examples response:",i),s=this.extractPlainText(i)||"",l=s.replace(/^[\s\S]*?((?:\d+\s*\.\s*|\s*|[\-\*]\s*).+$)/m,"$1").trim(),c=/(?:^|\n)(?:\d+\s*\.\s*|\s*|[\-\*]\s*)(.+?)(?=(?:\n+(?:\d+\s*\.\s*|\s*|[\-\*]\s*)|\n*$))/g,u=[],d=void 0;null!==(d=c.exec(l));)d[1]&&u.push(d[1].trim());0===u.length&&(u=l.split(/\n+/).map((function(e){return e.replace(/^\d+\s*\.\s*|^\s*\s*|^\s*[\-\*]\s*/,"").trim()})).filter((function(t){return t.length>0&&t.toLowerCase().includes(e.toLowerCase())})).slice(0,3)),0===u.length&&(u=l.split(/\n+/).map((function(e){return e.replace(/^\d+\s*\.\s*|^\s*\s*|^\s*[\-\*]\s*/,"").trim()})).filter((function(e){return e.length>0})).slice(0,3)),u=u.map((function(e){return e.replace(/^(example|sentence||)[\s:]*/i,"").replace(/^["']|["']$/g,"")})),console.log("Processed examples:",u),f=[],p=0,h=u,v.label=2;case 2:if(!(p<h.length))return[3,8];if(!(g=h[p]).trim())return[3,7];if(m=null,!n)return[3,6];v.label=3;case 3:return v.trys.push([3,5,,6]),[4,this.translateText(g,t)];case 4:return m=v.sent(),[3,6];case 5:return y=v.sent(),console.error("Error translating example:",y),[3,6];case 6:if(f.push([g,m]),f.length>=3)return[3,8];v.label=7;case 7:return p++,[3,2];case 8:if(0===f.length)throw new Error("Could not generate examples. Please try again with a different word or check your API key.");return[2,f];case 9:throw b=v.sent(),console.error("Error getting examples:",b),b;case 10:return[2]}}))}))},e.prototype.getDescriptionImage=function(e,t){return void 0===t&&(t=""),qa(this,void 0,void 0,(function(){var n,r,o,a;return Va(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=this.getPrompts().imageDescription(e),r=t?"".concat(n," ").concat(t):n,[4,this.sendRequest(r)];case 1:if(!(o=i.sent()))throw new Error("Failed to generate image description. Please try again.");return[2,this.extractPlainText(o)||o];case 2:throw a=i.sent(),console.error("Error generating image description:",a),a;case 3:return[2]}}))}))},e.prototype.generateAnkiFront=function(e){return qa(this,void 0,void 0,(function(){var t,n,r,o;return Va(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),t='For the word or phrase "'.concat(e,'", provide ONLY the word itself and its pronunciation in IPA format.\nFormat as: word (part of speech) /pronunciation/\nFor example: "run (verb) /rn/"\nYour response should contain ONLY this formatted text, WITHOUT any additional information.'),[4,this.sendRequest(t)];case 1:return(n=a.sent())?(r=(r=this.extractPlainText(n)||n).split("\n")[0].replace(/^["']|["']$/g,"").replace(/^front:[\s:]*/i,"").replace(/^word:[\s:]*/i,"").trim(),console.log("Front card response:",r),[2,r]):[2,null];case 2:throw o=a.sent(),console.error("Error generating Anki front:",o),o;case 3:return[2]}}))}))},e}(),Ga=function(e){function t(t,n){void 0===n&&(n="gpt-3.5-turbo");var r=e.call(this,t,n)||this;return r.openai=new Na({apiKey:t,dangerouslyAllowBrowser:!0}),r}return Wa(t,e),t.prototype.sendRequest=function(e,t){var n,r,o;return void 0===t&&(t={}),qa(this,void 0,void 0,(function(){var a,i;return Va(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.openai.chat.completions.create(Ha({model:this.modelName,messages:[{role:"user",content:e}]},t))];case 1:return a=s.sent(),[2,(null===(o=null===(r=null===(n=a.choices[0])||void 0===n?void 0:n.message)||void 0===r?void 0:r.content)||void 0===o?void 0:o.trim())||null];case 2:throw i=s.sent(),console.error("Error in OpenAI request:",i),i;case 3:return[2]}}))}))},t.prototype.getImageUrl=function(e){var t;return qa(this,void 0,void 0,(function(){var n,r;return Va(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.openai.images.generate({model:"dall-e-3",prompt:e,n:1,size:"1024x1024"})];case 1:return n=o.sent(),[2,(null===(t=n.data[0])||void 0===t?void 0:t.url)||null];case 2:throw r=o.sent(),console.error("Error generating image with OpenAI:",r),r;case 3:return[2]}}))}))},t}(Ka),Qa=function(e){function t(t,n){void 0===n&&(n="llama3-8b-8192");var r=e.call(this,t,n)||this;return r.apiBaseUrl="https://api.groq.com/openai/v1",r}return Wa(t,e),t.prototype.sendRequest=function(e,t){var n,r,o,a,i;return void 0===t&&(t={}),qa(this,void 0,void 0,(function(){var s,l,c,u;return Va(this,(function(d){switch(d.label){case 0:if(d.trys.push([0,5,,6]),!this.apiKey)throw new Error("Groq API key is missing. Please check your settings.");return[4,fetch("".concat(this.apiBaseUrl,"/chat/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({model:this.modelName,messages:[{role:"user",content:e}],max_tokens:t.max_tokens||1e3})})];case 1:return(s=d.sent()).ok?[3,3]:[4,s.json()];case 2:throw l=d.sent(),new Error(function(e,t,n){var r="".concat(e," - ");return r+(401===t?"Authentication error. Please check your API key.":429===t?"Rate limit exceeded. Please try again later.":500===t||503===t?"Service unavailable. The model might be overloaded or offline.":400===t?"Bad request. The input may be invalid.":"Error code ".concat(t,". ").concat(Ma(n)))}("Groq API Error",s.status,l));case 3:return[4,s.json()];case 4:return c=d.sent(),[2,null!==(i=null===(a=null===(o=null===(r=null===(n=c.choices)||void 0===n?void 0:n[0])||void 0===r?void 0:r.message)||void 0===o?void 0:o.content)||void 0===a?void 0:a.trim())&&void 0!==i?i:null];case 5:throw u=d.sent(),console.error("Error in Groq API request:",u),u;case 6:return[2]}}))}))},t}(Ka),Ja=function(e){function t(t,n){void 0===n&&(n="mistralai/Mistral-7B-Instruct-v0.2");var r=e.call(this,t,n)||this;return r.apiBaseUrl="https://api-inference.huggingface.co/models",r}return Wa(t,e),t.prototype.sendRequest=function(e,t){var n,r,o;return void 0===t&&(t={}),qa(this,void 0,void 0,(function(){var a,i,s;return Va(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,fetch("".concat(this.apiBaseUrl,"/").concat(this.modelName),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify(Ha({inputs:e},t))})];case 1:if(!(a=l.sent()).ok)throw new Error("HuggingFace API error: ".concat(a.status," ").concat(a.statusText));return[4,a.json()];case 2:return i=l.sent(),Array.isArray(i)&&i.length>0?[2,null!==(o=null===(r=null===(n=i[0])||void 0===n?void 0:n.generated_text)||void 0===r?void 0:r.trim())&&void 0!==o?o:null]:[2,null];case 3:throw s=l.sent(),console.error("Error in HuggingFace API request:",s),s;case 4:return[2]}}))}))},t.prototype.getImageUrl=function(e){return qa(this,void 0,void 0,(function(){var t,n,r;return Va(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fetch("".concat(this.apiBaseUrl,"/").concat("stabilityai/stable-diffusion-2"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({inputs:e})})];case 1:if(!(t=o.sent()).ok)throw new Error("HuggingFace image generation error: ".concat(t.status," ").concat(t.statusText));return[4,t.blob()];case 2:return n=o.sent(),[2,URL.createObjectURL(n)];case 3:throw r=o.sent(),console.error("Error generating image with HuggingFace:",r),r;case 4:return[2]}}))}))},t}(Ka),Xa=function(e){function t(t,n){return void 0===n&&(n="llama2"),e.call(this,t,n)||this}return Wa(t,e),t.prototype.sendRequest=function(e,t){var n,r;return void 0===t&&(t={}),qa(this,void 0,void 0,(function(){var o,a,i,s;return Va(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),o=this.apiKey,[4,fetch("".concat(o,"/api/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ha({model:this.modelName,prompt:e},t))})];case 1:if(!(a=l.sent()).ok)throw new Error("Local model error: ".concat(a.status," ").concat(a.statusText));return[4,a.json()];case 2:return i=l.sent(),[2,null!==(r=null===(n=i.response)||void 0===n?void 0:n.trim())&&void 0!==r?r:null];case 3:throw s=l.sent(),console.error("Error in local model request:",s),s;case 4:return[2]}}))}))},t}(Ka),Ya=function(e,t,n){switch(void 0===n&&(n=""),e){case La.OpenAI:return new Ga(t,n||"gpt-3.5-turbo");case La.Groq:return new Qa(t,n||"llama3-8b-8192");case La.HuggingFace:return new Ja(t,n||"mistralai/Mistral-7B-Instruct-v0.2");case La.Local:return new Xa(t,n||"llama2");default:return new Ga(t,n||"gpt-3.5-turbo")}},Za=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},ei=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function ti(e,t,n,r,o){var a;return void 0===o&&(o=""),Za(this,void 0,void 0,(function(){var i,s,l,c,u,d,f;return ei(this,(function(p){switch(p.label){case 0:if(console.log("getImage called with description:",r),i=null,s=null,!r)throw new Error("Cannot generate image: missing description");if(!e&&!n)throw new Error("Cannot generate image: no API keys provided. Please check your settings and add either OpenAI or HuggingFace API key.");if(!e)return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),console.log("Trying HuggingFace with API key:",e?e.substring(0,5)+"...":"null"),l=new Ja(e),[4,null===(a=l.getImageUrl)||void 0===a?void 0:a.call(l,r)];case 2:if(c=p.sent())return i=c,s=c,console.log("HuggingFace image processed successfully"),[2,{imageUrl:i,imageBase64:s}];throw new Error("HuggingFace did not return an image");case 3:return u=p.sent(),console.error("Error with Hugging Face:",u),[3,4];case 4:if(!n)return[3,12];p.label=5;case 5:return p.trys.push([5,11,,12]),console.log("Trying OpenAI with key:",n?n.substring(0,5)+"...":"null"),[4,xe(t,n,r,o)];case 6:if(i=p.sent(),console.log("OpenAI returned URL:",i?"success":"null"),!i)return[3,10];p.label=7;case 7:return p.trys.push([7,9,,10]),[4,R(i)];case 8:return s=p.sent(),console.log("Image URL converted to base64:",s?"success":"null"),[3,10];case 9:return d=p.sent(),console.error("Error converting URL to base64:",d),[3,10];case 10:return[3,12];case 11:throw f=p.sent(),console.error("OpenAI image generation error:",f),f instanceof Error?f:new Error("Failed to generate image with OpenAI. Please check your API key and try again.");case 12:if(!i)throw new Error("Failed to generate image. Please check your API keys and try again.");return[2,{imageUrl:i,imageBase64:s}]}}))}))}var ni=function(){return ni=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ni.apply(this,arguments)};const ri=function(e){var t=e.message,n=e.type,o=void 0===n?"error":n,i=e.onClose,s=e.autoClose,l=void 0===s||s,c=e.duration,u=void 0===c?5e3:c,d=e.className,f=void 0===d?"":d,p=e.style,h=void 0===p?{}:p,g=(0,r.useState)(!1),m=g[0],y=g[1],b=(0,r.useState)(!1),v=b[0],x=b[1],w=(0,r.useState)(!1),S=w[0],k=w[1],E=(0,r.useState)(!1),C=E[0],_=E[1];(0,r.useEffect)((function(){_(t.length>120||t.includes("\n")||t.includes("OpenAI API Error")||t.includes("quota")||t.includes("API key"))}),[t]),(0,r.useEffect)((function(){var e=setTimeout((function(){y(!0)}),10);return function(){return clearTimeout(e)}}),[]),(0,r.useEffect)((function(){if(l){var e=setTimeout((function(){j()}),u);return function(){return clearTimeout(e)}}}),[l,u]);var j=function(){x(!0),setTimeout((function(){y(!1),i()}),300)},A=function(){switch(o){case"success":return{icon:(0,a.jsx)(He,{size:18}),bgColor:"#ECFDF5",borderColor:"#A7F3D0",textColor:"#064E3B",iconColor:"#059669"};case"error":return{icon:(0,a.jsx)(ut,{size:18}),bgColor:"#FEF2F2",borderColor:"#FECDD3",textColor:"#7F1D1D",iconColor:"#EF4444"};case"warning":return{icon:(0,a.jsx)(et,{size:18}),bgColor:"#FFFBEB",borderColor:"#FEF3C7",textColor:"#78350F",iconColor:"#F59E0B"};default:return{icon:(0,a.jsx)(nt,{size:18}),bgColor:"#EFF6FF",borderColor:"#BFDBFE",textColor:"#1E3A8A",iconColor:"#3B82F6"}}}(),I=ni({backgroundColor:A.bgColor,color:A.textColor,borderLeft:"4px solid ".concat(A.iconColor),borderRadius:"6px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04)",padding:"12px 16px",display:"flex",alignItems:"flex-start",position:"relative",opacity:v?0:m?1:0,transform:v?"translateX(20px)":m?"translateX(0)":"translateX(20px)",transition:"all 0.3s ease",maxHeight:S?"400px":"100px",overflow:"hidden",marginBottom:"8px"},h);return(0,a.jsxs)("div",ni({className:"notification ".concat(f),style:I,role:"alert"},{children:[(0,a.jsx)("div",ni({style:{color:A.iconColor,marginRight:"12px",marginTop:"2px",flexShrink:0}},{children:A.icon})),(0,a.jsxs)("div",ni({style:{flex:1,fontSize:"14px",lineHeight:"1.5",fontWeight:500,paddingRight:"20px",maxHeight:S?"350px":"65px",overflow:S?"auto":"hidden",transition:"max-height 0.3s ease"}},{children:[!C||S?t:t.substring(0,120)+"...",C&&(0,a.jsx)("button",ni({onClick:function(e){e.stopPropagation(),k(!S)},style:{display:"flex",alignItems:"center",gap:"4px",background:"transparent",border:"none",color:A.iconColor,fontWeight:500,fontSize:"12px",padding:"4px 0",marginTop:"4px",cursor:"pointer"}},{children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Qe,{size:12})," "]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ve,{size:12}),"  "]})}))]})),(0,a.jsx)("button",ni({onClick:j,style:{background:"transparent",border:"none",padding:"2px",marginLeft:"8px",cursor:"pointer",color:A.textColor,opacity:.7,fontSize:"18px",position:"absolute",top:"8px",right:"8px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:function(e){return e.currentTarget.style.opacity="1"},onMouseOut:function(e){return e.currentTarget.style.opacity="0.7"},"aria-label":"Close notification"},{children:(0,a.jsx)(dt,{size:14})}))]}))};const oi=function(){var e=(0,r.useState)(null),t=e[0],n=e[1];return{showError:function(e,t){void 0===t&&(t="error"),n(e?{message:e,type:t}:null)},showSuccess:function(e){n({message:e,type:"success"})},showWarning:function(e){n({message:e,type:"warning"})},showInfo:function(e){n({message:e,type:"info"})},renderErrorNotification:function(){return t?(0,a.jsx)(ri,{message:t.message,type:t.type,onClose:function(){return n(null)}}):null}}};var ai=function(){return ai=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ai.apply(this,arguments)},ii=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},si="anki_stored_cards",li=function(){try{var e=localStorage.getItem(si);if(console.log("Loading cards from localStorage. Data exists:",!!e),e)try{var t=JSON.parse(e);if(console.log("Successfully parsed cards from localStorage, total count:",t.length),t.length>0){var n=t.slice(0,Math.min(3,t.length)),r=t.length>3?t.slice(-3):[];console.log("First few cards:",n.map((function(e){var t;return{id:e.id,text:null===(t=e.text)||void 0===t?void 0:t.substring(0,20)}}))),r.length>0&&console.log("Last few cards:",r.map((function(e){var t;return{id:e.id,text:null===(t=e.text)||void 0===t?void 0:t.substring(0,20)}})))}if(!Array.isArray(t))return console.error("Stored cards is not an array!",t),[];var o=t.filter((function(e){var t=!!e.id,n=!!e.text,r=!!e.createdAt;return!!(t&&n&&r)||(console.warn("Found invalid card, removing from results:",e),!1)}));return console.log("Card validation: ".concat(o.length," valid out of ").concat(t.length," total")),o.map((function(e){return ai(ai({},e),{createdAt:new Date(e.createdAt)})}))}catch(e){return console.error("JSON parse error:",e),localStorage.removeItem(si),[]}}catch(e){console.error("Error loading cards from localStorage:",e);try{localStorage.removeItem(si)}catch(e){console.error("Could not clean up localStorage:",e)}}return[]};const ci=function(e){return function(t){return function(n){var r=t(n);switch(n.type){case K:try{var o=li();e.dispatch({type:"SET_STORED_CARDS",payload:o})}catch(t){console.error("Error in LOAD_STORED_CARDS middleware:",t),e.dispatch({type:"SET_STORED_CARDS",payload:[]})}break;case V:case G:case X:case J:try{!function(e){try{console.log("Saving cards to localStorage:",e),console.log("Total cards count:",e.length);var t=JSON.stringify(e,(function(e,t){return t instanceof Date?t.toISOString():t})),n=new Blob([t]).size;console.log("Storage size in bytes:",n,"Approximate max size: ~5MB"),n>4194304&&console.warn("Warning: localStorage size is getting large (>4MB). This might cause issues in some browsers."),localStorage.setItem(si,t),console.log("Cards saved successfully to localStorage")}catch(t){console.error("Error saving cards to localStorage:",t);var r=0;try{var o=JSON.stringify(e,(function(e,t){return t instanceof Date?t.toISOString():t}));r=new Blob([o]).size}catch(e){console.error("Could not determine original size:",e)}if(t instanceof DOMException&&("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&(console.error("localStorage quota exceeded. Cannot save more cards. Try removing some cards."),e.length>0)){console.warn("CRITICAL: Storage quota exceeded. Attempting to fix by reducing card data size instead of removing cards.");try{var a=e.map((function(e){return ai(ai({},e),{image:null,id:e.id,text:e.text,translation:e.translation,front:e.front,back:e.back?e.back.substring(0,1e3):null,examples:e.examples&&e.examples.length>2?e.examples.slice(0,2):e.examples,createdAt:e.createdAt,exportStatus:e.exportStatus})}));console.warn("Attempting to save cards with reduced data instead of limiting to 4 cards.");var i=JSON.stringify(a,(function(e,t){return t instanceof Date?t.toISOString():t})),s=new Blob([i]).size;if(console.log("Reduced size from ".concat(r," to ").concat(s," bytes")),s>4718592){console.warn("Still too large after size reduction, falling back to limiting card count");for(var l=ii([],a,!0).sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})),c=Math.min(10,l.length),u=void 0;c<l.length;){u=l.slice(0,c);var d=JSON.stringify(u,(function(e,t){return t instanceof Date?t.toISOString():t}));if(new Blob([d]).size>4718592)break;c+=5}console.warn("Emergency preservation: keeping ".concat(c," newest cards out of ").concat(l.length," total")),localStorage.setItem(si,JSON.stringify(u,(function(e,t){return t instanceof Date?t.toISOString():t})))}else localStorage.setItem(si,i);return void console.log("Saved cards with data reduction to fit within quota")}catch(e){console.error("Failed to save with data reduction:",e)}}}}(e.getState().cards.storedCards)}catch(e){console.error("Error in card storage middleware:",e)}break;case Y:n.payload?localStorage.setItem("current_card_id",n.payload):(localStorage.removeItem("current_card_id"),localStorage.removeItem("explicitly_saved"));break;case M:0===e.getState().cards.storedCards.length&&e.dispatch({type:K})}return r}}};var ui=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},di=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},fi=function(e){return function(e){return{translateText:function(t,n,r,o){return void 0===r&&(r="ru"),void 0===o&&(o=""),ui(void 0,void 0,void 0,(function(){return di(this,(function(a){return[2,Ya(e,t).translateText(n,r,o)]}))}))},getExamples:function(t,n,r,o,a){return void 0===o&&(o=!1),void 0===a&&(a=""),ui(void 0,void 0,void 0,(function(){return di(this,(function(i){return[2,Ya(e,t).getExamples(n,r,o,a)]}))}))},getDescriptionImage:function(t,n,r){return void 0===r&&(r=""),ui(void 0,void 0,void 0,(function(){return di(this,(function(o){return[2,Ya(e,t).getDescriptionImage(n,r)]}))}))},getImageUrl:function(t,n){return ui(void 0,void 0,void 0,(function(){var r;return di(this,(function(o){return[2,(r=Ya(e,t)).getImageUrl?r.getImageUrl(n):null]}))}))},generateAnkiFront:function(t,n){return ui(void 0,void 0,void 0,(function(){return di(this,(function(r){return[2,Ya(e,t).generateAnkiFront(n)]}))}))}}}(e)},pi=function(e,t,n,r,o){return ui(void 0,void 0,void 0,(function(){var a,i;return di(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,e.translateText(t,n,r,o)];case 1:return a=s.sent(),[2,{original:n,translated:a}];case 2:return i=s.sent(),console.error("Error in unified translation:",i),[2,{original:n,translated:null}];case 3:return[2]}}))}))},hi=function(e,t,n,r,o,a){return void 0===o&&(o=!1),ui(void 0,void 0,void 0,(function(){var i;return di(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,e.getExamples(t,n,r,o,a)];case 1:return[2,s.sent().map((function(e){return{original:e[0],translated:e[1]}}))];case 2:return i=s.sent(),console.error("Error in unified examples generation:",i),[2,[]];case 3:return[2]}}))}))},gi=function(e,t,n){return ui(void 0,void 0,void 0,(function(){var r;return di(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e.generateAnkiFront(t,n)];case 1:return[2,{front:o.sent()}];case 2:return r=o.sent(),console.error("Error in unified flashcard creation:",r),[2,{front:null}];case 3:return[2]}}))}))},mi=function(){return mi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mi.apply(this,arguments)},yi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},bi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const vi=function(){var e=(0,r.useState)(!1),t=e[0],n=e[1],o=(m((function(e){return e.deck.deckId})),C()),i=m((function(e){return e.cards})),s=i.text,l=i.translation,c=i.examples,u=i.image,d=i.imageUrl,f=i.front,p=(i.back,i.currentCardId),h=m((function(e){return e.settings.translateToLanguage})),g=m((function(e){return e.settings.aiInstructions})),y=m((function(e){return e.settings.imageInstructions})),b=(m((function(e){return e.deck.decks})),m((function(e){return e.settings.mode}))),v=(0,r.useState)(""),x=v[0],w=v[1],S=(m((function(e){return e.settings.useAnkiConnect})),m((function(e){return e.settings.ankiConnectUrl})),m((function(e){return e.settings.ankiConnectApiKey})),(0,r.useState)(!1)),k=S[0],E=S[1],_=(0,r.useState)(!1),j=_[0],O=_[1],P=(0,r.useState)(!1),T=P[0],F=P[1],R=(0,r.useState)(!1),B=R[0],z=R[1],N=(0,r.useState)(!1),L=N[0],M=N[1],D=(0,r.useState)(!0),$=D[0],U=D[1],W=(0,r.useState)(!1),H=W[0],q=W[1],V=m((function(e){return e.settings.openAiKey})),K=m((function(e){return e.settings.huggingFaceApiKey})),G=m((function(e){return e.settings.groqApiKey})),Q=m((function(e){return e.settings.groqModelName})),J=m((function(e){return e.settings.modelProvider})),X=m((function(e){return e.settings.shouldGenerateImage})),Y=(0,r.useState)(!1),Z=Y[0],ce=Y[1],fe=(0,r.useState)(!1),pe=fe[0],he=fe[1],ye=(0,r.useState)(g),ve=ye[0],xe=ye[1],we=(0,r.useState)(y),Ee=we[0],Ce=we[1],_e=oi(),je=_e.showError,Ae=_e.renderErrorNotification,Ie=new Na({apiKey:V,dangerouslyAllowBrowser:!0}),Oe=(0,r.useState)(""),Te=Oe[0],Fe=Oe[1],ze=(0,r.useState)(!1),Ne=ze[0],Le=ze[1],Me=(m((function(e){return e.cards.storedCards})),(0,r.useMemo)((function(){return fi(J)}),[J])),De=(0,r.useMemo)((function(){return function(e,t,n,r,o){switch(void 0===r&&(r=""),void 0===o&&(o="http://localhost:11434"),e){case La.OpenAI:return t;case La.HuggingFace:return n;case La.Groq:return r;case La.Local:return o;default:return t}}(J,V,K,G)}),[J,V,K,G]),$e=(0,r.useMemo)((function(){return console.log("Calculating isSaved:",{currentCardId:p,explicitlySaved:H}),!(!p||!H)}),[p,H]);console.log("Card state details:",{isNewSubmission:$,explicitlySaved:H,isSaved:$e,currentCardId:p,text:s.substring(0,20)+(s.length>20?"...":""),localStorage_explicitly_saved:localStorage.getItem("explicitly_saved")});(0,r.useEffect)((function(){$e&&M(!0)}),[s,l,c,u,d,f,$e]);var Ue=(0,r.useCallback)((function(e){if(e&&""!==e.trim()){var t=li().find((function(t){return t.text===e}));return!!t&&(console.log("Found existing card with matching text:",(null==t?void 0:t.text)||e,"ID:",t.id),console.log("Setting currentCardId but NOT setting explicitlySaved"),o(de(t.id)),!0)}}),[o]),We=function(){return yi(void 0,void 0,void 0,(function(){var e,t,n,r,a,i,l,c,u;return bi(this,(function(d){switch(d.label){case 0:if(!Te.trim()||Ne)return[2];Le(!0),d.label=1;case 1:return d.trys.push([1,15,16,17]),Te.toLowerCase().includes("image")||Te.toLowerCase().includes("picture")||Te.toLowerCase().includes("")||Te.toLowerCase().includes("")?[4,be(V,s,Te)]:[3,4];case 2:return a=d.sent(),[4,ti(K,Ie,V,a,Te)];case 3:return e=d.sent(),t=e.imageUrl,c=e.imageBase64,t&&o(ie(t)),c&&o(ae(c)),je("Image updated with your instructions!","success"),[3,14];case 4:return Te.toLowerCase().includes("example")||Te.toLowerCase().includes("sentence")||Te.toLowerCase().includes("")||Te.toLowerCase().includes("")?[4,me(V,s,h,!0,Te)]:[3,6];case 5:return r=d.sent(),o(re(r)),je("Examples updated with your instructions!","success"),[3,14];case 6:return Te.toLowerCase().includes("translat")||Te.toLowerCase().includes("")?[4,ge(V,s,h,Te)]:[3,8];case 7:return n=d.sent(),o(oe(n)),je("Translation updated with your instructions!","success"),[3,14];case 8:return[4,ge(V,s,h,Te)];case 9:return n=d.sent(),[4,me(V,s,h,!0,Te)];case 10:return r=d.sent(),X?[4,be(V,s,Te)]:[3,13];case 11:return a=d.sent(),[4,ti(K,Ie,V,a,Te)];case 12:i=d.sent(),l=i.imageUrl,c=i.imageBase64,l&&o(ie(l)),c&&o(ae(c)),d.label=13;case 13:o(oe(n)),o(re(r)),je("Content updated with your instructions!","success"),d.label=14;case 14:return Fe(""),[3,17];case 15:return u=d.sent(),je("Error applying your instructions. Please try again."),console.error("Error applying custom instructions:",u),[3,17];case 16:return Le(!1),[7];case 17:return[2]}}))}))};(0,r.useEffect)((function(){var e=function(){var e,t=null===(e=window.getSelection())||void 0===e?void 0:e.toString().trim();t&&o(ne(t))};return document.addEventListener("mouseup",e),function(){document.removeEventListener("mouseup",e)}}),[o]),(0,r.useEffect)((function(){var e;o((e=A.LanguageLearning,{type:Se,payload:e})),s&&l&&c.length>0?n(!0):n(!1),o(te())}),[o]),(0,r.useEffect)((function(){yi(void 0,void 0,void 0,(function(){return bi(this,(function(e){return console.log("Running saved cards check on mount"),o(te()),setTimeout((function(){var e=li();console.log("Loaded cards from storage:",e.length);var t=localStorage.getItem("current_card_id"),r=localStorage.getItem("explicitly_saved");if(console.log("localStorage values on mount:",{savedCardId:t,explicitlySavedFlag:r,cardCount:e.length}),t){console.log("Found current card ID in localStorage:",t);var a=e.find((function(e){return e.id===t}));a?(console.log("Restoring card from storage:",a),M(!1),U(!1),"true"===r?(console.log("Setting explicitlySaved to TRUE based on localStorage flag"),q(!0)):(console.log("Setting explicitlySaved to FALSE based on localStorage flag"),q(!1)),o(de(t)),o(ne(a.text)),a.translation&&o(oe(a.translation)),a.examples&&o(re(a.examples)),a.image&&o(ae(a.image)),a.imageUrl&&o(ie(a.imageUrl)),a.front&&o(le(a.front)),a.back&&o(se(a.back)),w(a.text),n(!0)):(console.log("Card ID from localStorage not found in storage, resetting"),localStorage.removeItem("current_card_id"),localStorage.removeItem("explicitly_saved"),o(de(null)),U(!0),q(!1))}else console.log("No current card ID in localStorage"),U(!0),q(!1)}),200),[2]}))}))}),[]),(0,r.useEffect)((function(){s&&!$&&""!==s.trim()&&(!t||p?(p||(console.log("Actively typing new card text - ensuring not marked as saved"),q(!1),localStorage.removeItem("explicitly_saved")),Ue(s)):console.log("New card being created, skipping automatic saved detection"))}),[s,p,$,t,Ue]);var He=function(){o({type:Re,payload:ve}),ce(!1),je("AI settings saved successfully!","success")},qe=function(){o({type:Be,payload:Ee}),he(!1),je("Image instructions saved successfully!","success")};return(0,r.useEffect)((function(){var e=localStorage.getItem("explicitly_saved");q("true"===e)}),[]),(0,a.jsxs)("div",mi({style:{display:"flex",flexDirection:"column",flex:1,width:"100%",height:"100%",position:"relative"}},{children:[k&&(0,a.jsxs)("div",mi({style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"20px",padding:"0 20px"}},{children:[(0,a.jsx)(ht,{type:"spinner",size:"large",color:"#3B82F6",text:"Creating your Anki card..."}),(0,a.jsx)("div",mi({style:{backgroundColor:"#F3F4F6",padding:"10px 16px",borderRadius:"8px",fontSize:"13px",color:"#4B5563",maxWidth:"90%",textAlign:"center",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"}},{children:"We're analyzing your text and generating learning materials"}))]})),(0,a.jsxs)("div",mi({style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"12px",width:"100%",padding:"12px",paddingTop:"16px",height:"100%",overflowY:"auto",backgroundColor:"#ffffff",paddingBottom:"16px"}},{children:[(0,a.jsxs)("div",mi({style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",width:"100%",maxWidth:"320px"}},{children:[b===A.LanguageLearning&&(0,a.jsxs)("div",mi({style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",gap:"8px"}},{children:[(0,a.jsx)("div",mi({style:{position:"relative",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:(0,a.jsx)("label",mi({htmlFor:"language",style:{color:"#111827",fontWeight:"600",fontSize:"14px",margin:0}},{children:"Translate to:"}))})),(0,a.jsx)("select",mi({id:"language",value:h,onChange:function(e){return o(function(e){return{type:ke,payload:e}}(e.target.value))},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"#ffffff",color:"#374151",fontSize:"14px",outline:"none",transition:"all 0.2s ease",cursor:"pointer"},onFocus:function(e){return e.target.style.borderColor="#2563EB"},onBlur:function(e){return e.target.style.borderColor="#E5E7EB"}},{children:[{code:"ru",name:""},{code:"en",name:"English"},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"de",name:"Deutsch"},{code:"it",name:"Italiano"},{code:"pt",name:"Portugus"},{code:"ja",name:""},{code:"ko",name:""},{code:"zh",name:""},{code:"ar",name:""}].map((function(e){var t=e.code,n=e.name;return(0,a.jsx)("option",mi({value:t},{children:n}),t)}))})),(0,a.jsxs)("div",mi({style:{display:"flex",alignItems:"center",gap:"12px",width:"100%"}},{children:[(0,a.jsx)("label",mi({htmlFor:"generateImage",style:{color:"#111827",fontWeight:"600",fontSize:"14px",margin:0}},{children:"Image:"})),(0,a.jsxs)("div",mi({style:{position:"relative",display:"inline-block",width:"40px",height:"22px"}},{children:[(0,a.jsx)("input",{type:"checkbox",id:"generateImage",checked:X,onChange:function(e){return yi(void 0,void 0,void 0,(function(){var t,n,r,a,i;return bi(this,(function(l){switch(l.label){case 0:return t=e.target.checked,o(function(e){return{type:Pe,payload:e}}(t)),t?[4,be(V,s,y)]:[3,3];case 1:return n=l.sent(),[4,ti(K,Ie,V,n,y)];case 2:return r=l.sent(),a=r.imageUrl,i=r.imageBase64,a&&o(ie(a)),i&&o(ae(i)),[3,4];case 3:o(ie(null)),l.label=4;case 4:return[2]}}))}))},style:{opacity:0,width:0,height:0}}),(0,a.jsx)("label",mi({htmlFor:"generateImage",style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:X?"#2563EB":"#E5E7EB",transition:".3s",borderRadius:"22px"}},{children:(0,a.jsx)("span",{style:{position:"absolute",content:'""',height:"18px",width:"18px",left:"2px",bottom:"2px",backgroundColor:"white",transition:".3s",borderRadius:"50%",transform:X?"translateX(18px)":"translateX(0)"}})}))]}))]})),X&&(X?pe?(0,a.jsxs)("div",mi({style:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px",width:"100%",marginBottom:"12px",marginTop:"8px"}},{children:[(0,a.jsxs)("div",mi({style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"}},{children:[(0,a.jsxs)("h3",mi({style:{margin:0,fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",gap:"8px"}},{children:[(0,a.jsx)(tt,{size:14,color:"#10B981"}),"Image Instructions"]})),(0,a.jsx)("button",mi({onClick:function(){return he(!1)},style:{background:"transparent",border:"none",cursor:"pointer",color:"#6B7280",fontSize:"13px"}},{children:"Cancel"}))]})),(0,a.jsxs)("div",mi({style:{marginBottom:"16px"}},{children:[(0,a.jsx)("label",mi({style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:500,color:"#374151"}},{children:"Image generation style"})),(0,a.jsx)("textarea",{value:Ee,onChange:function(e){return Ce(e.target.value)},placeholder:"E.g., use anime style, make it minimalist, use pastel colors, make it black and white",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",fontSize:"14px",minHeight:"100px",resize:"vertical"}}),(0,a.jsxs)("div",mi({style:{fontSize:"12px",color:"#6B7280",marginTop:"8px",lineHeight:"1.4"}},{children:[(0,a.jsx)("p",mi({style:{margin:"0 0 6px 0",fontWeight:"500"}},{children:"How to use:"})),(0,a.jsxs)("ul",mi({style:{margin:0,paddingLeft:"16px"}},{children:[(0,a.jsxs)("li",{children:["These are ",(0,a.jsx)("strong",{children:"style instructions"})," for image generation"]}),(0,a.jsx)("li",{children:"The image will still be related to the word you're learning"}),(0,a.jsx)("li",{children:"Focus on artistic style, mood, colors, composition, etc."}),(0,a.jsx)("li",{children:'Examples: "watercolor style", "dark background", "realistic rendering"'})]}))]}))]})),(0,a.jsxs)("button",mi({onClick:qe,style:{backgroundColor:"#10B981",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",fontWeight:500,cursor:"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},{children:[(0,a.jsx)(tt,{size:14}),"Save Image Instructions"]}))]})):(0,a.jsxs)("button",mi({onClick:function(){return he(!0)},style:{display:"flex",alignItems:"center",gap:"6px",backgroundColor:"#F3F4F6",border:"1px solid #E5E7EB",borderRadius:"6px",padding:"6px 12px",fontSize:"13px",color:"#4B5563",cursor:"pointer",width:"100%",justifyContent:"center",marginTop:"8px"}},{children:[(0,a.jsx)(tt,{size:14}),"Customize image generation"]})):null)]})),Z?(0,a.jsxs)("div",mi({style:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"16px",width:"100%",marginBottom:"12px"}},{children:[(0,a.jsxs)("div",mi({style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"}},{children:[(0,a.jsxs)("h3",mi({style:{margin:0,fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",gap:"8px"}},{children:[(0,a.jsx)(rt,{size:14,color:"#2563EB"}),"AI Instructions"]})),(0,a.jsx)("button",mi({onClick:function(){return ce(!1)},style:{background:"transparent",border:"none",cursor:"pointer",color:"#6B7280",fontSize:"13px"}},{children:"Cancel"}))]})),(0,a.jsxs)("div",mi({style:{marginBottom:"16px"}},{children:[(0,a.jsx)("label",mi({style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:500,color:"#374151"}},{children:"Additional instructions for AI"})),(0,a.jsx)("textarea",{value:ve,onChange:function(e){return xe(e.target.value)},placeholder:"E.g., Keep specialized terms untranslated. Make examples more advanced. Use formal language.",style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",fontSize:"14px",minHeight:"100px",resize:"vertical"}}),(0,a.jsxs)("div",mi({style:{fontSize:"12px",color:"#6B7280",marginTop:"8px",lineHeight:"1.4"}},{children:[(0,a.jsx)("p",mi({style:{margin:"0 0 6px 0",fontWeight:"500"}},{children:"How to use:"})),(0,a.jsxs)("ul",mi({style:{margin:0,paddingLeft:"16px"}},{children:[(0,a.jsxs)("li",{children:["These are ",(0,a.jsx)("strong",{children:"additional"})," instructions that supplement the basic AI behavior"]}),(0,a.jsx)("li",{children:"The original word will always be used (no need to specify it)"}),(0,a.jsx)("li",{children:"Examples will always be generated for the word you're learning"}),(0,a.jsx)("li",{children:"Use this for style guidance, preferences, or special requirements"})]}))]}))]})),(0,a.jsxs)("button",mi({onClick:He,style:{backgroundColor:"#2563EB",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",fontWeight:500,cursor:"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},{children:[(0,a.jsx)(Je,{size:14}),"Save Instructions"]}))]})):(0,a.jsxs)("button",mi({onClick:function(){return ce(!0)},style:{display:"flex",alignItems:"center",gap:"6px",backgroundColor:"#F3F4F6",border:"1px solid #E5E7EB",borderRadius:"6px",padding:"6px 12px",fontSize:"13px",color:"#4B5563",cursor:"pointer",width:"100%",justifyContent:"center"}},{children:[(0,a.jsx)(Xe,{size:14}),"Customize AI behavior"]})),(0,a.jsxs)("form",mi({onSubmit:function(e){return yi(void 0,void 0,void 0,(function(){var t,r,a,i,l,c,u,d,f,p,m;return bi(this,(function(b){switch(b.label){case 0:if(e.preventDefault(),!s.trim())return[2];q(!1),localStorage.removeItem("explicitly_saved"),E(!0),w(s),b.label=1;case 1:return b.trys.push([1,13,14,15]),console.log("=== DEBUG INFO ==="),console.log("Model Provider:",J),console.log("API Key available:",Boolean(De)),console.log("Model Name (if Groq):",J===La.Groq?Q:"N/A"),console.log("AI Service:",Object.keys(Me)),[4,pi(Me,De,s,h,g)];case 2:return(t=b.sent()).translated&&o(oe(t.translated)),[4,hi(Me,De,s,h,!0,g)];case 3:return(r=b.sent())&&r.length>0&&(a=r.map((function(e){return[e.original,e.translated]})),o(re(a))),[4,gi(Me,De,s)];case 4:if((i=b.sent()).front&&o(le(i.front)),!X)return[3,12];b.label=5;case 5:return b.trys.push([5,11,,12]),[4,Me.getDescriptionImage(De,s,y)];case 6:return l=b.sent(),J!==La.OpenAI?[3,8]:[4,ti(K,Ie,V,l,y)];case 7:return c=b.sent(),u=c.imageUrl,d=c.imageBase64,u&&o(ie(u)),d&&o(ae(d)),[3,10];case 8:return J===La.HuggingFace&&Me.getImageUrl?[4,Me.getImageUrl(De,l)]:[3,10];case 9:(f=b.sent())&&(o(ie("")),o(ae(f))),b.label=10;case 10:return[3,12];case 11:return p=b.sent(),console.error("Error generating image:",p),[3,12];case 12:return o(de(null)),n(!0),U(!0),[3,15];case 13:return m=b.sent(),console.error("Error processing text:",m),je(m instanceof Error?m.message:"Failed to process text"),[3,15];case 14:return E(!1),[7];case 15:return[2]}}))}))},style:{width:"100%",display:"flex",flexDirection:"column",gap:"8px",marginTop:"4px",marginBottom:"0"}},{children:[(0,a.jsxs)("div",mi({style:{display:"flex",flexDirection:"column",gap:"4px",width:"100%"}},{children:[(0,a.jsxs)("label",mi({htmlFor:"text",style:{color:"#111827",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center"}},{children:["Text:",function(){var e="",t="",n="";switch(J){case La.OpenAI:e="OpenAI",t="#10a37f",n="#ffffff";break;case La.HuggingFace:e="HuggingFace",t="#ffbd59",n="#000000";break;case La.Local:e="Local Model",t="#7c3aed",n="#ffffff";break;default:e="AI",t="#2563EB",n="#ffffff"}return(0,a.jsx)("div",mi({style:{display:"inline-block",backgroundColor:t,color:n,padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",marginLeft:"8px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"}},{children:e}))}()]})),(0,a.jsx)("textarea",{id:"text",value:s,onChange:function(e){return t=e.target.value,o(ne(t)),void($e?M(!0):Ue(t));var t},placeholder:"Enter text to translate or select text from a webpage",style:{width:"100%",minHeight:"80px",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"#ffffff",color:"#374151",fontSize:"14px",resize:"vertical",outline:"none",transition:"all 0.2s ease"},onFocus:function(e){return e.target.style.borderColor="#2563EB"},onBlur:function(e){return e.target.style.borderColor="#E5E7EB"}})]})),(0,a.jsx)("button",mi({type:"submit",disabled:k,style:{width:"100%",padding:"8px 10px",marginTop:"4px",borderRadius:"6px",backgroundColor:"#2563EB",color:"#ffffff",fontWeight:"600",fontSize:"14px",border:"none",cursor:"pointer",transition:"all 0.2s ease",opacity:k?.7:1},onMouseOver:function(e){return!k&&(e.currentTarget.style.backgroundColor="#1D4ED8")},onMouseOut:function(e){return!k&&(e.currentTarget.style.backgroundColor="#2563EB")}},{children:k?(0,a.jsx)("div",mi({style:{display:"flex",alignItems:"center",justifyContent:"center"}},{children:(0,a.jsx)(ht,{type:"dots",size:"small",inline:!0,color:"#ffffff",text:"Creating card"})})):"Create Card"}))]})),(0,a.jsx)("div",mi({style:{width:"100%",margin:"4px 0 0 0"}},{children:Ae()}))]})),t&&(0,a.jsxs)("div",mi({style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",maxWidth:"320px",marginBottom:"8px"}},{children:[(0,a.jsxs)("div",mi({style:{width:"100%",marginBottom:"12px"}},{children:[(0,a.jsxs)("div",mi({style:{position:"relative",width:"100%"}},{children:[(0,a.jsx)("input",{type:"text",value:Te,onChange:function(e){return Fe(e.target.value)},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),We())},placeholder:"Enter custom instructions (e.g., 'more formal examples', 'change image style')",style:{width:"100%",padding:"8px 12px",paddingRight:"40px",borderRadius:"6px",border:"1px solid #E5E7EB",fontSize:"14px",color:"#374151"},disabled:Ne}),(0,a.jsx)("button",mi({onClick:We,disabled:!Te.trim()||Ne,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:Te.trim()&&!Ne?"#2563EB":"#9CA3AF",cursor:Te.trim()&&!Ne?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px"}},{children:(0,a.jsx)(at,{size:16})}))]})),(0,a.jsx)("div",mi({style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"}},{children:Ne?"Applying your instructions...":"Type instructions and press Enter or click the magic wand"}))]})),(0,a.jsx)(yt,{mode:b,front:f,translation:l,examples:c,imageUrl:d,image:u,onNewImage:function(){return yi(void 0,void 0,void 0,(function(){var e,t,n,r,a,i;return bi(this,(function(l){switch(l.label){case 0:O(!0),l.label=1;case 1:return l.trys.push([1,8,9,10]),[4,Me.getDescriptionImage(De,s,y)];case 2:return e=l.sent(),J!==La.OpenAI?[3,4]:[4,ti(K,Ie,V,e,y)];case 3:return t=l.sent(),n=t.imageUrl,r=t.imageBase64,n&&o(ie(n)),r&&o(ae(r)),[3,7];case 4:return J===La.HuggingFace&&Me.getImageUrl?[4,Me.getImageUrl(De,e)]:[3,6];case 5:return(a=l.sent())&&(o(ie("")),o(ae(a))),[3,7];case 6:je("Image generation is not supported with the selected provider."),l.label=7;case 7:return[3,10];case 8:return i=l.sent(),console.error("Error generating image:",i),je(i instanceof Error?i.message:"Failed to generate image"),[3,10];case 9:return O(!1),[7];case 10:return $e&&M(!0),[2]}}))}))},onNewExamples:function(){return yi(void 0,void 0,void 0,(function(){var e,t,n;return bi(this,(function(r){switch(r.label){case 0:F(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,hi(Me,De,s,h,!0,g)];case 2:return(e=r.sent())&&e.length>0&&(t=e.map((function(e){return[e.original,e.translated]})),o(re(t))),[3,5];case 3:return n=r.sent(),console.error("Error getting examples:",n),je(n instanceof Error?n.message:"Failed to generate examples"),[3,5];case 4:return F(!1),[7];case 5:return $e&&M(!0),[2]}}))}))},onAccept:function(){return yi(void 0,void 0,void 0,(function(){var e,t;return bi(this,(function(n){je(null);try{if(z(!0),e=p||Date.now().toString(),console.log("Saving card with data:",{originalSelectedText:x,text:s,translation:l,examples:c.length,mode:b,currentCardId:p}),b===A.LanguageLearning){if(!s&&!x)return console.error("Missing text data for card"),je("Please enter or select some text for your card before saving."),[2];t={id:e,mode:b,text:x||s,translation:l,examples:c,image:u,imageUrl:d,createdAt:new Date,exportStatus:"not_exported"},console.log("Saving card to storage:",t),p?o(ue(t)):(o(ee(t)),o(de(e)))}else if(b===A.GeneralTopic){if(!f)return console.error("Missing front data for general topic card"),je("Please generate card content before saving."),[2];t={id:e,mode:b,front:f,back:l||f,text:x||s||"",createdAt:new Date,exportStatus:"not_exported"},console.log("Saving general topic card to storage:",t),p?o(ue(t)):(o(ee(t)),o(de(e)))}q(!0),localStorage.setItem("explicitly_saved","true"),je(L?"Card updated successfully!":"Card saved successfully!","success"),M(!1),U(!1)}catch(e){console.error("Error saving card:",e),je("Error saving card. Please try again.")}finally{z(!1)}return[2]}))}))},onViewSavedCards:function(){o(I("storedCards"))},onCancel:function(){n(!1),M(!1),o(de(null)),U(!0),q(!1),localStorage.removeItem("explicitly_saved"),o(ne("")),o(oe("")),o(re([])),o(ae(null)),o(ie(null)),o(le("")),o(se(null)),w("")},loadingNewImage:j,loadingNewExamples:T,loadingAccept:B,shouldGenerateImage:X,isSaved:$e,isEdited:L,setTranslation:function(e){o(oe(e)),$e&&M(!0)},setExamples:function(e){o(re(e)),$e&&M(!0)}})]}))]}))]}))},xi=n.p+"assets/img/chat-gpt39f424be38a6852eb2c5.png",wi=n.p+"assets/img/copy-iconb2b0ec637a2b0fd4ca40.svg";var Si=function(){return Si=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Si.apply(this,arguments)};const ki=function(e){e.onBackClick,e.popup;var t=C(),n=m((function(e){return e.settings.openAiKey})),r=(m((function(e){return e.settings.ankiConnectUrl})),m((function(e){return e.settings.ankiConnectApiKey}))),o=(m((function(e){return e.settings.huggingFaceApiKey})),m((function(e){return e.settings.groqApiKey}))),i=m((function(e){return e.settings.groqModelName})),s=m((function(e){return e.settings.modelProvider})),l=function(e){t(function(e){return{type:we,payload:e}}(e.target.value))},c=function(e){t(function(e){return{type:Ie,payload:e}}(e.target.value))},u=function(e){t(function(e){return{type:Oe,payload:e}}(e.target.value))},d=chrome.runtime.getURL(xi),f=chrome.runtime.getURL(wi);return(0,a.jsxs)("div",Si({style:{padding:"12px",backgroundColor:"#ffffff",height:"100%",width:"100%",maxWidth:"320px",margin:"0 auto",overflowY:"auto",paddingBottom:"16px",marginTop:"20px"}},{children:[(0,a.jsxs)("div",Si({style:{marginBottom:"20px",backgroundColor:"#F9FAFB",padding:"12px",borderRadius:"8px"}},{children:[(0,a.jsx)("label",Si({htmlFor:"modelProvider",style:{display:"block",fontWeight:"600",marginBottom:"8px",color:"#111827",fontSize:"14px"}},{children:"AI Provider"})),(0,a.jsx)("p",Si({style:{fontSize:"12px",marginBottom:"8px",color:"#6B7280"}},{children:"Select which provider to use for generating flashcards"})),(0,a.jsxs)("select",Si({id:"modelProvider",value:s,onChange:function(e){var n;t((n=e.target.value,{type:ze,payload:n}))},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"#ffffff",color:"#374151",fontSize:"13px",outline:"none",transition:"all 0.2s ease",cursor:"pointer"},onFocus:function(e){return e.target.style.borderColor="#2563EB"},onBlur:function(e){return e.target.style.borderColor="#E5E7EB"}},{children:[(0,a.jsx)("option",Si({value:La.OpenAI},{children:"OpenAI"})),(0,a.jsx)("option",Si({value:La.Groq},{children:"Groq"})),(0,a.jsx)("option",Si({value:La.Local},{children:"Local Model"}))]}))]})),s!==La.OpenAI?null:(0,a.jsxs)("div",Si({style:{marginBottom:"20px"}},{children:[(0,a.jsxs)("div",Si({style:{display:"flex",alignItems:"center",marginBottom:"8px"}},{children:[(0,a.jsx)("label",Si({htmlFor:"openAiKey",style:{display:"block",fontWeight:"600",marginBottom:"0",marginRight:"8px",color:"#111827",fontSize:"14px"}},{children:"OpenAI API Key"})),(0,a.jsx)("img",{src:d,alt:"ChatGPT Logo",style:{width:"16px",height:"16px",marginTop:"-2px"}})]})),(0,a.jsxs)("p",Si({style:{fontSize:"12px",marginBottom:"6px",color:"#6B7280"}},{children:["You can get your OpenAI API key from ",(0,a.jsx)("a",Si({href:"https://platform.openai.com/account/api-keys",target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"underline"}},{children:"here"})),"."]})),(0,a.jsx)("div",Si({style:{position:"relative",marginBottom:"16px"}},{children:(0,a.jsx)("input",{type:"text",id:"openAiKey",value:n,onChange:l,style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"#ffffff",color:"#374151",fontSize:"13px",outline:"none",transition:"all 0.2s ease"},onFocus:function(e){return e.target.style.borderColor="#2563EB"},onBlur:function(e){return e.target.style.borderColor="#E5E7EB"}})}))]})),s!==La.Groq?null:(0,a.jsxs)("div",Si({style:{marginBottom:"20px"}},{children:[(0,a.jsx)("label",Si({htmlFor:"groqApiKey",style:{display:"block",fontWeight:"600",marginBottom:"8px",color:"#111827",fontSize:"14px"}},{children:"Groq API Key"})),(0,a.jsxs)("p",Si({style:{fontSize:"12px",marginBottom:"8px",color:"#6B7280"}},{children:["You can get your Groq API key from ",(0,a.jsx)("a",Si({href:"https://console.groq.com/keys",target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"underline"}},{children:"here"})),"."]})),(0,a.jsx)("input",{type:"text",id:"groqApiKey",value:o,onChange:c,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"#ffffff",color:"#374151",fontSize:"13px",outline:"none",transition:"all 0.2s ease",marginBottom:"16px"},onFocus:function(e){return e.target.style.borderColor="#2563EB"},onBlur:function(e){return e.target.style.borderColor="#E5E7EB"}}),(0,a.jsx)("label",Si({htmlFor:"groqModelName",style:{display:"block",fontWeight:"600",marginBottom:"8px",color:"#111827",fontSize:"14px"}},{children:"Groq Model"})),(0,a.jsxs)("select",Si({id:"groqModelName",value:i,onChange:u,style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"#ffffff",color:"#374151",fontSize:"13px",outline:"none",transition:"all 0.2s ease",cursor:"pointer",marginBottom:"16px"},onFocus:function(e){return e.target.style.borderColor="#2563EB"},onBlur:function(e){return e.target.style.borderColor="#E5E7EB"}},{children:[(0,a.jsx)("option",Si({value:"llama3-8b-8192"},{children:"Llama-3 8B"})),(0,a.jsx)("option",Si({value:"llama3-70b-8192"},{children:"Llama-3 70B"})),(0,a.jsx)("option",Si({value:"mixtral-8x7b-32768"},{children:"Mixtral 8x7B"})),(0,a.jsx)("option",Si({value:"gemma-7b-it"},{children:"Gemma 7B"}))]})),(0,a.jsx)("button",Si({onClick:function(){console.log("Testing Groq API"),console.log("Current key:",o),console.log("Model:",i),fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({model:i,messages:[{role:"user",content:"Translate this to French: Hello world"}],max_tokens:100})}).then((function(e){return console.log("Groq test response status:",e.status),e.json()})).then((function(e){console.log("Groq test response data:",e)})).catch((function(e){console.error("Groq test error:",e)}))},style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"#7c3aed",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px"}},{children:"Test Groq API"}))]})),s!==La.Local?null:(0,a.jsxs)("div",Si({style:{marginBottom:"20px",backgroundColor:"#F9FAFB",padding:"12px",borderRadius:"8px"}},{children:[(0,a.jsx)("h3",Si({style:{fontWeight:"600",marginBottom:"8px",color:"#111827",fontSize:"14px"}},{children:"Local Model Configuration"})),(0,a.jsxs)("p",Si({style:{fontSize:"12px",marginBottom:"12px",color:"#6B7280"}},{children:["To use local models, you need to run a local API server like Ollama or LM Studio on your computer. The extension will connect to ",(0,a.jsx)("code",Si({style:{backgroundColor:"#EFF6FF",padding:"2px 4px",borderRadius:"4px"}},{children:"http://localhost:11434"}))," by default."]})),(0,a.jsx)("div",Si({style:{padding:"8px",backgroundColor:"#DBEAFE",borderRadius:"6px",marginBottom:"8px"}},{children:(0,a.jsxs)("p",Si({style:{fontSize:"12px",color:"#1E40AF",margin:0}},{children:[(0,a.jsx)("strong",{children:"Note:"})," Image generation is not available with local models."]}))}))]})),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",Si({htmlFor:"ankiConnectApiKey",style:{display:"block",fontWeight:"600",marginBottom:"8px",color:"#111827",fontSize:"14px"}},{children:"AnkiConnect API Key (optional)"})),(0,a.jsx)("input",{type:"text",id:"ankiConnectApiKey",value:null!==r?r:"",onChange:function(e){t(function(e){return{type:Ce,payload:e}}(e.target.value))},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"#ffffff",color:"#374151",fontSize:"13px",outline:"none",transition:"all 0.2s ease",marginBottom:"20px"},onFocus:function(e){return e.target.style.borderColor="#2563EB"},onBlur:function(e){return e.target.style.borderColor="#E5E7EB"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",Si({style:{fontSize:"13px",marginBottom:"8px",color:"#6B7280"}},{children:["Install the Anki plugin ",(0,a.jsx)("strong",{children:"AnkiConnect"})," and configure it as follows:"]})),(0,a.jsxs)("ul",Si({style:{fontSize:"13px",listStyle:"disc",paddingLeft:"20px",marginBottom:"8px",color:"#6B7280"}},{children:[(0,a.jsxs)("li",Si({style:{marginBottom:"4px"}},{children:["Go to ",(0,a.jsx)("strong",{children:"Tools"})," then ",(0,a.jsx)("strong",{children:"Add-ons"})," then ",(0,a.jsx)("strong",{children:"Get Add-ons..."})]})),(0,a.jsxs)("li",Si({style:{marginBottom:"4px",display:"flex",alignItems:"center"}},{children:["Paste Code",(0,a.jsxs)("button",Si({onClick:function(){return navigator.clipboard.writeText("2055492159")},style:{display:"flex",alignItems:"center",backgroundColor:"#F3F4F6",padding:"4px 6px",borderRadius:"4px",color:"#2563EB",transition:"all 0.2s ease",border:"none",cursor:"pointer"},onMouseOver:function(e){return e.currentTarget.style.backgroundColor="#E5E7EB"},onMouseOut:function(e){return e.currentTarget.style.backgroundColor="#F3F4F6"}},{children:[(0,a.jsx)("img",{src:f,alt:"Copy Icon",style:{width:"16px",height:"16px",marginRight:"4px"}}),(0,a.jsx)("code",Si({style:{backgroundColor:"transparent",fontSize:"12px"}},{children:"2055492159"}))]}))]})),(0,a.jsxs)("li",Si({style:{marginBottom:"4px"}},{children:["Then click ",(0,a.jsx)("strong",{children:"OK"})]})),(0,a.jsx)("li",Si({style:{marginBottom:"4px"}},{children:"Restart Anki"})),(0,a.jsxs)("li",Si({style:{marginBottom:"4px"}},{children:["Navigate to ",(0,a.jsx)("strong",{children:"Tools"})," > ",(0,a.jsx)("strong",{children:"Add-ons"})," > ",(0,a.jsx)("strong",{children:"AnkiConnect"})," >",(0,a.jsx)("strong",{children:"Config"})]}))]})),(0,a.jsxs)("div",Si({style:{position:"relative",backgroundColor:"#F9FAFB",padding:"12px",borderRadius:"6px",marginBottom:"20px"}},{children:[(0,a.jsxs)("p",Si({style:{fontSize:"13px",marginBottom:"8px",color:"#6B7280"}},{children:["Copy paste the following config, you can change the ",(0,a.jsx)("code",{children:"apiKey"}),":"]})),(0,a.jsx)("pre",Si({style:{display:"block",overflow:"auto",padding:"10px",backgroundColor:"#F3F4F6",borderRadius:"4px",whiteSpace:"pre-wrap",cursor:"pointer",fontSize:"12px",color:"#374151",margin:0},onClick:function(){return navigator.clipboard.writeText(JSON.stringify({apiKey:r||"your_api_key",webCorsOriginList:["http://localhost","*"],webBindPort:8765},null,2))},title:"Click to copy"},{children:JSON.stringify({apiKey:r||"your_api_key",webCorsOriginList:["http://localhost","*"],webBindPort:8765},null,2)})),(0,a.jsx)("button",Si({onClick:function(){return navigator.clipboard.writeText(JSON.stringify({apiKey:r||"your_api_key",webCorsOriginList:["http://localhost","*"],webBindPort:8765},null,2))},style:{position:"absolute",top:"8px",right:"8px",background:"transparent",border:"none",cursor:"pointer",padding:"4px"},title:"Copy to clipboard"},{children:(0,a.jsx)("img",{src:f,alt:"Copy Icon",style:{width:"16px",height:"16px"}})}))]}))]})]}))};var Ei="FETCH_DECKS_SUCCESS",Ci="SET_DECK_ID",_i=function(e){return{type:Ci,payload:e}},ji=function(){return ji=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ji.apply(this,arguments)},Ai=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Ii=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Oi=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const Pi=function(e){e.onBackClick;var t=C(),n=m((function(e){return e.cards})).storedCards,o=m((function(e){return e.deck.deckId})),i=m((function(e){return e.deck.decks})),s=m((function(e){return e.settings.useAnkiConnect})),l=m((function(e){return e.settings.ankiConnectUrl})),c=m((function(e){return e.settings.ankiConnectApiKey})),u=m((function(e){return e.settings.openAiKey})),d=m((function(e){return e.settings.huggingFaceApiKey})),f=m((function(e){return e.settings.imageInstructions})),p=(0,r.useState)([]),h=p[0],g=p[1],y=(0,r.useState)(!1),b=y[0],v=y[1],x=(0,r.useState)(!1),w=x[0],S=x[1],k=(0,r.useState)("not_exported"),E=k[0],_=k[1],j=(0,r.useState)(!1),I=j[0],O=j[1],P=(0,r.useState)(null),T=P[0],F=P[1],R=(0,r.useState)(null),z=R[0],N=R[1],L=(0,r.useState)(!1),M=L[0],D=L[1],$=(0,r.useState)(1),U=$[0],W=$[1],H=(0,r.useState)(10),q=H[0],V=H[1],K=(0,r.useState)(1),Q=K[0],J=K[1],X=oi(),Y=X.showError,ee=X.renderErrorNotification,ne=new Na({apiKey:u,dangerouslyAllowBrowser:!0});(0,r.useEffect)((function(){Ai(void 0,void 0,void 0,(function(){var e,r,o;return Ii(this,(function(a){console.log("StoredCards component mounted, forcing complete reload of cards...");try{if(e=localStorage.getItem("anki_stored_cards"))try{r=JSON.parse(e),console.log("Direct from localStorage, found cards:",r.length)}catch(e){console.error("Failed to parse localStorage data directly:",e)}else console.log("No cards found directly in localStorage")}catch(e){console.error("Error accessing localStorage directly:",e)}return t(te()),o=setTimeout((function(){if(console.log("Current stored cards after initial load:",n.length),0===n.length){console.log("No cards loaded, trying to load directly from localStorage...");try{var e=localStorage.getItem("anki_stored_cards");if(e){var r=JSON.parse(e);Array.isArray(r)&&r.length>0&&(console.log("Found cards directly in localStorage, manually setting in Redux..."),t({type:"SET_STORED_CARDS",payload:r}))}}catch(e){console.error("Failed to manually load cards:",e)}}if(n.length>0){var o=n.filter((function(e){return"not_exported"===e.exportStatus})).length,a=n.filter((function(e){return"exported_to_anki"===e.exportStatus||"exported_to_file"===e.exportStatus})).length;console.log("Card stats: total=",n.length,"not_exported=",o,"exported=",a)}}),500),[2,function(){return clearTimeout(o)}]}))}))}),[t,n.length]),(0,r.useEffect)((function(){console.log("Stored cards updated:",n)}),[n]);var re=function(){return Ai(void 0,void 0,void 0,(function(){var e,n;return Ii(this,(function(r){switch(r.label){case 0:if(!s)return[2];r.label=1;case 1:return r.trys.push([1,3,4,5]),S(!0),[4,B(c)];case 2:return(e=r.sent()).result&&(t({type:"FETCH_DECKS_SUCCESS",payload:e.result}),!o&&e.result.length>0&&t(_i(e.result[0].deckId))),[3,5];case 3:return n=r.sent(),console.error("Error loading decks:",n),s&&Y("Failed to load Anki decks. Make sure Anki is running with AnkiConnect plugin."),[3,5];case 4:return S(!1),[7];case 5:return[2]}}))}))};(0,r.useEffect)((function(){s&&0===i.length&&re()}),[s]);var oe=function(){if(console.log("All cards in store:",n.length,"cards"),!Array.isArray(n)||0===n.length)return console.log("No cards to filter"),[];var e,t={not_exported:0,exported_to_anki:0,exported_to_file:0,unknown:0};switch(n.forEach((function(e){"not_exported"===e.exportStatus?t.not_exported++:"exported_to_anki"===e.exportStatus?t.exported_to_anki++:"exported_to_file"===e.exportStatus?t.exported_to_file++:t.unknown++})),console.log("Card status counts:",t),E){case"not_exported":e=n.filter((function(e){return"not_exported"===e.exportStatus})),console.log("Filtered to not_exported cards:",e.length);break;case"exported":e=n.filter((function(e){return"exported_to_anki"===e.exportStatus||"exported_to_file"===e.exportStatus})),console.log("Filtered to exported cards:",e.length);break;default:e=Oi([],n,!0),console.log("Using all cards:",e.length)}var r=e.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}));return console.log("Final filtered and sorted cards:",r.length),r}(),ae=function(){if(0===oe.length)return[];var e=(U-1)*q,t=e+q;return e>=oe.length?(W(1),oe.slice(0,q)):(console.log("Pagination debug:",{totalCards:n.length,filteredCards:oe.length,currentPage:U,itemsPerPage:q,startIndex:e,endIndex:t,cardsOnThisPage:oe.slice(e,t).length}),oe.slice(e,t))}();(0,r.useEffect)((function(){var e=Math.max(1,Math.ceil(oe.length/q));J(e),U>e&&W(1)}),[oe.length,q]);var ie,se={all:n.length,not_exported:n.filter((function(e){return"not_exported"===e.exportStatus})).length,exported:n.filter((function(e){return"exported_to_anki"===e.exportStatus||"exported_to_file"===e.exportStatus})).length},le=function(e){t(function(e){return{type:G,payload:e}}(e))},de=function(e){switch(e){case"exported_to_anki":return(0,a.jsx)("span",ji({style:{fontSize:"11px",color:"#10B981",marginLeft:"8px"}},{children:" Anki"}));case"exported_to_file":return(0,a.jsx)("span",ji({style:{fontSize:"11px",color:"#2563EB",marginLeft:"8px"}},{children:" File"}));default:return null}},fe=function(e){return T===e.id?null:e.mode===A.LanguageLearning?(0,a.jsxs)("div",ji({style:{padding:"8px"}},{children:[(0,a.jsx)("p",ji({style:{fontWeight:"bold",fontSize:"14px",marginBottom:"4px"}},{children:e.text})),e.translation&&(0,a.jsx)("p",ji({style:{color:"#374151",fontSize:"13px",marginBottom:"8px"}},{children:e.translation})),e.examples&&e.examples.length>0&&(0,a.jsxs)("div",ji({style:{marginTop:"8px"}},{children:[(0,a.jsx)("p",ji({style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"}},{children:"Examples:"})),e.examples.slice(0,1).map((function(e,t){var n=e[0],r=e[1];return(0,a.jsxs)("div",ji({style:{fontSize:"12px",marginBottom:"2px"}},{children:[(0,a.jsx)("p",ji({style:{color:"#111827",marginBottom:"2px"}},{children:n})),r&&(0,a.jsx)("p",ji({style:{color:"#6B7280",fontStyle:"italic"}},{children:r}))]}),t)})),e.examples.length>1&&(0,a.jsxs)("p",ji({style:{fontSize:"11px",color:"#6B7280"}},{children:["+",e.examples.length-1," more examples"]}))]})),e.imageUrl&&(0,a.jsx)("div",ji({style:{marginTop:"8px",textAlign:"center"}},{children:(0,a.jsx)("img",{src:e.imageUrl,alt:"",style:{maxWidth:"100%",maxHeight:"80px",borderRadius:"4px"}})}))]})):(0,a.jsxs)("div",ji({style:{padding:"8px"}},{children:[e.front&&(0,a.jsx)("p",ji({style:{fontWeight:"bold",fontSize:"14px",marginBottom:"4px"}},{children:e.front})),e.back&&(0,a.jsx)("p",ji({style:{color:"#374151",fontSize:"12px"}},{children:e.back.length>100?e.back.substring(0,100)+"...":e.back}))]}))},pe=function(e){t(_i(e.target.value))},he=function(){O((function(e){return!e}))},ge=function(e){var t=ji({},e);e.mode===A.LanguageLearning?(t.examples=Array.isArray(e.examples)?Oi([],e.examples,!0):[],t.text=t.text||"",t.translation=t.translation||""):(t.front=t.front||"",t.back=t.back||""),F(e.id),N(t)},me=function(){F(null),N(null)},ye=function(){var e;if(z)try{var n=JSON.parse(JSON.stringify(z));if(console.log("Original editFormData:",z),console.log("Deep copied updatedCardData:",n),n.id=z.id,n.createdAt=z.createdAt,n.exportStatus=z.exportStatus,Array.isArray(n.examples)?n.examples=n.examples.filter((function(e){return""!==e[0].trim()})).map((function(e){var t=e[0],n=e[1];return[t.trim(),n?n.trim():null]})):n.examples=[],n.mode===A.LanguageLearning){if(!n.text||!n.translation)return void Y("Please provide both text and translation");n.text=n.text.trim(),n.translation=n.translation.trim()}else{if(!n.front||!n.back)return void Y("Please provide both front and back content");n.front=n.front.trim(),n.back=(null===(e=n.back)||void 0===e?void 0:e.trim())||null}console.log("Final data being saved to Redux:",n),t(ue(n)),F(null),N(null),Y("Card updated successfully!","success")}catch(e){console.error("Error saving card:",e),Y("Failed to update card. Please try again.")}},ve=function(e,t){var n;z&&N(ji(ji({},z),((n={})[e]=t,n)))},xe=function(){return Ai(void 0,void 0,void 0,(function(){var e,t,n,r,o,a,i,s,l;return Ii(this,(function(c){switch(c.label){case 0:if(!z||!z.text)return[2];c.label=1;case 1:if(c.trys.push([1,13,14,15]),D(!0),!u)throw new Error("OpenAI API key is not configured. Please add it in the settings.");return console.log("Starting image generation for text:",z.text),[4,be(u,z.text,f)];case 2:if(e=c.sent(),console.log("Description generated:",e),!e)throw new Error("Failed to generate image description");c.label=3;case 3:if(c.trys.push([3,11,,12]),console.log("Attempting to generate image..."),!d)return[3,7];c.label=4;case 4:return c.trys.push([4,6,,7]),console.log("Trying HuggingFace image generation"),[4,ti(d,ne,u,e,f)];case 5:if(t=c.sent(),console.log("Image generation result:",t),t.imageUrl&&t.imageBase64)return N(ji(ji({},z),{imageUrl:t.imageUrl,image:t.imageBase64})),Y("New image generated successfully!","success"),[2];throw new Error("HuggingFace image generation failed");case 6:return n=c.sent(),console.error("HuggingFace error:",n),[3,7];case 7:return console.log("Trying direct OpenAI image generation"),r=f?"".concat(e,". ").concat(f):e,[4,fetch("https://api.openai.com/v1/images/generations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify({prompt:r,n:1,size:"512x512",response_format:"url"})})];case 8:return[4,c.sent().json()];case 9:if(o=c.sent(),console.log("OpenAI direct API response:",o),!o.data||!o.data[0]||!o.data[0].url)throw new Error("OpenAI did not return an image URL");return a=o.data[0].url,console.log("Image URL generated:",a),console.log("Sending message to background script to fetch image"),[4,new Promise((function(e,t){chrome.runtime.sendMessage(a,(function(n){if(chrome.runtime.lastError)return console.error("Error sending message:",chrome.runtime.lastError),void t(chrome.runtime.lastError);console.log("Response from background script:",n),n&&n.status&&n.data?e(n.data):t(new Error("Failed to get image data from background script"))}))}))];case 10:return i=c.sent(),console.log("Image data received from background"),N(ji(ji({},z),{imageUrl:i,image:i})),Y("New image generated successfully!","success"),[3,12];case 11:throw s=c.sent(),console.error("Error in image generation:",s),new Error("Image generation failed: ".concat((null==s?void 0:s.message)||"Unknown error"));case 12:return[3,15];case 13:return l=c.sent(),console.error("Error generating image:",l),Y("Failed to generate new image: ".concat((null==l?void 0:l.message)||"Unknown error")),[3,15];case 14:return D(!1),[7];case 15:return[2]}}))}))},we=function(){if(z&&z.mode===A.LanguageLearning)try{var e=Array.isArray(z.examples)?Oi([],z.examples,!0):[],t=Oi(Oi([],e,!0),[["",null]],!1);console.log("Adding new example, total examples:",t.length),N(ji(ji({},z),{examples:t}))}catch(e){console.error("Error adding example:",e)}else console.warn("Cannot add example: form data is null or not in language learning mode")},Se=function(e,t,n){if(z)try{for(var r=Array.isArray(z.examples)?Oi([],z.examples,!0):[],o=Oi([],r,!0);o.length<=e;)o.push(["",null]);t?(o[e][0]=n,console.log("Updated example text at index ".concat(e,":"),n.substring(0,20)+(n.length>20?"...":""))):(o[e][1]=n,console.log("Updated translation at index ".concat(e,":"),n.substring(0,20)+(n.length>20?"...":""))),N(ji(ji({},z),{examples:o}))}catch(e){console.error("Error updating example:",e)}else console.warn("Cannot change example: form data is null")},ke=function(){if(!z)return null;var e={container:{display:"flex",flexDirection:"column",gap:"16px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"16px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},title:{fontSize:"16px",fontWeight:"600",color:"#334155"},buttonGroup:{display:"flex",gap:"8px"},button:{padding:"6px 12px",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",border:"none"},cancelButton:{backgroundColor:"#f1f5f9",color:"#64748b",border:"1px solid #cbd5e1"},saveButton:{backgroundColor:"#2563eb",color:"#ffffff"},fieldGroup:{display:"flex",flexDirection:"column",gap:"4px"},label:{fontSize:"13px",color:"#475569",fontWeight:"500"},input:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"14px",color:"#334155",backgroundColor:"#ffffff"},textarea:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"14px",color:"#334155",minHeight:"80px",resize:"vertical",backgroundColor:"#ffffff"},imageContainer:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},image:{maxWidth:"100%",maxHeight:"200px",borderRadius:"6px"},imageButton:{backgroundColor:"#10b981",color:"#ffffff",border:"none",padding:"6px 12px",borderRadius:"6px",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},examplesContainer:{display:"flex",flexDirection:"column",gap:"8px"},exampleItem:{display:"flex",flexDirection:"column",gap:"4px",backgroundColor:"#f1f5f9",padding:"8px",borderRadius:"6px",position:"relative"},exampleHeader:{display:"flex",justifyContent:"space-between"},removeButton:{backgroundColor:"transparent",border:"none",color:"#ef4444",cursor:"pointer",padding:"2px",position:"absolute",top:"8px",right:"8px"},addButton:{backgroundColor:"#f8fafc",color:"#2563eb",border:"1px dashed #94a3b8",padding:"8px 12px",borderRadius:"6px",fontSize:"13px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",cursor:"pointer",width:"100%",marginTop:"8px"}};return(0,a.jsxs)("div",ji({style:e.container},{children:[(0,a.jsxs)("div",ji({style:e.header},{children:[(0,a.jsx)("h3",ji({style:e.title},{children:"Edit Card"})),(0,a.jsxs)("div",ji({style:e.buttonGroup},{children:[(0,a.jsxs)("button",ji({onClick:me,style:ji(ji({},e.button),e.cancelButton)},{children:[(0,a.jsx)(dt,{size:12})," Cancel"]})),(0,a.jsxs)("button",ji({onClick:ye,style:ji(ji({},e.button),e.saveButton)},{children:[(0,a.jsx)(qe,{size:12})," Save"]}))]}))]})),z.mode===A.LanguageLearning?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",ji({style:e.fieldGroup},{children:[(0,a.jsx)("label",ji({style:e.label},{children:"Text"})),(0,a.jsx)("input",{type:"text",value:z.text||"",onChange:function(e){return ve("text",e.target.value)},style:e.input})]})),(0,a.jsxs)("div",ji({style:e.fieldGroup},{children:[(0,a.jsx)("label",ji({style:e.label},{children:"Translation"})),(0,a.jsx)("input",{type:"text",value:z.translation||"",onChange:function(e){return ve("translation",e.target.value)},style:e.input})]})),(0,a.jsxs)("div",ji({style:e.fieldGroup},{children:[(0,a.jsx)("label",ji({style:e.label},{children:"Examples"})),(0,a.jsxs)("div",ji({style:e.examplesContainer},{children:[Array.isArray(z.examples)&&z.examples.length>0?z.examples.map((function(t,n){return(0,a.jsxs)("div",ji({style:e.exampleItem},{children:[(0,a.jsx)("button",ji({onClick:function(){return function(e){if(z)try{var t=Array.isArray(z.examples)?Oi([],z.examples,!0):[];if(e<0||e>=t.length)return void console.warn("Invalid example index: ".concat(e,", examples length: ").concat(t.length));var n=Oi(Oi([],t.slice(0,e),!0),t.slice(e+1),!0);console.log("Removed example at index ".concat(e,", remaining examples:"),n.length),N(ji(ji({},z),{examples:n}))}catch(e){console.error("Error removing example:",e)}else console.warn("Cannot remove example: form data is null")}(n)},style:e.removeButton,type:"button"},{children:(0,a.jsx)(dt,{size:12})})),(0,a.jsx)("input",{type:"text",value:t[0]||"",onChange:function(e){return Se(n,!0,e.target.value)},placeholder:"Example",style:e.input}),(0,a.jsx)("input",{type:"text",value:t[1]||"",onChange:function(e){return Se(n,!1,e.target.value)},placeholder:"Translation (optional)",style:e.input})]}),n)})):(0,a.jsx)("div",ji({style:{padding:"12px",textAlign:"center",color:"#64748b",fontSize:"14px",backgroundColor:"#f1f5f9",borderRadius:"6px",marginBottom:"8px"}},{children:"No examples added yet"})),(0,a.jsx)("button",ji({onClick:we,style:e.addButton,type:"button"},{children:"+ Add Example"}))]}))]})),(0,a.jsxs)("div",ji({style:e.fieldGroup},{children:[(0,a.jsx)("label",ji({style:e.label},{children:"Image"})),(0,a.jsxs)("div",ji({style:e.imageContainer},{children:[z.imageUrl?(0,a.jsx)("img",{src:z.imageUrl,alt:"",style:e.image}):(0,a.jsx)("div",ji({style:{width:"100%",height:"100px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9",borderRadius:"6px",color:"#64748b",fontSize:"14px"}},{children:"No image available"})),(0,a.jsxs)("button",ji({onClick:xe,disabled:M,style:e.imageButton},{children:[(0,a.jsx)(tt,{size:14}),M?(0,a.jsx)("div",ji({style:{display:"flex",alignItems:"center",justifyContent:"center"}},{children:(0,a.jsx)(ht,{type:"pulse",size:"small",inline:!0,color:"#ffffff",text:"Generating"})})):"Generate New Image"]}))]}))]}))]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",ji({style:e.fieldGroup},{children:[(0,a.jsx)("label",ji({style:e.label},{children:"Front"})),(0,a.jsx)("input",{type:"text",value:z.front||"",onChange:function(e){return ve("front",e.target.value)},style:e.input})]})),(0,a.jsxs)("div",ji({style:e.fieldGroup},{children:[(0,a.jsx)("label",ji({style:e.label},{children:"Back"})),(0,a.jsx)("textarea",{value:z.back||"",onChange:function(e){return ve("back",e.target.value)},style:e.textarea})]}))]})]}))},Ee=function(e){e>=1&&e<=Q&&W(e)},Ce=function(e){V(Number(e.target.value)),W(1)};return(0,a.jsxs)("div",ji({style:{display:"flex",flexDirection:"column",height:"100%",padding:"12px",paddingBottom:"20px",overflowY:"auto",width:"100%",maxWidth:"320px",margin:"0 auto"}},{children:[(0,a.jsx)("div",ji({style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid #E5E7EB",marginTop:"20px"}},{children:(0,a.jsxs)("div",ji({style:{fontWeight:"600",fontSize:"16px",color:"#111827",background:"linear-gradient(to right, #4F46E5, #2563EB)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",padding:"4px 12px",borderRadius:"16px",border:"1px solid #E5E7EB",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"}},{children:["Saved Cards (",n.length,")"]}))})),ee(),n.length>0?(0,a.jsxs)(a.Fragment,{children:[(ie={base:{padding:"8px 16px",fontSize:"14px",fontWeight:"500",borderRadius:"6px 6px 0 0",cursor:"pointer",textAlign:"center",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},active:{backgroundColor:"#ffffff",color:"#2563EB",borderBottom:"2px solid #2563EB"},inactive:{backgroundColor:"#F3F4F6",color:"#6B7280",borderBottom:"2px solid transparent"}},(0,a.jsxs)("div",ji({style:{display:"flex",width:"100%",borderBottom:"1px solid #E5E7EB",marginBottom:"16px",backgroundColor:"#F3F4F6"}},{children:[(0,a.jsxs)("div",ji({onClick:function(){return _("not_exported")},style:ji(ji(ji({},ie.base),"not_exported"===E?ie.active:ie.inactive),{flex:1})},{children:["New",(0,a.jsx)("span",ji({style:{backgroundColor:"not_exported"===E?"#2563EB":"#9CA3AF",color:"white",borderRadius:"9999px",fontSize:"12px",padding:"1px 6px",minWidth:"20px"}},{children:se.not_exported}))]})),(0,a.jsxs)("div",ji({onClick:function(){return _("all")},style:ji(ji(ji({},ie.base),"all"===E?ie.active:ie.inactive),{flex:1})},{children:["All",(0,a.jsx)("span",ji({style:{backgroundColor:"all"===E?"#2563EB":"#9CA3AF",color:"white",borderRadius:"9999px",fontSize:"12px",padding:"1px 6px",minWidth:"20px"}},{children:se.all}))]})),(0,a.jsxs)("div",ji({onClick:function(){return _("exported")},style:ji(ji(ji({},ie.base),"exported"===E?ie.active:ie.inactive),{flex:1})},{children:["Exported",(0,a.jsx)("span",ji({style:{backgroundColor:"exported"===E?"#2563EB":"#9CA3AF",color:"white",borderRadius:"9999px",fontSize:"12px",padding:"1px 6px",minWidth:"20px"}},{children:se.exported}))]}))]}))),s&&function(){var e;if(!s)return null;var t={container:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px",backgroundColor:"#F9FAFB",padding:"12px",borderRadius:"8px",border:"1px solid #E5E7EB"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},title:{fontSize:"14px",fontWeight:"600",color:"#111827"},button:{backgroundColor:"transparent",border:"none",cursor:"pointer",color:"#6B7280",display:"flex",alignItems:"center",padding:"0",fontSize:"12px"},selectContainer:{display:"flex",alignItems:"center",gap:"8px",width:"100%"},select:{flex:1,padding:"8px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"#ffffff",color:"#374151",fontSize:"14px",cursor:"pointer"},refreshButton:{backgroundColor:"#F3F4F6",border:"1px solid #E5E7EB",borderRadius:"6px",cursor:"pointer",color:"#6B7280",display:"flex",alignItems:"center",justifyContent:"center",padding:"8px",minWidth:"36px",height:"38px"}};return I?(0,a.jsxs)("div",ji({style:t.container},{children:[(0,a.jsxs)("div",ji({style:t.header},{children:[(0,a.jsx)("span",ji({style:t.title},{children:"Select Anki Deck"})),(0,a.jsx)("button",ji({onClick:he,style:t.button},{children:"Hide"}))]})),(0,a.jsxs)("div",ji({style:t.selectContainer},{children:[(0,a.jsxs)("select",ji({value:o,onChange:pe,style:t.select,disabled:w},{children:[0===i.length&&(0,a.jsx)("option",ji({value:""},{children:"No decks available"})),i.map((function(e){return(0,a.jsx)("option",ji({value:e.deckId},{children:e.name}),e.deckId)}))]})),(0,a.jsx)("button",ji({onClick:re,disabled:w,title:"Refresh decks list",style:t.refreshButton,"aria-label":"Refresh decks"},{children:w?(0,a.jsx)("span",ji({style:{marginLeft:"2px"}},{children:(0,a.jsx)(ht,{type:"spinner",size:"small",color:"#4B5563"})})):(0,a.jsx)(ct,{size:14})}))]})),(0,a.jsx)("style",{children:"\n                    @keyframes spin {\n                        0% { transform: rotate(0deg); }\n                        100% { transform: rotate(360deg); }\n                    }\n                    "})]})):(0,a.jsxs)("div",ji({style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:"12px",padding:"8px 12px",backgroundColor:"#F9FAFB",borderRadius:"6px",border:"1px solid #E5E7EB"}},{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",ji({style:{fontSize:"13px",color:"#6B7280"}},{children:"Anki Deck:"})),(0,a.jsx)("span",ji({style:{fontSize:"14px",fontWeight:"500",marginLeft:"8px",color:"#111827"}},{children:(null===(e=i.find((function(e){return e.deckId===o})))||void 0===e?void 0:e.name)||"None selected"}))]}),(0,a.jsx)("button",ji({onClick:he,style:{backgroundColor:"transparent",border:"none",cursor:"pointer",color:"#2563EB",fontSize:"13px"}},{children:"Change"}))]}))}(),(0,a.jsxs)("div",ji({style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"}},{children:[(0,a.jsxs)("div",ji({style:{display:"flex",alignItems:"center"}},{children:[(0,a.jsx)("input",{type:"checkbox",id:"selectAll",checked:h.length===oe.length&&oe.length>0,onChange:function(){T||(h.length===oe.length?g([]):g(oe.map((function(e){return e.id}))))},style:{marginRight:"8px"},disabled:null!==T}),(0,a.jsx)("label",ji({htmlFor:"selectAll",style:{fontSize:"14px",cursor:null!==T?"default":"pointer",opacity:null!==T?.6:1}},{children:h.length===oe.length&&oe.length>0?"Deselect All":"Select All"}))]})),(0,a.jsxs)("div",ji({style:{display:"flex",gap:"8px"}},{children:[(0,a.jsx)("button",ji({onClick:function(){return Ai(void 0,void 0,void 0,(function(){var e,r,a,i;return Ii(this,(function(s){switch(s.label){case 0:if(0===h.length)return Y("Please select at least one card to save"),[2];v(!0),s.label=1;case 1:return s.trys.push([1,6,7,8]),e="Basic",r=n.filter((function(e){return h.includes(e.id)})),a=[],i=[],r.forEach((function(e){if(e.mode===A.LanguageLearning&&e.translation){var t=null;if(e.image)if(e.image.startsWith("data:")){var n="base64,",r=e.image.indexOf(n);t=-1!==r?e.image.substring(r+7):e.image}else t=e.image;a.push({text:e.text,translation:e.translation,examples:e.examples||[],image_base64:t})}else e.mode===A.GeneralTopic&&e.front&&e.back&&i.push({front:e.front,back:e.back,text:e.text})})),a.length>0?[4,t(Z(A.LanguageLearning,l,c,o,e,a))]:[3,3];case 2:s.sent(),s.label=3;case 3:return i.length>0?[4,t(Z(A.GeneralTopic,l,c,o,e,i))]:[3,5];case 4:s.sent(),s.label=5;case 5:return h.forEach((function(e){t(ce(e,"exported_to_anki")),console.log("Updated card ".concat(e," export status to 'exported_to_anki'"))})),Y("Cards saved to Anki successfully!","success"),setTimeout((function(){try{var e=localStorage.getItem("anki_stored_cards");if(e){var t=JSON.parse(e);console.log("Verified localStorage after export:",t.filter((function(e){return e.id&&h.includes(e.id)})).map((function(e){return{id:e.id,status:e.exportStatus}})))}}catch(e){console.error("Error verifying localStorage after export:",e)}}),500),[3,8];case 6:return s.sent(),Y("Failed to save cards to Anki. Make sure Anki is running and AnkiConnect is properly configured."),[3,8];case 7:return v(!1),[7];case 8:return[2]}}))}))},disabled:b||0===h.length||!s||!o||null!==T,style:{padding:"6px 10px",borderRadius:"6px",backgroundColor:"#10B981",color:"#ffffff",fontSize:"13px",border:"none",cursor:"pointer",opacity:!b&&0!==h.length&&s&&o&&null===T?1:.6},title:null!==T?"Finish editing first":!o&&s?"Please select a deck first":""},{children:b?(0,a.jsx)("div",ji({style:{display:"flex",alignItems:"center",justifyContent:"center"}},{children:(0,a.jsx)(ht,{type:"spinner",size:"small",inline:!0,color:"#ffffff",text:"Saving to Anki"})})):"Save to Anki"})),(0,a.jsxs)("button",ji({onClick:function(){if(0!==h.length){var e=n.filter((function(e){return h.includes(e.id)})),r="#separator:tab\n#html:true\n";e.forEach((function(e,t){if(e.mode===A.LanguageLearning){var n=e.text.trim(),o="";if(e.translation&&(o+="<b>".concat(e.translation,"</b>")),e.examples&&e.examples.length>0&&(o+="<br><br>",e.examples.forEach((function(e,t){var n=e[0],r=e[1];o+="".concat(t+1,". ").concat(n),r&&(o+="<br><span style='font-size: 0.8em;'><i>".concat(r,"</i></span>")),o+="<br><br>"}))),e.image){var a=e.image;if(a.startsWith("data:")){var i="base64,";if(-1!==(c=a.indexOf(i))){var s=a.substring(c+i.length);o+='<div><img src="data:image/jpeg;base64,'.concat(s,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>')}else o+='<div><img src="'.concat(a,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>')}else o+='<div><img src="data:image/jpeg;base64,'.concat(a,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>')}else if(e.imageUrl){var l=e.imageUrl;if(l.startsWith("data:")){var c;i="base64,";if(-1!==(c=l.indexOf(i))){s=l.substring(c+i.length);o+='<div><img src="data:image/jpeg;base64,'.concat(s,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>')}else o+='<div><img src="'.concat(l,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>')}else l.startsWith("http")?o+='<div><img src="'.concat(l,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>'):o+='<div><img src="data:image/jpeg;base64,'.concat(l,'" style="max-width: 350px; max-height: 350px; margin: 0 auto;"></div>')}r+="".concat(n,"\t").concat(o,"\n")}else if(e.mode===A.GeneralTopic){n=(e.front||"").trim();var u=(e.back||"").trim();r+="".concat(n,"\t").concat(u,"\n")}}));var o=new Blob([r],{type:"text/plain;charset=utf-8;"}),a=URL.createObjectURL(o),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download","anki_cards.txt"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),h.forEach((function(e){t(ce(e,"exported_to_file")),console.log("Updated card ".concat(e," export status to 'exported_to_file'"))})),setTimeout((function(){try{var e=localStorage.getItem("anki_stored_cards");if(e){var t=JSON.parse(e);console.log("Verified localStorage after file export:",t.filter((function(e){return e.id&&h.includes(e.id)})).map((function(e){return{id:e.id,status:e.exportStatus}})))}}catch(e){console.error("Error verifying localStorage after file export:",e)}}),500)}else Y("Please select at least one card to export")},disabled:b||0===h.length||null!==T,style:{padding:"6px 10px",borderRadius:"6px",backgroundColor:"#2563EB",color:"#ffffff",fontSize:"13px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",opacity:b||0===h.length||null!==T?.6:1}},{children:[(0,a.jsx)(Ye,{size:12}),(0,a.jsx)("span",{children:"Export"})]}))]}))]})),(0,a.jsx)("div",ji({style:{flex:1,overflow:"auto",marginBottom:"16px"}},{children:0===oe.length?(0,a.jsx)("div",ji({style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"200px",color:"#6B7280",textAlign:"center",padding:"20px"}},{children:(0,a.jsx)("p",ji({style:{fontSize:"14px"}},{children:"all"===E?"No cards yet":"not_exported"===E?"No new cards":"No exported cards"}))})):ae.map((function(e){return(0,a.jsxs)("div",ji({style:{border:"1px solid #E5E7EB",borderRadius:"6px",marginBottom:"8px",backgroundColor:h.includes(e.id)?"#F3F4F6":"#ffffff"}},{children:[(0,a.jsxs)("div",ji({style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",borderBottom:T===e.id?"none":"1px solid #E5E7EB"}},{children:[(0,a.jsxs)("div",ji({style:{display:"flex",alignItems:"center"}},{children:[(0,a.jsx)("input",{type:"checkbox",checked:h.includes(e.id),onChange:function(){return t=e.id,void(T||(h.includes(t)?g(h.filter((function(e){return e!==t}))):g(Oi(Oi([],h,!0),[t],!1))));var t},style:{marginRight:"8px"},disabled:T===e.id}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",ji({style:{fontSize:"12px",color:"#6B7280"}},{children:e.mode===A.LanguageLearning?"Language":"Topic"})),(0,a.jsx)("span",ji({style:{fontSize:"11px",color:"#9CA3AF",marginLeft:"8px"}},{children:(t=e.createdAt,n=new Date(t),n.toLocaleDateString()+" "+n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})),de(e.exportStatus)]})]})),(0,a.jsx)("div",ji({style:{display:"flex",gap:"8px"}},{children:T!==e.id&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",ji({onClick:function(){return ge(e)},style:{backgroundColor:"transparent",border:"none",cursor:"pointer",color:"#2563EB",display:"flex",alignItems:"center",padding:"4px",opacity:.8,transition:"opacity 0.2s"},title:"Edit card",onMouseOver:function(e){return e.currentTarget.style.opacity="1"},onMouseOut:function(e){return e.currentTarget.style.opacity="0.8"}},{children:(0,a.jsx)(Ze,{size:14})})),(0,a.jsx)("button",ji({onClick:function(){return le(e.id)},style:{backgroundColor:"transparent",border:"none",cursor:"pointer",color:"#EF4444",display:"flex",alignItems:"center",padding:"4px",opacity:.8,transition:"opacity 0.2s"},title:"Delete card",onMouseOver:function(e){return e.currentTarget.style.opacity="1"},onMouseOut:function(e){return e.currentTarget.style.opacity="0.8"}},{children:(0,a.jsx)(ft,{size:14})}))]})}))]})),T===e.id?ke():fe(e)]}),e.id);var t,n}))})),(0,a.jsxs)("div",ji({style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"16px",marginBottom:"16px",padding:"12px",backgroundColor:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB"}},{children:[(0,a.jsxs)("div",ji({style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:[(0,a.jsx)("div",ji({style:{display:"flex",alignItems:"center",gap:"8px"}},{children:(0,a.jsxs)("select",ji({value:q,onChange:Ce,style:{padding:"6px 8px",borderRadius:"6px",border:"1px solid #D1D5DB",fontSize:"13px",backgroundColor:"#FFFFFF",color:"#111827",fontWeight:"500",cursor:"pointer",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundImage:'url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2212%22%20height%3D%2212%22%20viewBox%3D%220%200%2012%2012%22%3E%3Cpath%20fill%3D%22%23424242%22%20d%3D%22M6%2C9L1.2%2C4.2%20c-0.4-0.4-0.4-1%2C0-1.4s1-0.4%2C1.4%2C0L6%2C6.2l3.4-3.4c0.4-0.4%2C1-0.4%2C1.4%2C0s0.4%2C1%2C0%2C1.4L6%2C9z%22%2F%3E%3C%2Fsvg%3E")',backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",paddingRight:"28px",minWidth:"90px"},"aria-label":"Cards per page"},{children:[(0,a.jsx)("option",ji({value:5},{children:"5 per page"})),(0,a.jsx)("option",ji({value:10},{children:"10 per page"})),(0,a.jsx)("option",ji({value:20},{children:"20 per page"})),(0,a.jsx)("option",ji({value:50},{children:"50 per page"}))]}))})),(0,a.jsx)("div",ji({style:{display:"flex",alignItems:"center",fontSize:"13px",fontWeight:"500",color:"#4B5563"}},{children:oe.length>0?"".concat(Math.min((U-1)*q+1,oe.length),"-").concat(Math.min(U*q,oe.length)," of ").concat(oe.length," cards"):"0 cards"}))]})),(0,a.jsx)("div",ji({style:{display:"flex",justifyContent:"center",alignItems:"center"}},{children:(0,a.jsxs)("div",ji({style:{display:"flex",alignItems:"center",border:"1px solid #D1D5DB",borderRadius:"8px",overflow:"hidden",backgroundColor:"#FFFFFF",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"}},{children:[(0,a.jsx)("button",ji({onClick:function(){return Ee(1)},disabled:1===U,style:{padding:"8px 10px",backgroundColor:"transparent",border:"none",borderRight:"1px solid #E5E7EB",cursor:1===U?"default":"pointer",color:1===U?"#9CA3AF":"#111827",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseOver:function(e){1!==U&&(e.currentTarget.style.backgroundColor="#F9FAFB")},onMouseOut:function(e){e.currentTarget.style.backgroundColor="transparent"},"aria-label":"Go to first page",title:"First page"},{children:(0,a.jsx)("svg",ji({width:"14",height:"14",fill:"currentColor",viewBox:"0 0 20 20"},{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M15.707 15.707a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 010 1.414zm-6 0a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 011.414 1.414L5.414 10l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}))})),(0,a.jsx)("button",ji({onClick:function(){return Ee(U-1)},disabled:1===U,style:{padding:"8px 12px",backgroundColor:"transparent",border:"none",borderRight:"1px solid #E5E7EB",cursor:1===U?"default":"pointer",color:1===U?"#9CA3AF":"#111827",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseOver:function(e){1!==U&&(e.currentTarget.style.backgroundColor="#F9FAFB")},onMouseOut:function(e){e.currentTarget.style.backgroundColor="transparent"},"aria-label":"Previous page",title:"Previous page"},{children:(0,a.jsx)(Ke,{size:14})})),(0,a.jsxs)("div",ji({style:{padding:"6px 16px",fontSize:"13px",fontWeight:"500",color:"#111827",display:"flex",alignItems:"center",backgroundColor:"transparent",borderRight:"1px solid #E5E7EB",minWidth:"60px",justifyContent:"center"}},{children:[U," / ",Q||1]})),(0,a.jsx)("button",ji({onClick:function(){return Ee(U+1)},disabled:U===Q||0===Q,style:{padding:"8px 12px",backgroundColor:"transparent",border:"none",borderRight:"1px solid #E5E7EB",cursor:U===Q||0===Q?"default":"pointer",color:U===Q||0===Q?"#9CA3AF":"#111827",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseOver:function(e){U!==Q&&0!==Q&&(e.currentTarget.style.backgroundColor="#F9FAFB")},onMouseOut:function(e){e.currentTarget.style.backgroundColor="transparent"},"aria-label":"Next page",title:"Next page"},{children:(0,a.jsx)(Ge,{size:14})})),(0,a.jsx)("button",ji({onClick:function(){return Ee(Q)},disabled:U===Q||0===Q,style:{padding:"8px 10px",backgroundColor:"transparent",border:"none",cursor:U===Q||0===Q?"default":"pointer",color:U===Q||0===Q?"#9CA3AF":"#111827",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseOver:function(e){U!==Q&&0!==Q&&(e.currentTarget.style.backgroundColor="#F9FAFB")},onMouseOut:function(e){e.currentTarget.style.backgroundColor="transparent"},"aria-label":"Go to last page",title:"Last page"},{children:(0,a.jsx)("svg",ji({width:"14",height:"14",fill:"currentColor",viewBox:"0 0 20 20"},{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 15.707a1 1 0 001.414 0l5-5a1 1 0 000-1.414l-5-5a1 1 0 00-1.414 1.414L8.586 10l-4.293 4.293a1 1 0 000 1.414zm6 0a1 1 0 001.414 0l5-5a1 1 0 000-1.414l-5-5a1 1 0 00-1.414 1.414L14.586 10l-4.293 4.293a1 1 0 000 1.414z",clipRule:"evenodd"})}))}))]}))}))]}))]}):(0,a.jsx)("div",ji({style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"300px",color:"#6B7280",textAlign:"center"}},{children:(0,a.jsx)("p",{children:"No saved cards yet."})}))]}))};
/**
 * @license
 * ReduxedChromeStorage v3.0.10
 * https://github.com/hindmost/reduxed-chrome-storage
 * Copyright (c) Savr Goryaev aka hindmost
 *
 * This source code is licensed under the MIT license
 * https://github.com/hindmost/reduxed-chrome-storage/blob/master/LICENSE
 *
 * Dependencies:
 *
 * uuid v8.3.2
 */
var Ti,Fi=new Uint8Array(16);function Ri(){if(!Ti&&!(Ti="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ti(Fi)}var Bi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var zi=[],Ni=0;Ni<256;++Ni)zi.push((Ni+256).toString(16).substr(1));function Li(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(zi[e[t+0]]+zi[e[t+1]]+zi[e[t+2]]+zi[e[t+3]]+"-"+zi[e[t+4]]+zi[e[t+5]]+"-"+zi[e[t+6]]+zi[e[t+7]]+"-"+zi[e[t+8]]+zi[e[t+9]]+"-"+zi[e[t+10]]+zi[e[t+11]]+zi[e[t+12]]+zi[e[t+13]]+zi[e[t+14]]+zi[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Bi.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n}function Mi(e,t,n){var r=(e=e||{}).random||(e.rng||Ri)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return Li(r)}function Di(e){return null==e||"object"!=typeof e?e:JSON.parse(JSON.stringify(e))}function $i(e,t){if(e===t)return!0;if(null==e||"object"!=typeof e||null==t||"object"!=typeof t||Array.isArray(e)!==Array.isArray(t))return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(r.indexOf(o)<=-1||!$i(e[o],t[o]))return!1;return!0}function Ui(e,t){if(e===t)return;if(null==e||"object"!=typeof e||null==t||"object"!=typeof t)return e;if(Array.isArray(e)||Array.isArray(t))return $i(e,t)?void 0:e;const n=Object.keys(e),r=Object.keys(t);let o=!0;const a=n.reduce(((n,a)=>{const i=r.indexOf(a)>-1?Ui(e[a],t[a]):e[a];return void 0===i||(o=!1,n[a]=i),n}),{});return r.forEach((e=>{n.indexOf(e)>-1||(o=!1,a[e]=void 0)})),o?void 0:a}function Wi(e,t,n){if(Array.isArray(t))return Di(t);if(null==e||"object"!=typeof e||Array.isArray(e)||null==t||"object"!=typeof t)return Di(void 0!==t?t:e);const r=Object.keys(e).concat(Object.keys(t).filter((t=>!(t in e)))).reduce(((r,o)=>(r[o]=Wi(e[o],t[o],n),r)),{});if(!n)return r;const o=Object.keys(t);return Object.keys(e).forEach((e=>{o.indexOf(e)>-1||delete r[e]})),r}const Hi=e=>{if(void 0===e||!Array.isArray(e)||3!==e.length)return[e,"",0];const[t,n,r]=e;return"string"==typeof t&&"number"==typeof n?[r,t,n]:[e,"",0]};class qi{constructor(e,t,n,r,o,a,i){this.container=e,this.storage=t,this.isolated=n,this.plain=r,this.timeout=o?Math.max(o,500):1e3,this.resetState=i,this.store=this._instantiateStore(),this.state=null,this.id=Mi(),this.tmstamp=0,this.outdted=[],"function"==typeof a&&(this.lisner=a),this.lisners=[],this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.dispatch=this.dispatch.bind(this),this.replaceReducer=this.replaceReducer.bind(this),this[Symbol.observable]=this[Symbol.observable].bind(this)}init(){this.tmstamp||this.isolated||this.storage.subscribe(((e,t)=>{const[n,r,o]=Hi(e);if(r===this.id||$i(n,this.state))return;const a=o>=this.tmstamp,i=a?Wi(this.state,n,!0):Wi(n,this.state,!0);!a&&$i(i,this.state)||(this._setState(i,o),this._renewStore(),$i(i,n)||this._send2Storage(),this._callListeners())}));const e=this.store.getState();return new Promise((t=>{this.storage.load((n=>{const[r,,o]=Hi(n);let a=r?Wi(e,r):e;this.resetState&&(a=Wi(a,this.resetState)),this._setState(a,o),this._renewStore(),$i(a,r)||this._send2Storage(),t(this)}))}))}initFrom(e){return this._setState(e,0),this._renewStore(),this}_setState(e,t){this.state=Di(e),(t=void 0!==t?t:Date.now())>this.tmstamp&&(this.tmstamp=t)}_renewStore(){this.plain?this.unsub&&this.unsub():this._clean();const e=this.store=this._instantiateStore(this.state),t=Date.now(),n=this.outdted.length;this.outdted=this.outdted.map((([e,r],o)=>e||o>=n-1?[e,r]:[t,r]));let r=Di(this.state);const o=this.store.subscribe((()=>{const t=e&&e.getState(),n=this.store===e;if(this._clean(),!$i(t,this.state)){if(n)this._setState(t);else{const e=Ui(t,r);if(void 0===e)return;this._setState(Wi(this.state,e)),this._renewStore()}this._send2Storage(),this._callListeners(!0,r),r=Di(t)}}));this.plain?this.unsub=o:this.outdted.push([0,o])}_clean(){if(this.plain)return;const e=Date.now(),t=this.outdted.length;this.outdted.forEach((([n,r],o)=>{o>=t-1||e-n<this.timeout||(r(),delete this.outdted[o])}))}_instantiateStore(e){const t=this.container(e);if("object"!=typeof t||"function"!=typeof t.getState)throw new Error("Invalid 'storeCreatorContainer' supplied");return t}_send2Storage(){var e,t,n;this.storage.save((e=this.state,t=this.id,n=this.tmstamp,[t,n,e]))}_callListeners(e,t){e&&this.lisner&&this.lisner(this,t);for(const e of this.lisners)e()}getState(){return this.state}subscribe(e){return"function"==typeof e&&this.lisners.push(e),()=>{"function"==typeof e&&(this.lisners=this.lisners.filter((t=>t!==e)))}}dispatch(e){return this.store.dispatch(e)}replaceReducer(e){return"function"==typeof e&&this.store.replaceReducer(e),this}[Symbol.observable](){const e=this.getState,t=this.subscribe;return{subscribe(n){if("object"!=typeof n||null===n)throw new TypeError("Expected the observer to be an object.");function r(){const t=n;t.next&&t.next(e())}r();return{unsubscribe:t(r)}},[Symbol.observable](){return this}}}}var Vi;!function(e){e.local="local",e.sync="sync"}(Vi||(Vi={}));const Ki=e=>(new TextEncoder).encode(Object.entries(e).map((([e,t])=>e+JSON.stringify(t))).join("")).length;class Gi{constructor({namespace:e,area:t,key:n}){this.ns=e,this.areaName=t===Vi.sync?Vi.sync:Vi.local,this.key=n||"reduxed",this.listeners=[],this.errListeners=[]}regShared(){this.regListener(((e,t)=>{for(const n of this.listeners)n(e,t)}))}regListener(e){this.ns.storage.onChanged.addListener(((t,n)=>{if(n!==this.areaName||!(this.key in t))return;const{newValue:r,oldValue:o}=t[this.key];r&&e(r,o)}))}subscribe(e){"function"==typeof e&&this.listeners.push(e)}subscribeForError(e){"function"==typeof e&&this.errListeners.push(e)}fireErrorListeners(e,t){for(const n of this.errListeners)n(e,t)}callbackOnLoad(e,t,n){t(!this.ns.runtime.lastError&&(n?e:e&&e[this.key]))}callbackOnSave(e,t){if(!this.ns.runtime.lastError)return;const{message:n}=this.ns.runtime.lastError;if(!n||!e||!t)return void this.fireErrorListeners(n||"",!1);this.areaName===Vi.sync&&t.QUOTA_BYTES_PER_ITEM&&Ki({[this.key]:e})>t.QUOTA_BYTES_PER_ITEM?this.fireErrorListeners(n,!0):this.load((r=>{const o="object"==typeof r&&t.QUOTA_BYTES>0&&Ki(Object.assign(Object.assign({},r),{[this.key]:e}))>t.QUOTA_BYTES;this.fireErrorListeners(n,o)}),!0)}}class Qi extends Gi{constructor({namespace:e,area:t,key:n}){super({namespace:e,area:t,key:n}),this.areaApi=this.ns.storage[this.areaName]}load(e,t){"function"==typeof e&&this.areaApi.get(t?null:this.key,(n=>{this.callbackOnLoad(n,e,t)}))}save(e){this.areaApi.set({[this.key]:e},(()=>{this.callbackOnSave(e,this.areaApi)}))}}class Ji extends Gi{constructor({namespace:e,area:t,key:n}){super({namespace:e,area:t,key:n}),this.areaApi=this.ns.storage[this.areaName]}load(e,t){"function"==typeof e&&this.areaApi.get(t?null:this.key).then((t=>{this.callbackOnLoad(t,e)}))}save(e){this.areaApi.set({[this.key]:e}).then((()=>{this.callbackOnSave(e,this.areaApi)}))}}var Xi;function Yi(e){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(e)}function Zi(e){var t=function(e,t){if("object"!==Yi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Yi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Yi(t)?t:String(t)}function es(e,t,n){return(t=Zi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(n),!0).forEach((function(t){es(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rs(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}!function(e){e.chrome="chrome",e.browser="browser"}(Xi||(Xi={}));var os="function"==typeof Symbol&&Symbol.observable||"@@observable",as=function(){return Math.random().toString(36).substring(7).split("").join(".")},is={INIT:"@@redux/INIT"+as(),REPLACE:"@@redux/REPLACE"+as(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+as()}};function ss(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ls(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(rs(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(rs(1));return n(ls)(e,t)}if("function"!=typeof e)throw new Error(rs(2));var o=e,a=t,i=[],s=i,l=!1;function c(){s===i&&(s=i.slice())}function u(){if(l)throw new Error(rs(3));return a}function d(e){if("function"!=typeof e)throw new Error(rs(4));if(l)throw new Error(rs(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(rs(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),i=null}}}function f(e){if(!ss(e))throw new Error(rs(7));if(void 0===e.type)throw new Error(rs(8));if(l)throw new Error(rs(9));try{l=!0,a=o(a,e)}finally{l=!1}for(var t=i=s,n=0;n<t.length;n++){(0,t[n])()}return e}return f({type:is.INIT}),(r={dispatch:f,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(rs(10));o=e,f({type:is.REPLACE})}})[os]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(rs(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[os]=function(){return this},e},r}function cs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function us(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(rs(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(o)}));return r=cs.apply(void 0,a)(n.dispatch),ns(ns({},n),{},{dispatch:r})}}}function ds(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}var fs=ds();fs.withExtraArgument=ds;const ps=fs;var hs=function(){return hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hs.apply(this,arguments)},gs={decks:[],deckId:""};var ms=function(){return ms=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ms.apply(this,arguments)},ys=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},bs=ms({savedCards:[],storedCards:[],text:"",translation:"",examples:[],image:null,imageUrl:null,error:void 0,back:null,front:"",currentCardId:null});var vs="SET_ANKI_AVAILABILITY",xs=function(e){return{type:vs,payload:e}},ws=function(){return ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ws.apply(this,arguments)},Ss={isAnkiAvailable:!1};var ks="TOGGLE_SIDEBAR",Es=function(){return Es=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Es.apply(this,arguments)},Cs={isSidebarVisible:!1};var _s=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];0,"function"==typeof e[o]&&(n[o]=e[o])}var a,i=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:is.INIT}))throw new Error(rs(12));if(void 0===n(void 0,{type:is.PROBE_UNKNOWN_ACTION()}))throw new Error(rs(13))}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,o={},s=0;s<i.length;s++){var l=i[s],c=n[l],u=e[l],d=c(u,t);if(void 0===d){t&&t.type;throw new Error(rs(14))}o[l]=d,r=r||d!==u}return(r=r||i.length!==Object.keys(e).length)?o:e}}({deck:function(e,t){switch(void 0===e&&(e=gs),t.type){case Ei:return hs(hs({},e),{decks:t.payload});case Ci:return hs(hs({},e),{deckId:t.payload});default:return e}},cards:function(e,t){void 0===e&&(e=bs);var n=ms({},e);switch(t.type){case L:n.savedCards=ys(ys([],e.savedCards,!0),t.payload,!0);break;case V:var r=ms(ms({},t.payload.id?t.payload:ms(ms({},t.payload),{id:Date.now().toString()})),{exportStatus:t.payload.exportStatus||"not_exported"}),o=e.storedCards.find((function(e){return e.text===r.text}));o?(n.storedCards=e.storedCards.map((function(e){return e.id===o.id?ms(ms({},r),{id:o.id}):e})),console.log("Updated existing card with text:",r.text)):(n.storedCards=ys(ys([],e.storedCards,!0),[r],!1),console.log("Added new card:",r.text));break;case J:n.storedCards=e.storedCards.map((function(e){return e.id===t.payload.cardId?ms(ms({},e),{exportStatus:t.payload.status}):e}));break;case X:if(!t.payload.id)return console.error("Cannot update card without ID"),e;e.storedCards.some((function(e){return e.id===t.payload.id}))?(n.storedCards=e.storedCards.map((function(e){return e.id===t.payload.id?ms(ms({},t.payload),{exportStatus:t.payload.exportStatus||e.exportStatus}):e})),console.log("Updated card with ID:",t.payload.id)):(n.storedCards=ys(ys([],e.storedCards,!0),[ms(ms({},t.payload),{exportStatus:t.payload.exportStatus||"not_exported"})],!1),console.log("Added new card with ID:",t.payload.id));break;case K:break;case Q:n.storedCards=t.payload;break;case G:n.storedCards=e.storedCards.filter((function(e){return e.id!==t.payload}));break;case M:n.text=t.payload;break;case D:n.translation=t.payload;break;case $:n.examples=t.payload;break;case U:n.image=t.payload;break;case W:return ms(ms({},e),{imageUrl:t.payload});case H:return ms(ms({},e),{back:t.payload});case q:return ms(ms({},e),{front:t.payload});case Y:return ms(ms({},e),{currentCardId:t.payload});default:return e}return n},settings:function(e,t){switch(void 0===e&&(e=Ua),t.type){case we:return Da(Da({},e),{openAiKey:t.payload});case Se:return Da(Da({},e),{mode:t.payload});case ke:return Da(Da({},e),{translateToLanguage:t.payload});case Ee:return Da(Da({},e),{ankiConnectUrl:t.payload});case Ce:return Da(Da({},e),{ankiConnectApiKey:t.payload});case _e:return Da(Da({},e),{useAnkiConnect:t.payload});case je:return Da(Da({},e),{visibleSideBar:t.visible});case Ae:return Da(Da({},e),{huggingFaceApiKey:t.payload});case Ie:return Da(Da({},e),{groqApiKey:t.payload});case Oe:return Da(Da({},e),{groqModelName:t.payload});case Pe:return Da(Da({},e),{shouldGenerateImage:t.payload});case Te:return Da(Da({},e),{translationPrompt:t.payload});case Fe:return Da(Da({},e),{examplesPrompt:t.payload});case Re:return Da(Da({},e),{aiInstructions:t.payload});case Be:return Da(Da({},e),{imageInstructions:t.payload});case ze:return Da(Da({},e),{modelProvider:t.payload});default:return e}},currentPage:function(e,t){return void 0===e&&(e="createCard"),"SET_CURRENT_PAGE"===t.type?t.currentPage:e},anki:function(e,t){return void 0===e&&(e=Ss),t.type===vs?ws(ws({},e),{isAnkiAvailable:t.payload}):e},sidebar:function(e,t){return void 0===e&&(e=Cs),t.type===ks?Es(Es({},e),{isSidebarVisible:!e.isSidebarVisible}):e}}),js=function(e,t,n){const{namespace:r,chromeNs:o,browserNs:a,storageArea:i,storageKey:s,isolated:l,plainActions:c,outdatedTimeout:u}=t||{},{onGlobalChange:d,onLocalChange:f,onError:p}=n||{};if("function"!=typeof e)throw new Error("Missing argument for 'storeCreatorContainer'");const h=a||r===Xi.browser?new Ji({namespace:a||browser,area:i,key:s}):new Qi({namespace:o||chrome,area:i,key:s});return"function"==typeof d&&h.regListener(((t,n)=>{const r=new qi(e,h,!0,c),[o]=Hi(t),[a]=Hi(n);d(r.initFrom(o),a)})),l||h.regShared(),t=>{p&&h.subscribeForError(p);return new qi(e,h,l,c,u,f,t).init()}}((function(e){return ls(_s,e,us(ps,ci))})),As=function(){return As=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},As.apply(this,arguments)},Is=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},Os=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const Ps=function(){var e=this,t=(0,r.useState)(null),n=t[0],o=t[1],i=(m((function(e){return e.anki.isAnkiAvailable})),(0,r.useState)(!0)),s=i[0],l=i[1],c=m((function(e){return e.currentPage})),u=C(),d=m((function(e){return e.settings.ankiConnectApiKey})),f=oi(),p=(f.showError,f.renderErrorNotification),h=m((function(e){return e.cards.storedCards}));if((0,r.useEffect)((function(){Is(e,void 0,void 0,(function(){var e,t,n,r;return Os(this,(function(a){switch(a.label){case 0:return a.trys.push([0,6,7,8]),[4,js()];case 1:e=a.sent(),o(e),u(te()),console.log("Initial card load from App component"),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,B(d)];case 3:return(t=a.sent()).error?(console.error("Anki returned an error:",t.error),u(xs(!1))):(u(function(e){return{type:Ei,payload:e}}(t.result)),u(xs(!0)),console.log("Anki is available",c)),[3,5];case 4:return n=a.sent(),console.error("Anki is unavailable:",n),u(xs(!1)),[3,5];case 5:return[3,8];case 6:return r=a.sent(),console.error("Error loading state from Chrome storage:",r),[3,8];case 7:return l(!1),[7];case 8:return[2]}}))}))}),[u,d,s,c]),(0,r.useEffect)((function(){console.log("App: Stored cards count:",h.length)}),[h]),!n)return null;var g=function(e){u(I(e))},y=function(){u({type:ks}),chrome.runtime.sendMessage({action:"toggleSidebar"},(function(e){chrome.runtime.lastError?console.error("Error sending message:",chrome.runtime.lastError.message):console.log("Extension closed:",e)}))};return(0,a.jsx)("div",As({className:"App",style:{backgroundColor:"#ffffff",height:"100vh",display:"flex",flexDirection:"column",position:"absolute",right:0,top:0,width:"350px",fontFamily:"Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif",boxShadow:"0 0 0 1px rgba(0, 0, 0, 0.05), 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},{children:(0,a.jsxs)("div",As({style:{flex:1,width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column"}},{children:[(0,a.jsxs)("div",As({className:"header-buttons",style:{position:"absolute",top:"10px",left:"12px",right:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"6px",zIndex:100}},{children:["createCard"!==c&&(0,a.jsxs)("button",As({onClick:function(){return g("createCard")},className:"header-button",style:{backgroundColor:"#2563EB",border:"none",cursor:"pointer",fontSize:"15px",padding:"6px 0",color:"#FFFFFF",borderRadius:"6px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",flex:1.2,height:"34px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"},onMouseOver:function(e){e.currentTarget.style.backgroundColor="#1D4ED8"},onMouseOut:function(e){e.currentTarget.style.backgroundColor="#2563EB"},title:"Create a new card"},{children:[(0,a.jsx)(st,{style:{marginRight:"4px"},size:12}),(0,a.jsx)("span",As({style:{fontSize:"13px",fontWeight:500}},{children:"New Card"}))]})),(0,a.jsxs)("button",As({onClick:function(){return g("storedCards")},className:"header-button",style:{backgroundColor:"storedCards"===c?"#e5e7eb":"#f3f4f6",border:"none",cursor:"pointer",fontSize:"15px",padding:"6px 0",color:"#4B5563",borderRadius:"6px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",flex:1,height:"34px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"},onMouseOver:function(e){"storedCards"!==c&&(e.currentTarget.style.backgroundColor="#e5e7eb"),e.currentTarget.style.color="#111827"},onMouseOut:function(e){"storedCards"!==c&&(e.currentTarget.style.backgroundColor="#f3f4f6"),e.currentTarget.style.color="#4B5563"},title:"View Saved Cards"},{children:[(0,a.jsx)(ot,{style:{marginRight:"4px"},size:14}),(0,a.jsx)("span",As({style:{fontSize:"13px",fontWeight:500}},{children:"Cards"}))]})),(0,a.jsxs)("button",As({onClick:function(){return g("settings")},className:"header-button",style:{backgroundColor:"settings"===c?"#e5e7eb":"#f3f4f6",border:"none",cursor:"pointer",fontSize:"15px",padding:"6px 0",color:"#4B5563",borderRadius:"6px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",flex:1,height:"34px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"},onMouseOver:function(e){"settings"!==c&&(e.currentTarget.style.backgroundColor="#e5e7eb"),e.currentTarget.style.color="#111827"},onMouseOut:function(e){"settings"!==c&&(e.currentTarget.style.backgroundColor="#f3f4f6"),e.currentTarget.style.color="#4B5563"},title:"Settings"},{children:[(0,a.jsx)(Xe,{style:{marginRight:"4px"},size:14}),(0,a.jsx)("span",As({style:{fontSize:"13px",fontWeight:500}},{children:"Settings"}))]})),(0,a.jsxs)("button",As({onClick:y,className:"header-button",style:{backgroundColor:"#f3f4f6",border:"none",cursor:"pointer",fontSize:"15px",padding:"6px 0",color:"#EF4444",borderRadius:"6px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",flex:1,height:"34px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"},onMouseOver:function(e){e.currentTarget.style.backgroundColor="#e5e7eb",e.currentTarget.style.color="#B91C1C"},onMouseOut:function(e){e.currentTarget.style.backgroundColor="#f3f4f6",e.currentTarget.style.color="#EF4444"},title:"Close"},{children:[(0,a.jsx)(dt,{style:{marginRight:"4px"},size:14}),(0,a.jsx)("span",As({style:{fontSize:"13px",fontWeight:500}},{children:"Close"}))]}))]})),(0,a.jsxs)("header",As({className:"App-header",style:{width:"100%",flex:1,display:"flex",flexDirection:"column",backgroundColor:"#ffffff",marginTop:"34px",height:"calc(100% - 34px)",overflow:"auto"}},{children:[function(){switch(c){case"settings":return(0,a.jsx)(ki,{onBackClick:function(){return g("createCard")},popup:!1});case"storedCards":return(0,a.jsx)(Pi,{onBackClick:function(){return g("createCard")}});default:return(0,a.jsx)("div",As({style:{width:"100%",flex:1,display:"flex",flexDirection:"column",overflow:"auto",height:"100%",position:"relative",marginTop:"20px"}},{children:(0,a.jsx)(vi,{})}))}}(),(0,a.jsx)("div",As({style:{position:"absolute",top:"8px",left:"0",right:"0",width:"100%",zIndex:60,padding:"0 16px"}},{children:p()}))]}))]}))}))};var Ts;console.log("Content script works!"),console.log("Must reload extension for modifications to take effect."),Ts="Using the 'printLine' function from the Print Module",console.log("===> FROM THE PRINT MODULE:",Ts);const Fs=document.createElement("div");Fs.id="sidebar",Fs.setAttribute("style","\n  all: initial;\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 350px;\n  height: 100%;\n  overflow: auto;\n  z-index: 9999;\n  background-color: #282c34;\n  box-shadow: -2px 0 5px rgba(0, 0, 0, 0.5);\n  transform: translateX(100%); /*    */\n  transition: transform 0.3s ease-in-out;\n");const Rs=Fs.attachShadow({mode:"open"}),Bs=document.createElement("link");Bs.setAttribute("rel","stylesheet");const zs=chrome.runtime.getURL("tailwind.css");Bs.setAttribute("href",zs),Rs.appendChild(Bs),document.body.appendChild(Fs);const Ns=(0,o.H)(Rs),Ls=()=>{const[e,t]=(0,r.useState)(null);return(0,r.useEffect)((()=>{js().then((e=>t(e))).catch((e=>console.error("Error loading state from Chrome storage:",e)))}),[]),e?r.createElement(w,{store:e},r.createElement(Ps,null)):null},Ms=r.createElement(Ls,{});Ns.render(Ms),chrome.runtime.onMessage.addListener(((e,t,n)=>{if("toggleSidebar"===e.action)return chrome.storage.local.get(["isSidebarVisible"],(e=>{let t=!e.isSidebarVisible;chrome.storage.local.set({isSidebarVisible:t},(()=>{t?(Fs.style.transform="translateX(0)",document.body.style.marginRight="350px"):(Fs.style.transform="translateX(100%)",document.body.style.marginRight="0"),n({status:"Sidebar toggled",visible:t}),console.log("Sidebar toggled:",t)}))})),!0})),chrome.storage.local.get(["isSidebarVisible"],(e=>{e.isSidebarVisible?(Fs.style.transform="translateX(0)",document.body.style.marginRight="350px"):(Fs.style.transform="translateX(100%)",document.body.style.marginRight="0")}))})();